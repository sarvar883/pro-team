(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t){e.exports="data:image/gif;base64,R0lGODlhAAEAAaUfAP////f39+/v7+bm5t7e3tbW1s7OzsXFxb29vbW1ta2traWlpZycnJSUlIyMjISEhHt7e3Nzc2tra2NjY1paWlJSUkpKSkJCQjo6OjExMSkpKSEhIRkZGRAQEAgICAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hFDcmVhdGVkIHdpdGggR0lNUAAh+QQFBwAgACwAAAAAAAEAAQAG/kCAcEgsGo/IpHLJbDqf0Kh0Sq1ar9isdsvter/gsHhMLpvP6LR6zW673/C4fE6v2+/4vH7P7/v/gIGCg4SFhoeIiYqLjI2Oj5CRkpOUlZaXmJmam5ydnp+goaKjpKWmp6ipqqusra6vsLGys7S1tre4ubq7vL2+v8DBwsPExcbHyMnKy8zNzs/Q0dLT1NXW19jZ2tvc3d7f4OHi4+Tl5ufo6err7O3u7/Dx8vP09fb3+Pn6+/z9/v8AAwocSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gnQQYMCBASC0BDihQcMDkySsFFjBgsKDAyysIZs5EcFMJ/skBSRLoZJAgyYGjIQcUWEoAiVCdRY8ogADhwQGQBQxoNSDgyNOZUYsUkEC2KtatBmwa+Ur0CASyZB+AHIDWANAibMMOSUB2AlkFIAPUNeBy71C9AAREgCshQte5dZsSyVtkQV+yiD1mRVsYAOUhAxhLgHBTQF21Qj4LcXBZAuqTBOo+9nx4iAHRDjT+7ExEcF3DUIe89Uv2rpECDhwsaKh0a8kjsdHe/cxXAvHlRgQ4uIDhggTsCqNvLWCcyGCTAu4O6KqYcQTeARZYyJABQ3fSC8WjLTBbCF2tBPBWxAAMEMfTEAEgQAEG9NF3H0MBbDZYgEQs1Z8SBTwgF2gS/jDYoIMWvJaQABIOZpyAS4wkhAANXPBhgxhQYABEzQ2W1oVQBKBABR5+iIEFC6C40Eg2pmUFBS/Sd4EDOEIUgH5aCenEAC7CKIFkGJHoHBYMOFjBgRz9l4UAF1jAgJQXBdDkFAmU19ObRqgpwJx01jknFwvkqeeeeSbAlUE1FqmViFds4MGhiCZ6qAYPrMlPoIIaucUFH1Rq6aUfeNBBBuAFBKmghFpBKaaYasopQVpGOigXo5JqqaYXZPaPAASUaGOoVWzAwa689srBBhbICuewxFZBqxYEuLlRhFFi4Rt/HD2JFpZV6EchRv/JZoVpJlqU6mAFoLmEreM5mpC0/kVeSwW6t5pbULbgFrYeFOkhCOW0zBUJLYJaKYvEf519W5e/Bd1rlxH6EewfvgPaSC1CUKrL737+/USSELYKyG5aDx9E66BC2vqYtSuehgSzBUg84p1IcLsVliQLAaWjAdSs0XlDxAyAb2j1BK8B1OoMQMQv8bxVEUIDgHNIMyPN8BAuAxiS0ZISkTQAGYMEpYBXU92xRiV+ffXQFH+01FYojs3zUoEttS/CTxdB4lLiWlSzlGMLcXexRMCrMN/ZbfY24EzQSoC7hCeu+OKMN+7445BHLvnklFdu+eWYZ6755px37vnnoIcu+uikl2766ainrvrqrLfu+uuwxy77POy012777bjnrvvuvPfu++/ABy/88MQXb/zxyCev/PLMN+/889BHL/301Fdv/fXYZ6/99tx37/334AsUBAAh+QQFBwA/ACxiAGIAPAA8AAAG/sCfcEgsGo+/QACAbDqfUONgKohar9FBYUsIYL/g4cBALlTD6KRAoEQSyOSzUTAdeNNHwo8gL77hfUMCBgkJCHp4RAGIe3d+cAaBQwoMDAsFiYqMPwN5kJIDCZWWmJlIZkZ/cUUBBgujC5uZAqVCsnufRQOUowmOpntEqESqkYoHo5a3mb/BxLlDBLyVCM3AnUTYttA/AgjJCtrAQ821uIBDBa+jBmkBa5KC5nbb6JyivfFVZfHpBctJigwrVqXVOlJGFil4AOFBLCRa0vFpRouYkCUAALTZlQyBFAQOIkiQEKGBuWwn/zkRhwTfQ0EHGkAYObLkSUGnxHnpYmXA/oIDdwYtmEmz5gKW5JBGC4imoLQHIouSNGlN0ymAVryFlDrygcesAJVaCeCAqwQI4cBUFMYkTQGpERjgCSCu35eaDgxU/bJoCzAJXu2GEfzl67jDaPYiVoSgsePHCA4YQLTTbxOsYSxo3sxZMwUICbr1PJyhtOnTGTBgsOBgAGExpFGjVs26E+al41Tr3r27QgM7EZ/cxiLggvHjyC9YqAAB6OLn0FcqTjwFWIS0pt4RwNQWz4IOGSIgeP2ETi2xWDZ88NABg4MC05t4uRn/yYMP+NdzqMBguCJnR3T3hQEceOBBfgZqMEEC6BFRxU0/FNAgFAEkYEEHByIIXgTOxCExnxtneFFfEWcIwEAGGOa3XgcWMCDWWuVB6KEemxAQwQYGaljBARClxNRFVyySjk4HUFBghh1cYJguMjpozjIF+ZFQAhdgyJ4FSxrBRTxCplNVP0oJ4EAGHITXJCcrzYNEiAJdRoleTT3ZhBwwNvJclzit2cQwiNXJk57yWIRYOeXpIsyEaqnpRCB4AniNMFBI0gefpmyCqCS/UJqJNv7pUwt5VwhAY1YQCYGoWqBq6iCo0cEXHR7bSTjiq0fccSoWQQAAIfkEBQcAPwAsYgBiADwAPAAABv7An3BILBqPwwByyWw6i4IfgfADPK/YrHbLFVKT3fAw6iwojwGBWmxUFrBmNKFQIJDZ2bcwbhwUDAYFd3hXej98RAJ/gIKEQ19MhoiPgIxnjn1GkpdCipUGBFaYT5tFBJ+To5FDkwOfBgOiqk2lrJ8EnKqGQpe1Aa6fg1oCAwNMrkUAyrWelbhIc3W5vEKBu4WsZ6eVjUcIC+AIxm0/r1exyunpzYDo6UoHCgzzDAnjRUoGeQKycpZFBuTRm2ePUKwrig7uSbBg4LwFB4RhCwPg0jeHD8Wp6zfrSDyMDBYkCIVHYpaGGBWk6gKpywCHEE12mbYlQUaFhFqGeTmSI/4emlxWdhyKRE2xo0iLjZK5ZA6gY5gERJhKtepUCAwOACU6RILXr2C/QkjAlOuPsGi9ji1b5N7PtGgfIOBEp65dOqMIQNjLt+/eBwpImh081CfhcxAQsM3iRx8hBhgoNDCw9YkSnWwGXMiA4cKEBZgRhmYjIYNpzhYiFGR87VEYBBYwnDaNocKDiE5+/ZkVIAACCRdkn+4suXWi0QUGVGYiYOyQBRQwCKd9QbVMt0SeDcHeBMGGDhNaOog9HYMFCMaB8utyAMOHDx40MAigzgCE2NQjpC+S/AiwSnd88YwBGHjwXgcVtIbABMGZh55lRyiSHSvZ/BCAAxy85wEHD5yYxAAFFnzGXSJABbANI3fUQoAFBsKHAQJIDIBAT+qwoY4vDGR4YAQjznJNLT8MQEGLHmSgwHJcYOfOMhUOkcAG730A3mij5AKkhQ90oOEG843yHyASXXnIBURaYNxMLYUmZgAN6BhfApjQZZKYUrDoQZFwOsIJTkTQ+cMCGnTAwQV58lYGTQM4ENwDVBK2VTqHQRMpRZMyptwoQQAAIfkEBQcAPwAsYgBiADwAPAAABv7An3BILBqNgaNyyWw6hwTh4EmtVg0Gq3bL7T4FzsLX24z+CtOjuAkmu50BQvZNr1vTdrP9jT/3639aa0J6ez+FXgVthkKDXoF7iE+Fjo+LRQKVWgMARwEDoJdKc0cAkIcEBZpQSUYDqQYFBK1Pp1yKRgKwWAazS6s/tES+TKaErgW8vMRHqUqXBKJMcYufycpYaMJEANZOnVrgutjZ0eBLAAIDmqRdcdfKsgLb07qa9FUA8Lza51WfhWxRERBvQAB/4bz9QMhFjjyGXNIREPgvGj4yB+tkZMTxTkclB0KKHHkgVhppH4cMYMCypUuWCxIASznkpU2YBi7S/HHT5v6CnI12ElnZs2VMMenUgVrKNJQdASSjxjIntKrOqmwkeWlwACsXCRAY0FnXzk0BCWglPFDgTkhZNwEcpEUbwcEWe81QUhmwAMJculzNGoRIJd2BBhH+gl3w5G0/KHqPTEEgxFQCB4nn1qXs6UfZh0WyMHvG4MIFCHjiKHjwNwIDrW6HDS4y00iFDBkwVGBLJEABBn7pvg4zm8kgC6ZNiyEQAQNuDBKMGG4AIUJY2D+WCiBchJMQDB4+fNiwJkEF5xkuNCg14EACBAYiA5j/bwh48eSlPLjwnELXUvNx58Qffdw33hoAHEABehc8UNVoBuYnhAAN8JdbBQl0RAouRHxE6MhZ6GEAASOZDGOEh0UoYIFzGFjA2EeroDgMBCFG95F3RchIhHksVvAfI6PZF96BrjywIgb+MaLKEjoScQAEFFAAwVsYCWDlEhd4oKUGq/iGAAIHULRFgEtUoKUHGGDnVREQbMABBxOIueYPCUgwwQQMXDXnhNfIWUUQACH5BAUHAD8ALGIAYgA8ADwAAAb+wJ9wSCwaj4LkcclsOp2DX6HwrFqvwoIBy+0eqd7wcRBlbp2BH7ks9p6d02nbKABLBcc30z7/FtNFemOCfUQET4RFfIVGBo6Oh4FNBHp4jEOUjwZsQolCAp6XWUSLngGRomaqg6lNi5Y/nouARwG0TJG3RJoGBICJA6FEeAQEnEWoPwQCuspNZKiLe48/sIrX1j+62UTNRgNaRdxCmbwFx0MDAE91RmmUXOFGh7QF3ksAnALJ4k78huO4gGNyb16ic23k7RKyzko+hYz+9ZHWpmAbiWLYWGzVpeEljxxDivwjYECxkyhPohNzKqXLAcyyCGsFgJdNRwgxjox101z+lJU7efZ8hDBoraFElzWE5hIlUC8tm6q0ZbSqkI1YsGYFp5OLgk2FAux7pNVJAgYLEhQIaGUfsjkDGMhFiyAjRbZVFsydq+CANiu/OCbQu1dugpmf4DUJQHExHsYKCstN+6RxkQMaHlwp4MDvpwOEC3/F1YjOBA8fNiyoIkFCAyL5EISemwCoNG4KOHzY3QHC425CWreOkGDe4L21xRC4gPqDhwzFhWSYbmHLgAfCJWh2Z0DBgu8IgL77685Bh90feluyMD1DdQAAEGSPsBqJAQS9yjbK0NzDBc8/sEfdGQI4kN0DiIURQATn7cZBA7QI6N4bBkSQHQMhIbBBfxSe8CFhdUMEsEB2EBwAUiECUNCfBgvc8qEeA0CQ3WupLNBgehIc8yJ8PCYwnwKiDGBBfxnUVcSLRVyXnQNdcWHAhrz5ZsSOPMJ3AIkJWmFABh140AGIU7YHZjcNDPeAZV0QEEEGGljQ4hFIGsEZBA4s0GRWBzTAAFhwtleBJ4ccsIxVQ2BgKAWEYmHBBRZAkKgVB1j4QHSPonEAAoNeEgQAIfkEBQcAPwAsYgBjADwAOwAABv7An3BILBqPxAByyWw6iYRh4Umt/gJKqmCJzVqpg+1xKjSIi4CvWkjwEsk/89Kwbrp/g/FQbowO83VGaVB6ZWeBX4BlilJ7h4hVAXA/BY9wfH9FjJBDj1dvjkWTnEt+naCGpGoCk22NqUKeiF1IAJuKl7Kxdk4Em0OSSLlqprVEdL94x4qAYYGjQwDFbJ9LyUPF16K1A9BHukgB04EB3UYGBYzaSJ50fU0AAuNJqkfrSaz1Tulq5d6ImwoQAAdP3r81AA4GkldPzL0v5VTZ0kdRyKCKGDNySligo0ePbJz9mPdOI5OHJptEIZiy15UBBD7K9EgS4cybQpQA6MKzJ/6Wejt9Cr3YsmUAAwdUsYRYwAEGDKQkDSQ1YIEFDh4+IOBEwAC6AXesBEhAYUPWDx82LGUiwKtbfhANQNBwFq2HDhACJXT7duoTcQ0udEBrt4MGCQnCUvHHt6+TqhWwEv7gYQOFBYDcqdnZrbFXuEcCMMhQl3IHDA4KZDFQQQJKPAsMZIkX07NAxT8qdDh7N0OEA4cgYMhwgcG6AQkYMFBQJIA827quepiuYUKCTQkuZNh+4QGbLAK2VFWuPCkRzgX4VkLyQLuGCgzGDZAwPAMGCuYhSNj/+woC8gwscAR6HfnVRwIIqnYEA9px18AQ+vFn3njkbTWgc+E9Q0F9GLxIAEeEEvT3AwAGACggbpw4tR0GFggI4X4hmveDAAoAmEBGB1jAIQTFgCjiiAWYWI0+EXBYgYUvSphEcuQxR5ECDRLngBE+ysjGAgAiSYoA9K04gZVCVNncAQA6qQoBFTzFIgNHiKlJjcotoNAXBExgwQUWROCNm+cZgOVy+gjAAAQRPKAlEXwSIcABCB7KSTcC6fIAjBCAaZEAA2SKYkYOwPjAnEUZocADEEDAZqhWEIAAgpig+ld4m6oRBAAh+QQFBwA/ACxiAGMAOwA7AAAG/sCfcEgsGo2CIeHIbDqfzUFhmIRar8NAdGgYYL/g4nLofVbDRoDX4BwLy8XAkg1HE9VQ968uxAvZdkd1BWdKRHw/AlN/iIGKT3qIeoSBaY1EkUWPjJVHAYtCej+ZWaKdR35kmIdDqadOck2kP5+rr0ebP4ChrD+unaZGg1WkuVcEhVREoJrMBFrJvEPMYcZ0Rb9N2Y5MyES1V9tC1D+UgeJNWkXkVgFSRgYFl7fho+zB4fhoAqbRX/6+0LizVUkfGgB7pqirtJBeIocQI0qc+GSAAggVLmDYyLGjBYf6CoAyMGGDh5MoU5684JCdEQIGKHDw8KGmzZsfWNJzSYRN/syZOIPqvMWTyx4GFDBo2MC0qdOhFJm4IyCyqtWqUbNqhVJ0KxM1CSJUAPgFoZCG+xBg3MjgFBxvdgw0SIohQ4YL89q9IrBAgka7GTBARWPqGhSwESzUBYyhwgME5/jxREtEwIEHFRbbxWAhgoI+z8o2xAcXm4EIfzdfoNCWCgMHXakU0DMQ3tcEmTc3dhBHrQQJUOQYiFfIbGxfCehyhgBZTIPfvxt4EVBmgBbhww0Ek/wEwIEIFCpIUIAoQFjoEIYcYMCeARs1BbJ3kVXxgP2vBR5Aj7BAfXv3Z8GUXQGU3SLAAhFA9wAR67W3iyLyDWCWQwAYoN9vESTA4H+7jaghnzkODcAAdBLwtqGD38SXnUEC+fZbekU0yN4uvgzwIVmEOUBiayfOGIeAw7FYFgIJvniEjADeAeFwIHYCgAJF8nckh0ZgN1xeZSUAQQQRmGgEkjTKxiSWWFTY3gFMgInKAAS0iWNZ/Bgk4wJhZhHAnV5xsQB7/eV5TAILLKChn1YsSSChh9FSYCBBAAAh+QQFBwA/ACxiAGIAPAA8AAAG/sCfcEgsGo2A32AgCByf0KgU6hwKptis9jocaL9gIzdMPgYIBQLUO1Q/0e7ykWsojIlsYVweLggNBFV4RHt8W35ReT+FP4KGT2eEjkqERQCKj0+IPwaYioxFgZmhRJtCn1F2o0UCm52DbVCvq6ljqLRCZwezU6KUsWR3RgUSGhsWC8I/SU+3k75HBaZGCBcdHh4cEweTkVJezETKR5hDCBgdH+oeGhEGk5vQUQaNWOVCBxbX6h8eHRkNUMmTokpIkgL0tAxgYIGDB379OlhIUEXAuERFEhYpcG9IgAMQMuzjl23bJFoXWSUoNrIfu2mZ1JxMtKCCQ4gP+EyqM2Dm/pQABRxYe7jhUUc5Ag5EELngETMCKcMMSBBh1BWffKLi2srVCgIhFsKKHRsWKxkDaNOq/ZGm5wAHFTDInUt3Li1QGfU8sCA3g9+/gDPQOsqKwN6+gQMPzmIxAQQKFchKvmtPyBWEajOjNdu1s+cnl1ZxDiMAwQMJqzhmAtogggTUj+j4GQ2FwAIIr3PD/ALAFCCtSKaezp3bAe1m0b4kdUA8dwQGB4CH4SkFKAPXzSM4SGAl65M69chdby7hgQIiHxcQRo832sWgzSEw0LjMNgMG3L/9KXevY1DsETQQHSsI3HdfAldVEc5G0nVEAAMPQLDdEb0tYOAC7yihlhvCmrQ3xG6WoQHIEwIkYCB+XWwIhXRlBGDAiU2lmFZ7A60ygAInHoCHit+t1+IBJ56344ykfLgVAPbdt4COQ6JVSCtD8GKViQbm1+SItdxloZIwDcCjLD5+UcCWDHxlhJdEWnLLKGPepwAoaDpphhv0xYRAAgnUKaOcc3RBSwBLHBUnliSyiBJmUn6mxRnSFKToFwEIEOijZCy4ShAAIfkEBQcAPwAsYgBiADwAPAAABv7An3BILBqPAcFxyWw6n78BdEqtBgjVrHZZGGKXgPC2WXhYKAupUfkMqMdMBYbTwSiObCvcqNB4PB0UX0R5TAJdQgQBe0V9Hh8fHAyLhE+DP5eMPwYWjx8eFohDhVBvmj8BDRueHQ6UQqRFr6dLBBQdkB8ZCJVgprRGAQt+kB4Tb7GjopizwAMSuJAbC5TJiUQF1qUEBNYIGJ4eFV/Wh0MGv0QAzUUDDBQVEQl4Dxy5HA2L1plLbk8GES5gwHABggEjBSqEu4Doy6Bf6aoAFJghA4YKDS4FYLAKEoaDUDIBEMCPSQEIFCsOREOEwIQOG3iNcbNsSMQfAhIExFBR5f4FCQiUBFAAQVs/ITRrOSnQgEJKlRYedGFHxZoBLFSNHHhQYWDPlSCBGShws0kCCBZ49pQA7BSBBRMoXii7pVvWKQEMNL3AgNbBAXezCNhKt0rhtogTKw5GQIGDBxAiS54MoeSYAQUya95cJOcDCaBDiw4dOMthWAKIjl4NejEZnKpZj3ZtEtUBBg8i6N7NW7dR0waCCx9+sKaQA8iTKz/wu4qA59CjQ0dFuzqS09aPABiAII1bYCMPLGDAYB6j0lTWFVBAvj12JpazXEnQvj41OM2fbO9ev72CsNkVMZIB4/XHgAIHUBcAAHCUhQWDeIhn4AIIDLJdNlNcqMkA9JPZl0BNARQQnCJNjGScF0cZwWF9//2y3XCIiCEEg9vNdAR3CyyAIHWdiSgcOXg9cRMlJyJFAIyjaPdeFHu8OBwyKWYX4nCX5Eebk8GR1UuASPg4YmdcanekcBhuGaYyTzZj5WKHkImHFuhV5aOWa2RBIi0kZXbTmnrGWdVzWZnzxJqIzRLfmUwsGSCD3CBKhZ9ZBAEAIfkEBQcAPwAsYgBiADwAOwAABv7An3BILBqNAYJhOTg6n9DoU9CgUCQJqXbLJVA4nI2ES44Czk9DxsPGlN/GwSGRMASOh83n49FMBQJwUAcSFBUQBnh6fH5GAAMFBYJQCBUYGBcQTUV5e31SBYGTRZUYGRgWWZyLn1Gho0UFE6anEgSrno1EApJCBrewRQsWtBcMuIxGwEKvwUURtBgUvUKdybFDv85GCZYZpw6iP9atQndEzdtEDxffqAcA1ay6j0QGm29n+k8U0RGb5HQZKXDuCBonAuYoQECgIJEG7b5dUCAvl5MC+IgAEDCg4xMCDCBEiOAAgYB4RSREm3DrAKYL7YTwyrZsCIAAkIg4HEKgQf4ECUAhMDBwkogCYqcsINiSzlxOmuKI9PwJFOgDBQSJQMDEIOqRJD+07arpi4DXIQgcUK1KMsGAcwj+cZkpZCMBatmaHlkAoSrbBgdOnpVy5+bTWBmj+PQblAFZMoftPZaSdq3VnbB+Dd6i4IFfvJkxOgs5Rh1oZw22DTCrbkji1rBjmxGg5IDt27htb4ZDm4Dv38A7ngxQIMECBsiTK0f+WvYQSXcOHF9O/ZhzKE2kV6d+HfuP4gumb2fQ3Hki1vaWqF9vp3XH9/Df7+7e/eY2lK1xZg22umgwuwWINQpKGAWAXz4cBajefFpkVGA++rFnQAEHloHZD2ZVCAVOSrJI+MuFZCSCmH9PAOhhKPFoKMWBp3331hMRSijaELSBeARtu3w0RYfrPSiVEAOoqNNkaezIHnrYqBYWVDfetUSLP+zUC3GRRFLiRUtguBlHA2xWTzabEPecEyLe2ESXk9DFzDliMkOfjmAO0eZ3b95IjYBRUgMlfTU1Neee12V0TxF/1qlTkjrpKQWRzgxKqKKumLdfomO6wqAgSFLq5hFPZfqmQ4AaGqmoIZ5H6huejhIEACH5BAUHAD8ALGIAYgA8ADwAAAb+wJ9wSCwajQABgTAIHJ/QqDSqeDwaiKl2y/1BLJZKpEsuEymYdMXMFioLhQHUkslgLM/BAYEoONtFBQwODgxPCHR2eEYCDRYYFxEHgEUGDxESEQ4CRoh1d0cIFx2kGoaUQwYQEqwRCACwsZ6KRgMRHR4fHhwKqEMEDqysD3JEs6BEAQoZuboZxb4CCpjCC7Gwx4u/Ex0fuh2nvkPBwhAExonIQgEMG80eFpziQwirwgx/P9lEBhbvHAnmFWEgLJMBeum0CXjAwZuuCfkE/jhgb5i8fUIQYHin4SAbAnAICABwZAE1VgmwJRQyQEI3bx0gRBwSgJOAmUMGJFjAMwH+AZw/HhSEIGdfgAUa3j2DAqfAuSM6GUhlsABBkyIJTkpYl+xHy5e7FjACSaRAngRTpyowMDLWgAastLTTVSHANSFmA0ExoCCtWj8khTjIq+XBhizroNWSstMvVZ9/gEYxkO+pEZFaDDT2u+CAPDNvntzc4uRAX86APpe9agbBgrSKzVgWJ6BA44CUKqumxFccWclsgJcJIFyi8SPEBQxYzrz58uJknEsXMNorSAPYs2vHDt34zQEFtovHflxLAPDjxZeXcg59eu2B10OpOWCJ/fv2BdbHj395dfkArhffPEoI1F0ZsQU4BU4HKvjDbEJA6CAjPxA2D3hP/IQKa22ZFGgcZjkNKEUAhDkh4YJHGABiILsdAUAxs50X3mVM6dUgGxZWONkUENrExH4saeHhFMsx0WKGbmy3zolG3MiGAEq6odeERECpHZVM5WNldlNS6dEQW5JHxADbMUmJhT1GudeHUoT5JZZRuNkkAdsduZ6cjFiYICBNxXEEnlQyZ6dqb9YygJ13wtmGATkq2iQ0ezpaBHXEzRMEACH5BAEHAD8ALGIAYgA8ADwAAAb+wJ9wSCwajwGB8shsOp/Pg0KBIECv2OyvAYE8FtqwmAiRmB/j9HDAFgCYEbMEwhQUDIbBW10kJP4HA3BydEYBCRAREQxWfEQFCwwMCwh7RXFmhUUGEhcXFhQJjo+RkguNl4RGAg4XGK8WCKNECpKSCQFGmHNFAAgUGBkZGBSzRAi2kga6qkQDEMHCF2DGQ7W2CgKpmUUJFdEYEtVEB6WSB5Y/u5o/BRHgseNECckLgkPrQwEMFuDs4wEMmGNQCV+zHwYmgKugJokSN0zo2VpQwCC3H6wuCMtwoUE6IQGnKEBVRACBAigJQDQyUEEudc0QfBNGzFCBBhc2aLjw4KP+EDt48BQYEODjgWQMKi75EaARNJoXFBQZsIDCBg9YOWDwifFOUKFEi1xLcI+JII3hiAhIIEFDBw8fPnjocIFrU69fDai0VK7skwESLBwAaQBChrdx43rI0MDJALxfCxAommZw0wYWOMBN7IFDhWxQTuYF+1JMgKpXE8ely8DvE5OQhXLFAgExZw0OCpTO8jivNjUCNnDeMAHB7jABeusdhUCuZ3vGTh5Pg6EjyVm/Rx3QLa+7ljcOH4p/ODvN+PNMjVR0Ul7MdfUEwr73zmc+fTGu7xuxT2TZzwH8DdGePI0MqJ93Bh4IhR7G5OfIPdmNolJ3BSSYxV7mHeEgH0OfTceeE+t1t6EhI47i4RATGhPhFST1pl56R9jRxHSTaVGiGg7690ONWOyWRIAvoshEiFMJ4ZeOTLyEpBNANuFXiEQSORUBQAZg5RhPrtFHeVd6lyVI162ooJGPqDXmgmXqc92NaSxZ5BBSygjniWpIacSXzrhZDZt4NsFdg3rmCaeGJe2J5qCGNDmLhwPoaOd/93V5pjxyTjoGSpZmWE0QADs="},108:function(e,t,a){e.exports=a.p+"static/media/white-spinner.f8d51a24.gif"},110:function(e,t,a){e.exports=a(213)},115:function(e,t,a){},14:function(e,t){e.exports=[{material:"Pro",unit:"\u043f\u0430\u043a"},{material:"\u041c\u0410\u041b",unit:"\u0433\u0440"},{material:"\u0422\u042f",unit:"\u0433\u0440"},{material:"\u0413\u0440 \u0413\u0440\u0430\u043d",unit:"\u0433\u0440"},{material:"\u0425\u043b\u043e\u0440 \u0410\u043a\u0442\u0438\u0432",unit:"\u0433\u0440"},{material:"Dry Smoke",unit:"\u0433\u0440"},{material:"\u0410\u0440\u043e\u043c\u0430\u0442\u0438\u0437\u0430\u0442\u043e\u0440",unit:"\u0433\u0440"},{material:"\u0413\u0435\u043b\u044c \u0422\u0440",unit:"\u0448\u0442"},{material:"SP",unit:"\u0433\u0440"},{material:"talstar",unit:"\u043c\u043b"},{material:"2k",unit:"\u043c\u043b"},{material:"Progreen",unit:"\u043c\u043b"},{material:"QB",unit:"\u0433\u0440"},{material:"Sprayer Gloria T405 Metall",unit:"\u0448\u0442"},{material:"Agita kr",unit:"\u0433\u0440"},{material:"Micron",unit:"\u043c\u043b"},{material:"\u0420\u0443\u0431\u0430\u0448\u043a\u0430",unit:"\u0448\u0442"},{material:"\u0420\u0435\u0441\u043f\u0438\u0440\u0430\u0442\u043e\u0440 3\u043c polomsk",unit:"\u0448\u0442"},{material:"\u0420\u0435\u0441\u043f\u0438\u0440\u0430\u0442\u043e\u0440 fullmask",unit:"\u0448\u0442"},{material:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u044b\u0435 \u0412\u0435\u0441\u044b",unit:"\u0448\u0442"},{material:"\u0423\u043d\u0438\u0444\u043e\u0440\u043c\u0430 \u0425\u0430\u043b\u0430\u0442",unit:"\u0448\u0442"},{material:"\u0420\u0430\u0437\u043e\u0432\u0430\u044f \u041f\u0435\u0440\u0447\u0430\u0442\u043a\u0430",unit:"\u0448\u0442"},{material:"\u0420\u0430\u0437\u043e\u0432\u044b\u0439 \u0420\u0435\u0441\u043f\u0438\u0440\u0430\u0442\u043e\u0440",unit:"\u0448\u0442"},{material:"\u0414\u043e\u0433\u043e\u0432\u043e\u0440",unit:"\u0448\u0442"},{material:"\u0410\u043a\u0442 \u0421\u0447\u0435\u0442-\u0424\u0430\u043a",unit:"\u0448\u0442"},{material:"\u041b\u0438\u0446\u0435\u043d. \u0413\u0443\u0432\u043e\u0445\u043d\u043e\u043c\u0430",unit:"\u0448\u0442"},{material:"Coldfogger",unit:"\u0448\u0442"},{material:"Thermalfogger",unit:"\u0448\u0442"},{material:"Sprayer Gloria Prima5",unit:"\u0448\u0442"},{material:"\u0424\u043e\u043d\u0430\u0440\u0438\u043a",unit:"\u0448\u0442"},{material:"\u041a\u0435\u043c\u0438\u0440\u0443\u0432\u0447\u0438 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440",unit:"\u0448\u0442"}]},15:function(e,t){e.exports=["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"]},183:function(e,t){},21:function(e,t){e.exports="https://pro-team.eu-4.evennode.com"},211:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(29),c=a.n(l),s=(a(115),a(3)),o=a(4),i=a(6),m=a(5),d=a(7),u=a(8),p=a(36),h=a(58),E=a.n(h),f=a(10),g=a.n(f),b=function(e){e?g.a.defaults.headers.common.Authorization=e:delete g.a.defaults.headers.common.Authorization},y="GET_ERRORS",v=function(e){return{type:"SET_CURRENT_USER",payload:e}},N=function(e){return function(t){localStorage.removeItem("jwtToken"),b(!1),t(v({})),e.push("/login")}},O=function(){return{type:"CLEAR_CURRENT_PROFILE"}},S=a(2),D=a(34),C=a(105),A=a(9),M=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},k={isAuthenticated:!1,loadingUser:!1,user:{materials:[]}},w={},j=a(12),Y={corporateClients:[],allUsers:[],disinfectors:[],orders:[],searchOrderMethod:"",searchOrderInput:"",orderById:{disinfectorId:{},clientId:{contracts:[]},userCreated:{},userAcceptedOrder:{},disinfectors:[],prevFailedOrder:{},nextOrdersAfterFailArray:[],nextOrderAfterFail:{}},repeatOrder:{disinfectorId:{},previousOrder:{},userCreated:{}},completeOrdersInMonth:[],compOrderMethod:"",compOrderInput:{month:0,year:0,days:[],day:""},loading:!1,loadingRepeatOrder:!1},I={users:[],chats:[],hasChatWith:[],notHaveChatWith:[],currentChat:{user1:{},user2:{},messages:[]},anons:[],loadingUsers:!1,loadingChats:!1,loadingCurrentChat:!1,loadingAnons:!1},F={sortedOrders:[],completeOrders:[],repeatOrders:[],repeatOrderSearchVars:{method:"",headingDay:"",selectedDays:[]},orderToConfirm:{orderId:{},disinfectorId:{},userCreated:{},userAcceptedOrder:{},clientId:{contracts:[]},disinfectors:[],prevFailedOrder:{},nextOrdersAfterFailArray:[],nextOrderAfterFail:{}},stats:{sortedOrders:[],method:""},loadingSortedOrders:!1,loadingCompleteOrders:!1,loadingStats:!1},x={disinfectors:[],stats:{orders:[],acceptedOrders:[],addedMaterials:[]},method:"",queries:[],matComing:[],matDistrib:[],addMaterialEvents:[],loadingDisinfectors:!1,loadingDisinfStats:!1,loadingEvents:!1},T={orderQueries:[],disinfectors:[],operators:[],sortedOrders:[],clients:[],clientById:{orders:[],contracts:[]},searchClientsMethod:"",searchClientsInput:"",ordersOfClient:[],users:[],userById:{},currentMaterials:{materials:[]},stats:{disinfectorId:"",orders:[],acceptedOrders:[]},method:"",addMatEvents:[],materialComing:[],addMatEventsMethod:"",loadingSortedOrders:!1,loadingOrderQueries:!1,loadingStats:!1,loadingDisinfectors:!1,loadingOperators:!1,loadingAddMatEvents:!1,loadingCurMat:!1,loadingClients:!1,loadingUsers:!1,loadingOrdersOfClient:!1},R={myOrders:[],orderById:{disinfectorId:{},clientId:{contracts:[]},userCreated:{},userAcceptedOrder:{},prevFailedOrder:{},nextOrdersAfterFailArray:[],nextOrderAfterFail:{}},disinfectors:[],sortedOrders:[],completeOrders:[],orderToConfirm:{orderId:{},disinfectorId:{}},stats:{orders:[],completeOrders:[]},method:"",materialComing:[],addMatEvents:[],loadingSortedOrders:!1,loadingCompleteOrders:!1,loadingStats:!1,loading:!1},_={orders:[],queries:[],queryVars:{method:"",orders:[],month:0,year:0,days:[],day:""},queryById:{disinfectorId:{},userCreated:{},clientId:{contracts:[]},userAcceptedOrder:{},disinfectors:[],prevFailedOrder:{},nextOrdersAfterFailArray:[],nextOrderAfterFail:{}},stats:{method:"",orders:[],month:0,year:0,days:[],day:""},loadingQueries:!1,loadingStats:!1},H={failedOrder:{disinfectorId:{},clientId:{contracts:[]},userCreated:{},userAcceptedOrder:{},disinfectors:[],prevFailedOrder:{},nextOrdersAfterFailArray:[],nextOrderAfterFail:{}},fails:[],searchVars:{method:"",month:0,year:0,days:[],day:""},loading:!1},L={theme:localStorage.getItem("proTeamTheme")||"light"},B=Object(D.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(A.a)({},e,{isAuthenticated:!M(t.payload),user:t.payload});case"LOADING_CURRENT_DISINFECTOR":return Object(A.a)({},e,{loadingUser:!0});case"GET_DISINFECTOR_MATERIALS":return Object(A.a)({},e,{user:Object(A.a)({},e.user,{materials:t.payload}),loadingUser:!1});case"SUBADMIN_MATERIALS":return Object(A.a)({},e,{user:Object(A.a)({},e.user,{materials:t.payload.materials})});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return t.payload;default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADING":return Object(A.a)({},e,{loading:!0});case"SET_LOADING_REPEAT_ORDER":return Object(A.a)({},e,{loadingRepeatOrder:!0});case"CORPORATE_CLIENTS":return Object(A.a)({},e,{corporateClients:t.payload});case"GET_ALL_USERS":return Object(A.a)({},e,{allUsers:t.payload,loading:!1});case"GET_DISINFECTORS":return Object(A.a)({},e,{disinfectors:t.payload,loading:!1});case"GET_ALL_ORDERS":return Object(A.a)({},e,{orders:t.payload,loading:!1});case"ADD_ORDER":return Object(A.a)({},e,{orders:[].concat(Object(j.a)(e.orders),[t.payload])});case"GET_ORDER_BY_ID":return Object(A.a)({},e,{orderById:t.payload,loading:!1});case"SEARCH_ORDERS":return Object(A.a)({},e,{orders:t.payload,loading:!1});case"SET_SEARCH_ORDER_METHOD":return Object(A.a)({},e,{searchOrderMethod:t.payload.method,searchOrderInput:t.payload.payload});case"GET_REPEAT_ORDER_FORM":return Object(A.a)({},e,{repeatOrder:t.payload,loadingRepeatOrder:!1});case"GET_COMPLETE_ORDERS_IN_MONTH":return Object(A.a)({},e,{completeOrdersInMonth:t.payload,loading:!1});case"SET_COMP_ORDER_METHOD_INPUT":var a=Object(A.a)({},t.payload);return Object(A.a)({},e,{compOrderMethod:a.type,compOrderInput:Object(A.a)({},e.compOrderInput,{day:"day"===a.type?a.day:"",days:"week"===a.type?a.days:[],month:"month"===a.type?a.month:0,year:"month"===a.type?a.year:0})});default:return e}},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADING_USERS":return Object(A.a)({},e,{loadingUsers:!0});case"SET_LOADING_CHATS":return Object(A.a)({},e,{loadingChats:!0});case"SET_LOADING_CURRENT_CHAT":return Object(A.a)({},e,{loadingCurrentChat:!0});case"SET_LOADING_ANONS":return Object(A.a)({},e,{loadingAnons:!0});case"GET_ALL_USERS":return Object(A.a)({},e,{users:t.payload.data,loadingUsers:!1});case"GET_ALL_CHATS":return Object(A.a)({},e,{chats:t.payload.chats,hasChatWith:t.payload.hasChatWith,notHaveChatWith:t.payload.notHaveChatWith,loadingChats:!1});case"GET_CURRENT_CHAT":return Object(A.a)({},e,{currentChat:t.payload,loadingCurrentChat:!1});case"NEW_CHAT_CREATED":return Object(A.a)({},e,{chats:[].concat(Object(j.a)(e.chats),[t.payload])});case"CREATE_MESSAGE":return Object(A.a)({},e,{currentChat:Object(A.a)({},e.currentChat,{messages:[].concat(Object(j.a)(e.currentChat.messages),[t.payload])})});case"EDIT_MESSAGE":var a=e.currentChat.messages.findIndex(function(e){return e._id.toString()===t.payload.messageId}),n=Object(j.a)(e.currentChat.messages);return n[a]=Object(A.a)({},e.currentChat.messages[a],{body:t.payload.updatedBody}),Object(A.a)({},e,{currentChat:Object(A.a)({},e.currentChat,{messages:n})});case"DELETE_MESSAGE":return Object(A.a)({},e,{currentChat:Object(A.a)({},e.currentChat,{messages:e.currentChat.messages.filter(function(e){return e._id.toString()!==t.payload.messageId})})});case"GET_ANONS":return Object(A.a)({},e,{anons:t.payload,loadingAnons:!1});case"ADD_ANONS":return Object(A.a)({},e,{anons:[].concat(Object(j.a)(e.anons),[t.payload])});default:return e}},disinfector:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_DISINF_STATS":return Object(A.a)({},e,{loadingDisinfStats:!0});case"SET_LOADING_DISINFECTORS":return Object(A.a)({},e,{loadingDisinfectors:!0});case"LOADING_ADD_MATERIAL_EVENTS":return Object(A.a)({},e,{loadingEvents:!0});case"GET_ALL_DISINFECTORS":return Object(A.a)({},e,{disinfectors:t.payload,loadingDisinfectors:!1});case"GET_DISINF_MONTH_STATS":return Object(A.a)({},e,{method:"month",stats:Object(A.a)({},e.stats,{orders:t.payload.orders,acceptedOrders:t.payload.acceptedOrders,addedMaterials:t.payload.addedMaterials}),loadingDisinfStats:!1});case"GET_DISINF_WEEK_STATS":return Object(A.a)({},e,{method:"week",stats:Object(A.a)({},e.stats,{orders:t.payload.orders,acceptedOrders:t.payload.acceptedOrders,addedMaterials:t.payload.addedMaterials}),loadingDisinfStats:!1});case"GET_DISINF_DAY_STATS":return Object(A.a)({},e,{method:"day",stats:Object(A.a)({},e.stats,{orders:t.payload.orders,acceptedOrders:t.payload.acceptedOrders,addedMaterials:t.payload.addedMaterials}),loadingDisinfStats:!1});case"GET_ADD_MATERIAL_EVENTS":return Object(A.a)({},e,{addMaterialEvents:t.payload,loadingEvents:!1});case"DISINF_MAT_COMINGS":return Object(A.a)({},e,{matComing:t.payload,loadingDisinfStats:!1});case"DISINF_MAT_DISTRIBS":return Object(A.a)({},e,{matDistrib:t.payload,loadingDisinfStats:!1});case"GET_RETURNED_QUERIES":return Object(A.a)({},e,{queries:t.payload});case"CLEAR_STATS_DATA_ADMIN":return Object(A.a)({},e,{method:"",stats:Object(A.a)({},e.stats,{disinfectorId:"",orders:[],acceptedOrders:[]})});default:return e}},operator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADING_SORTED_ORDERS":return Object(A.a)({},e,{loadingSortedOrders:!0});case"SET_LOADING_COMPLETE_ORDERS":return Object(A.a)({},e,{loadingCompleteOrders:!0});case"SET_LOADING_OPERATOR_STATS":return Object(A.a)({},e,{loadingStats:!0});case"GET_SORTED_ORDERS":return Object(A.a)({},e,{sortedOrders:t.payload,date:t.date,loadingSortedOrders:!1});case"GET_NOT_COMPLETED_ORDERS":return Object(A.a)({},e,{sortedOrders:t.payload,loadingSortedOrders:!1});case"GET_COMPLETE_ORDERS":return Object(A.a)({},e,{completeOrders:t.payload,loadingCompleteOrders:!1});case"GET_COMPLETE_ORDER_BY_ID":return Object(A.a)({},e,{orderToConfirm:t.payload,loadingCompleteOrders:!1});case"DELETE_QUERY_FROM_STATE":return Object(A.a)({},e,{completeOrders:e.completeOrders.filter(function(e){return e._id!==t.payload})});case"GOT_STATS_FOR_OPERATOR":return Object(A.a)({},e,{stats:Object(A.a)({},e.stats,{sortedOrders:t.payload.sortedOrders,method:t.payload.method}),loadingStats:!1});case"GET_REPEAT_ORDERS":return Object(A.a)({},e,{loadingSortedOrders:!1,repeatOrders:t.payload});case"SET_REPEAT_ORDER_SEARCH_VARS":return Object(A.a)({},e,{repeatOrderSearchVars:Object(A.a)({},e.repeatOrderSearchVars,{method:t.payload.method,headingDay:t.payload.headingDay,selectedDays:t.payload.selectedDays})});default:return e}},admin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_SORTED_ORDERS_ADMIN":return Object(A.a)({},e,{loadingSortedOrders:!0});case"SET_LOADING_ORDER_QUERIES_FOR_ADMIN":return Object(A.a)({},e,{loadingOrderQueries:!0});case"SET_LOADING_ADMIN_STATS":return Object(A.a)({},e,{loadingStats:!0});case"SET_LOADING_DISINFECTORS":return Object(A.a)({},e,{loadingDisinfectors:!0});case"SET_LOADING_OPERATORS":return Object(A.a)({},e,{loadingOperators:!0});case"SET_LOADING_ADD_MATERIAL_EVENTS":return Object(A.a)({},e,{loadingAddMatEvents:!0});case"LOADING_CUR_MAT":return Object(A.a)({},e,{loadingCurMat:!0});case"LOADING_CLIENTS":return Object(A.a)({},e,{loadingClients:!0,searchClientsMethod:""!==t.payload.method?t.payload.method:e.searchClientsMethod,searchClientsInput:""!==t.payload.payload?t.payload.payload:e.searchClientsInput});case"GET_SORTED_ORDERS_ADMIN":return Object(A.a)({},e,{sortedOrders:t.payload,date:t.date,loadingSortedOrders:!1});case"GET_ORDER_QUERIES_FOR_ADMIN":return Object(A.a)({},e,{orderQueries:t.payload,loadingOrderQueries:!1});case"GET_ADMIN_MONTH_STATS":return Object(A.a)({},e,{method:"month",stats:Object(A.a)({},e.stats,{orders:t.payload}),loadingStats:!1});case"GET_ADMIN_WEEK_STATS":return Object(A.a)({},e,{method:"week",stats:Object(A.a)({},e.stats,{orders:t.payload}),loadingStats:!1});case"GET_ADMIN_DAY_STATS":return Object(A.a)({},e,{method:"day",stats:Object(A.a)({},e.stats,{orders:t.payload}),loadingStats:!1});case"DISINF_STATS_MONTH_ADMIN":return Object(A.a)({},e,{method:"month",stats:Object(A.a)({},e.stats,{disinfectorId:t.payload.disinfectorId,orders:t.payload.orders,acceptedOrders:t.payload.acceptedOrders}),loadingStats:!1});case"DISINF_STATS_MONTH_WEEK":return Object(A.a)({},e,{method:"week",stats:Object(A.a)({},e.stats,{disinfectorId:t.payload.disinfectorId,orders:t.payload.orders,acceptedOrders:t.payload.acceptedOrders}),loadingStats:!1});case"DISINF_STATS_DAY_ADMIN":return Object(A.a)({},e,{method:"day",stats:Object(A.a)({},e.stats,{disinfectorId:t.payload.disinfectorId,orders:t.payload.orders,acceptedOrders:t.payload.acceptedOrders}),loadingStats:!1});case"GET_ADV_STATS":return Object(A.a)({},e,{stats:Object(A.a)({},e.stats,{orders:t.payload}),loadingStats:!1});case"GET_OPERATOR_STATS":return Object(A.a)({},e,{method:t.payload.method,stats:Object(A.a)({},e.stats,{orders:t.payload.sortedOrders}),loadingStats:!1});case"GET_ALL_DISINFECTORS_FOR_ADMIN":return Object(A.a)({},e,{disinfectors:t.payload,loadingDisinfectors:!1});case"GET_ALL_OPERATORS_FOR_ADMIN":case"GET_ALL_OPERATORS_AND_ADMINS_FOR_ADMIN":return Object(A.a)({},e,{operators:t.payload,loadingOperators:!1});case"GET_ADD_MAT_EVENTS_MONTH":return Object(A.a)({},e,{addMatEvents:t.payload,addMatEventsMethod:"month",loadingAddMatEvents:!1});case"GET_ADD_MAT_EVENTS_WEEK":return Object(A.a)({},e,{addMatEvents:t.payload,addMatEventsMethod:"week",loadingAddMatEvents:!1});case"ADD_MAT_DISINFECTOR":var a=e.disinfectors.findIndex(function(e){return e._id.toString()===t.payload.disinfector}),n=Object(j.a)(e.disinfectors);return t.payload.materials.forEach(function(e){n[a].materials.forEach(function(t){t.material!==e.material||(t.amount+=Number(e.amount))})}),Object(A.a)({},e,{disinfectors:n});case"GET_CURR_MAT_ADMIN":return Object(A.a)({},e,{loadingCurMat:!1,currentMaterials:t.payload});case"UPDATE_MAT_COMING":return Object(A.a)({},e,{currentMaterials:t.payload});case"MAT_COMING_MONTH":return Object(A.a)({},e,{materialComing:t.payload,addMatEventsMethod:"month",loadingStats:!1});case"MAT_COMING_WEEK":return Object(A.a)({},e,{materialComing:t.payload,addMatEventsMethod:"week",loadingStats:!1});case"SEARCH_CLIENTS":return Object(A.a)({},e,{clients:t.payload,loadingClients:!1});case"CLIENT_BY_ID":return Object(A.a)({},e,{clientById:t.payload,loadingClients:!1});case"SET_ORDERS_OF_CLIENT":return Object(A.a)({},e,{ordersOfClient:t.payload,loadingOrdersOfClient:!1});case"SET_LOADING_CLIENT_ORDERS":return Object(A.a)({},e,{loadingOrdersOfClient:!0});case"GET_ALL_USERS":return Object(A.a)({},e,{users:t.payload,loadingUsers:!1});case"GET_USER_BY_ID":return Object(A.a)({},e,{userById:t.payload});case"CLEAR_STATS_DATA_ADMIN":return Object(A.a)({},e,{method:"",loadingStats:!1,stats:Object(A.a)({},e.stats,{disinfectorId:"",orders:[],acceptedOrders:[]})});case"DELETE_QUERY_FROM_STATE":return Object(A.a)({},e,{orderQueries:e.orderQueries.filter(function(e){return e._id!==t.payload})});case"REMOVE_DISABLED_USER_FROM_DOM":return Object(A.a)({},e,{users:e.users.filter(function(e){return e._id!==t.payload})});case"SET_LOADING":return Object(A.a)({},e,{loadingUsers:!0});default:return e}},subadmin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_SORTED_ORDERS_SUBADMIN":return Object(A.a)({},e,{loadingSortedOrders:!0});case"SUBADMIN_LOADING":case"SET_LOADING":case"SET_LOADING_DISINFECTORS":return Object(A.a)({},e,{loading:!0});case"SUBADMIN_LOADING_STATS":return Object(A.a)({},e,{loadingStats:!0});case"GET_ALL_DISINFECTORS":return Object(A.a)({},e,{disinfectors:t.payload});case"SUBADM_GET_MY_ORDERS":return Object(A.a)({},e,{myOrders:t.payload,loading:!1});case"GET_ORDER_BY_ID":return Object(A.a)({},e,{orderById:t.payload,loading:!1});case"ALL_DISINFECTORS":case"GET_ALL_DISINFECTORS_FOR_ADMIN":return Object(A.a)({},e,{disinfectors:t.payload,loading:!1});case"SUBADMIN_ADDS_MATERIAL":var a=e.disinfectors.findIndex(function(e){return e._id.toString()===t.payload.disinfector}),n=Object(j.a)(e.disinfectors);return t.payload.materials.forEach(function(e){n[a].materials.forEach(function(t){t.material!==e.material||(t.amount+=Number(e.amount))})}),Object(A.a)({},e,{disinfectors:n});case"GET_SORTED_ORDERS_SUBADMIN":return Object(A.a)({},e,{sortedOrders:t.payload,date:t.date,loadingSortedOrders:!1});case"SUBADMIN_MAT_COM_HISTORY":return Object(A.a)({},e,{loadingStats:!1,method:t.payload.method,materialComing:t.payload.events});case"SUBADMIN_MAT_DISTRIB_HISTORY":return Object(A.a)({},e,{loadingStats:!1,method:t.payload.method,addMatEvents:t.payload.events});default:return e}},accountant:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ACC_QUERIES":return Object(A.a)({},e,{queries:t.payload,loadingQueries:!1});case"GET_ACC_QUERY_BY_ID":return Object(A.a)({},e,{queryById:t.payload,loadingQueries:!1});case"GET_ACC_STATS":return Object(A.a)({},e,{stats:Object(A.a)({},e.stats,{orders:t.payload.orders,method:t.payload.method}),loadingStats:!1});case"DELETE_QUERY_FROM_STATE":return Object(A.a)({},e,{queries:e.queries.filter(function(e){return e._id!==t.payload})});case"SET_TIME_PERIOD":var a=Object(A.a)({},t.payload);return Object(A.a)({},e,{queryVars:Object(A.a)({},e.queryVars,{method:a.type,day:"day"===a.type?a.day:"",days:"week"===a.type?a.days:[],month:"month"===a.type?a.month:0,year:"month"===a.type?a.year:0})});case"SEARCH_CONTRACTS":return Object(A.a)({},e,{orders:t.payload,loadingQueries:!1});case"ACC_CLEAR_STATS":return Object(A.a)({},e,{stats:Object(A.a)({},e.stats,{orders:[],method:"",month:0,year:0,days:[],day:""})});case"LOADING_ACC_QUERIES":return Object(A.a)({},e,{loadingQueries:!0});case"SET_LOADING_ACC_STATS":return Object(A.a)({},e,{loadingStats:!0});default:return e}},fail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADING_FAILED_ORDER":return Object(A.a)({},e,{loading:!0});case"SET_FAILED_ORDER":return Object(A.a)({},e,{failedOrder:t.payload,loading:!1});case"SET_FAIL_SEARCH_VARS":var a=Object(A.a)({},t.payload);return Object(A.a)({},e,{searchVars:Object(A.a)({},e.searchVars,{method:a.type,day:"day"===a.type?a.day:"",days:"week"===a.type?a.days:[],month:"month"===a.type?a.month:0,year:"month"===a.type?a.year:0})});case"GET_FAILED_ORDERS":return Object(A.a)({},e,{fails:t.payload,loading:!1});default:return e}},options:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_THEME":return Object(A.a)({},e,{theme:t.payload});default:return e}}}),U=[C.a],G=Object(D.e)(B,{},Object(D.d)(D.a.apply(void 0,U))),q=a(22),Q=Object(S.b)(function(e){return{auth:e.auth}})(function(e){e.component;var t=e.auth,a=Object(q.a)(e,["component","auth"]);return r.a.createElement(p.b,Object.assign({},a,{render:function(e){return!1===t.isAuthenticated?r.a.createElement(p.a,{to:"/login"}):r.a.createElement(p.a,{to:"/".concat(t.user.occupation)})}}))}),W=Object(S.b)(function(e){return{auth:e.auth}})(function(e){var t=e.component,a=e.auth,n=Object(q.a)(e,["component","auth"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return!0===a.isAuthenticated?r.a.createElement(t,e):r.a.createElement(p.a,{to:"/login"})}}))}),P=Object(S.b)(function(e){return{auth:e.auth}})(function(e){var t=e.component,a=e.auth,n=Object(q.a)(e,["component","auth"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return!1===a.isAuthenticated?r.a.createElement(p.a,{to:"/login"}):"admin"===a.user.occupation?r.a.createElement(t,e):r.a.createElement(p.a,{to:"/".concat(a.user.occupation)})}}))}),Z=Object(S.b)(function(e){return{auth:e.auth}})(function(e){var t=e.component,a=e.auth,n=Object(q.a)(e,["component","auth"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return!1===a.isAuthenticated?r.a.createElement(p.a,{to:"/login"}):"subadmin"===a.user.occupation?r.a.createElement(t,e):r.a.createElement(p.a,{to:"/".concat(a.user.occupation)})}}))}),X=Object(S.b)(function(e){return{auth:e.auth}})(function(e){var t=e.component,a=e.auth,n=Object(q.a)(e,["component","auth"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return!1===a.isAuthenticated?r.a.createElement(p.a,{to:"/login"}):"operator"===a.user.occupation||"subadmin"===a.user.occupation||"admin"===a.user.occupation?r.a.createElement(t,e):r.a.createElement(p.a,{to:"/".concat(a.user.occupation)})}}))}),K=Object(S.b)(function(e){return{auth:e.auth}})(function(e){var t=e.component,a=e.auth,n=Object(q.a)(e,["component","auth"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return!1===a.isAuthenticated?r.a.createElement(p.a,{to:"/login"}):"accountant"===a.user.occupation?r.a.createElement(t,e):r.a.createElement(p.a,{to:"/".concat(a.user.occupation)})}}))}),V=Object(S.b)(function(e){return{auth:e.auth}})(function(e){var t=e.component,a=e.auth,n=Object(q.a)(e,["component","auth"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return!1===a.isAuthenticated?r.a.createElement(p.a,{to:"/login"}):"disinfector"===a.user.occupation?r.a.createElement(t,e):r.a.createElement(p.a,{to:"/".concat(a.user.occupation)})}}))}),J=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onLogoutClick=function(e){e.preventDefault(),a.props.clearCurrentProfile(),a.props.logoutUser(a.props.history)},a.changeTheme=function(e){a.props.setTheme(e)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.auth,a=t.isAuthenticated,n=t.user,l=r.a.createElement("div",{className:"authLinks"},r.a.createElement("li",{className:"nav-item list-inline-item"},r.a.createElement(u.b,{to:"/login",onClick:this.onLogoutClick,className:"nav-link logout"},r.a.createElement("i",{className:"fas fa-sign-out-alt"})," Logout"))),c=r.a.createElement("div",{className:"guestLinks"},r.a.createElement("li",{className:"nav-item list-inline-item"},r.a.createElement(u.b,{className:"nav-link",to:"/login"},"Login"))),s=r.a.createElement("div",{className:"disinfectorLinks"},r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{type:"button",className:"btn btn-primary dropdown-toggle align-baseline mr-2","data-toggle":"dropdown"},"\u0424\u0443\u043d\u043a\u0446\u0438\u0438"),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/disinfector/stats"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/disinfector/queries"},"\u0417\u0430\u043f\u0440\u043e\u0441\u044b")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/returned-queries"},"\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0435\u043d\u043d\u044b\u0435 \u0417\u0430\u043f\u0440\u043e\u0441\u044b")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/fail/see"},"\u041d\u0435\u043a\u0430\u0447. \u0438 \u041f\u043e\u0432\u0442. \u0417\u0430\u043a\u0430\u0437\u044b")))),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{type:"button",className:"btn btn-primary dropdown-toggle align-baseline mr-2","data-toggle":"dropdown"},"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b"),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/disinfector/distrib-materials"},"\u0420\u0430\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/disinfector/mat-com-history"},"\u0412\u0430\u0448\u0438 \u043f\u0440\u0438\u0445\u043e\u0434\u044b")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/disinfector/mat-distrib-history"},"\u0412\u0430\u0448\u0438 \u0440\u0430\u0437\u0434\u0430\u0447\u0438"))))),o=r.a.createElement("div",{className:"operatorLinks"},r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{type:"button",className:"btn btn-primary dropdown-toggle align-baseline mr-2","data-toggle":"dropdown"},"\u0421\u0442\u0430\u0442."),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/operator/stats"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/fail/see"},"\u041d\u0435\u043a\u0430\u0447. \u0438 \u041f\u043e\u0432\u0442. \u0417\u0430\u043a\u0430\u0437\u044b")))),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{type:"button",className:"btn btn-primary dropdown-toggle align-baseline mr-2","data-toggle":"dropdown"},"\u0424\u0443\u043d\u043a\u0446\u0438\u0438"),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/operator/order-queries"},"\u0417\u0430\u043f\u0440\u043e\u0441\u044b")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/clients"},"\u041a\u043b\u0438\u0435\u043d\u0442\u044b")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/operator/repeat-orders"},"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u043f\u0440\u043e\u0434\u0430\u0436\u0438")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/not-completed-orders"},"\u041d\u0435\u0432\u044b\u043f. \u0417\u0430\u043a\u0430\u0437\u044b")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/search-orders"},"\u041f\u043e\u0438\u0441\u043a \u0437\u0430\u043a\u0430\u0437\u043e\u0432")))),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{type:"button",className:"btn btn-primary dropdown-toggle align-baseline mr-2","data-toggle":"dropdown"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/create-order"},"\u0417\u0430\u043a\u0430\u0437")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/add-client"},"\u041a\u043b\u0438\u0435\u043d\u0442\u0430"))))),i=r.a.createElement("div",{className:"accountantLinks"},r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{type:"button",className:"btn btn-primary dropdown-toggle align-baseline mr-2","data-toggle":"dropdown"},"\u0421\u0442\u0430\u0442."),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/accountant/stats"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430")))),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{type:"button",className:"btn btn-primary dropdown-toggle align-baseline mr-2","data-toggle":"dropdown"},"\u0424\u0443\u043d\u043a\u0446\u0438\u0438"),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/accountant/queries"},"\u0417\u0430\u043f\u0440\u043e\u0441\u044b")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/clients"},"\u041a\u043b\u0438\u0435\u043d\u0442\u044b")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/search-orders"},"\u041f\u043e\u0438\u0441\u043a \u0437\u0430\u043a\u0430\u0437\u043e\u0432")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/fail/see"},"\u041d\u0435\u043a\u0430\u0447. \u0438 \u041f\u043e\u0432\u0442. \u0417\u0430\u043a\u0430\u0437\u044b"))))),m=r.a.createElement("div",{className:"subadminLinks"},r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{type:"button",className:"btn btn-primary dropdown-toggle align-baseline mr-2","data-toggle":"dropdown"},"\u0421\u0442\u0430\u0442."),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/subadmin/stats"},"\u0412\u0430\u0448\u0430 \u0421\u0442\u0430\u0442.")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/admin/stats"},"\u041e\u0431\u0449\u0430\u044f \u0421\u0442\u0430\u0442.")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/admin/disinf-stats"},"\u0421\u0442\u0430\u0442. \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u043e\u0432")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/admin/operator-stats"},"\u0421\u0442\u0430\u0442. \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430 / \u0410\u0434\u043c\u0438\u043d\u0430")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/admin/adv-stats"},"\u0421\u0442\u0430\u0442. \u0420\u0435\u043a\u043b\u0430\u043c\u044b")))),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{type:"button",className:"btn btn-primary dropdown-toggle align-baseline mr-2","data-toggle":"dropdown"},"\u0424\u0443\u043d\u043a\u0446\u0438\u0438"),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/subadmin/orders"},"\u0412\u0430\u0448\u0438 \u0417\u0430\u043a\u0430\u0437\u044b")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/subadmin/queries"},"\u0417\u0430\u043f\u0440\u043e\u0441\u044b")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/returned-queries"},"\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0435\u043d\u043d\u044b\u0435 \u0417\u0430\u043f\u0440\u043e\u0441\u044b")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/search-orders"},"\u041f\u043e\u0438\u0441\u043a \u0437\u0430\u043a\u0430\u0437\u043e\u0432")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/clients"},"\u041a\u043b\u0438\u0435\u043d\u0442\u044b")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/fail/see"},"\u041d\u0435\u043a\u0430\u0447. \u0438 \u041f\u043e\u0432\u0442. \u0417\u0430\u043a\u0430\u0437\u044b")))),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{type:"button",className:"btn btn-primary dropdown-toggle align-baseline mr-2","data-toggle":"dropdown"},"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b"),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/subadmin/material-coming-history"},"\u041f\u0440\u0438\u0445\u043e\u0434\u044b")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/subadmin/material-distrib-history"},"\u0420\u0430\u0437\u0434\u0430\u0447\u0438")))),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{type:"button",className:"btn btn-primary dropdown-toggle align-baseline mr-2","data-toggle":"dropdown"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/subadmin/materials"},"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0443")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/add-client"},"\u041a\u043b\u0438\u0435\u043d\u0442\u0430"))))),d=r.a.createElement("div",{className:"adminLinks"},r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{type:"button",className:"btn btn-primary dropdown-toggle align-baseline mr-2","data-toggle":"dropdown"},"\u0421\u0442\u0430\u0442."),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/admin/stats"},"\u041e\u0431\u0449\u0430\u044f \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/admin/disinf-stats"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u043e\u0432")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/admin/operator-stats"},"\u0421\u0442\u0430\u0442. \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430 / \u0410\u0434\u043c\u0438\u043d\u0430")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/admin/adv-stats"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0420\u0435\u043a\u043b\u0430\u043c\u044b")))),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{type:"button",className:"btn btn-primary dropdown-toggle align-baseline mr-2","data-toggle":"dropdown"},"\u0424\u0443\u043d\u043a\u0446\u0438\u0438"),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/clients"},"\u041a\u043b\u0438\u0435\u043d\u0442\u044b")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/fail/see"},"\u041d\u0435\u043a\u0430\u0447. \u0438 \u041f\u043e\u0432\u0442. \u0417\u0430\u043a\u0430\u0437\u044b")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/not-completed-orders"},"\u041d\u0435\u0432\u044b\u043f. \u0417\u0430\u043a\u0430\u0437\u044b")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/search-orders"},"\u041f\u043e\u0438\u0441\u043a \u0437\u0430\u043a\u0430\u0437\u043e\u0432")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/admin/users"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438")))),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{type:"button",className:"btn btn-primary dropdown-toggle align-baseline mr-2","data-toggle":"dropdown"},"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b"),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/admin/material-coming-history"},"\u041f\u0440\u0438\u0445\u043e\u0434\u044b")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/admin/material-history"},"\u0420\u0430\u0437\u0434\u0430\u0447\u0438")))),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{type:"button",className:"btn btn-primary dropdown-toggle align-baseline mr-2","data-toggle":"dropdown"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/admin/material-coming"},"\u041f\u0440\u0438\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/admin/materials"},"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/add-client"},"\u041a\u043b\u0438\u0435\u043d\u0442\u0430")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/register"},"\u041d\u043e\u0432\u044b\u0439 \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c")))));return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary pt-0 pb-0",id:"navbar"},r.a.createElement("div",{className:"container pt-2 pb-2 pl-0 pr-0"},r.a.createElement(u.b,{to:"/".concat(n.occupation),className:"navbar-brand p-2"},"ProDez"),"light"===this.props.options.theme?r.a.createElement("button",{className:"navbar-brand",onClick:function(){return e.changeTheme("dark")}},r.a.createElement("i",{className:"fas fa-moon"})):r.a.createElement("button",{className:"navbar-brand",onClick:function(){return e.changeTheme("light")}},r.a.createElement("i",{className:"fas fa-sun"})),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarCollapse"},r.a.createElement("img",{src:"../img/hamburger.svg",className:"hamburger",alt:"Hamburger"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarCollapse"},r.a.createElement("ul",{className:"navbar-nav ml-auto list-inline"},"admin"===n.occupation?d:"","subadmin"===n.occupation?m:"","accountant"===n.occupation?i:"","operator"===n.occupation?o:"","disinfector"===n.occupation?s:"",a?l:c))))}}]),t}(n.Component),z=Object(S.b)(function(e){return{auth:e.auth,options:e.options}},{logoutUser:N,clearCurrentProfile:O,setTheme:function(e){return function(t){localStorage.setItem("proTeamTheme",e),t({type:"SET_THEME",payload:e})}}})(Object(p.g)(J)),$=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).goBack=function(){a.props.history.goBack()},a.scrollTop=function(){window.scrollTo({top:0,behavior:"smooth"})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"footer bg-light"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 col-sm-7 col-6 p-0"},r.a.createElement("button",{className:"btn btn-primary btn-block",onClick:this.goBack},r.a.createElement("i",{className:"fas fa-arrow-circle-left"})," \u041d\u0430\u0437\u0430\u0434")),r.a.createElement("div",{className:"col-md-4 col-sm-5 col-6 p-0"},r.a.createElement("button",{className:"btn btn-warning btn-block ml-2",onClick:this.scrollTop},r.a.createElement("i",{className:"fas fa-arrow-circle-up"})," \u041d\u0430\u0432\u0435\u0440\u0445"))))}}]),t}(n.Component),ee=Object(S.b)(function(e){return{auth:e.auth}},{})(Object(p.g)($)),te=a(40),ae=a.n(te),ne=a(1),re=a.n(ne),le=a(107),ce=a.n(le),se=a(108),oe=a.n(se),ie=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"spinner"},"dark"===this.props.options.theme?r.a.createElement("img",{src:oe.a,alt:"Loading...",className:"mt-4",style:{width:"100px",margin:"auto",display:"block"}}):r.a.createElement("img",{src:ce.a,alt:"Loading...",style:{width:"220px",margin:"auto",display:"block"}}))}}]),t}(n.Component),me=Object(S.b)(function(e){return{auth:e.auth,options:e.options,errors:e.errors}})(Object(p.g)(ie)),de=a(41),ue=function(e){return function(t){t(Ne()),g.a.post("/admin/get-sorted-orders",{date:e}).then(function(a){return t({type:"GET_SORTED_ORDERS_ADMIN",payload:a.data,date:e})}).catch(function(e){return t({type:y,payload:e})})}},pe=function(){return function(e){e(Oe()),g.a.post("/admin/get-order-queries-for-admin").then(function(t){return e({type:"GET_ORDER_QUERIES_FOR_ADMIN",payload:t.data})}).catch(function(t){return e({type:y,payload:t})})}},he=function(e,t){return function(a){a(ye(e.orderId)),g.a.post("/admin/admin-confirms-order-query",{object:e}).then(function(){return t.push("/admin/order-queries")}).catch(function(e){return a({type:y,payload:e})})}},Ee=function(){return function(e){e(De());g.a.post("/get-users",{object:{method:"role",roles:["disinfector","subadmin"]}}).then(function(t){return e({type:"GET_ALL_DISINFECTORS_FOR_ADMIN",payload:t.data})}).catch(function(t){return e({type:y,payload:t})})}},fe=function(){return function(e){e(Me()),g.a.post("/admin/get-current-materials").then(function(t){return e({type:"GET_CURR_MAT_ADMIN",payload:t.data})}).catch(function(t){return e({type:y,payload:t})})}},ge=function(e){return function(t){t(ke({})),g.a.post("/admin/client-by-id",{id:e}).then(function(e){return t({type:"CLIENT_BY_ID",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}},be=function(e){return function(t){g.a.post("/get-user-by-id",{userId:e}).then(function(e){return t({type:"GET_USER_BY_ID",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}},ye=function(e){return{type:"DELETE_QUERY_FROM_STATE",payload:e}},ve=function(){return function(e){return e({type:"CLEAR_STATS_DATA_ADMIN",payload:{}})}},Ne=function(){return{type:"LOADING_SORTED_ORDERS_ADMIN"}},Oe=function(){return{type:"SET_LOADING_ORDER_QUERIES_FOR_ADMIN"}},Se=function(){return{type:"SET_LOADING_ADMIN_STATS"}},De=function(){return{type:"SET_LOADING_DISINFECTORS"}},Ce=function(){return{type:"SET_LOADING_OPERATORS"}},Ae=function(){return{type:"SET_LOADING_ADD_MATERIAL_EVENTS"}},Me=function(){return{type:"LOADING_CUR_MAT"}},ke=function(e){return e.method||(e.method=""),e.payload||(e.payload=""),{type:"LOADING_CLIENTS",payload:e}},we=function(){return function(e){g.a.post("/order/get-corporate-clients").then(function(t){return e({type:"CORPORATE_CLIENTS",payload:t.data})}).catch(function(t){return e({type:y,payload:t})})}},je=function(){return function(e){e(Re());g.a.post("/get-users",{object:{method:"all",roles:[]}}).then(function(t){return e({type:"GET_ALL_USERS",payload:t.data})}).catch(function(t){return e({type:y,payload:t})})}},Ye=function(e,t,a){return function(n){g.a.post("/order/delete-order",{object:e}).then(function(e){return t.push("/".concat(a))}).catch(function(e){return n({type:y,payload:e.response.data})})}},Ie=function(e){return function(t){t(Re()),g.a.post("/order/get-my-orders",{userId:e}).then(function(e){return t({type:"GET_ALL_ORDERS",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}},Fe=function(e,t,a){return function(n){g.a.post("/order/addDisinfectorComment",e).then(function(e){return t.push("/".concat(a))}).catch(function(e){return n({type:y,payload:e})})}},xe=function(e){return function(t){t(Re()),g.a.post("/order/get-order-by-id",{id:e}).then(function(e){return t({type:"GET_ORDER_BY_ID",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}},Te=function(e){return{type:"SET_SEARCH_ORDER_METHOD",payload:e}},Re=function(){return{type:"SET_LOADING"}},_e=function(){return{type:"SET_LOADING_REPEAT_ORDER"}},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.completed&&e.operatorDecided&&(e.accountantDecided||e.adminDecided)},Le=a(20),Be=a.n(Le),Ue=a(21),Ge=a.n(Ue),qe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r))))._isMounted=!1,a.state={date:new Date,sortedOrders:a.props.admin.sortedOrders},a.addOrderToDOM=function(e){a._isMounted&&a.setState(function(t){var a=Object(j.a)(t.sortedOrders);return a.push(e),{sortedOrders:a}})},a.editOrderOnDOM=function(e){if(a._isMounted){for(var t=Object(j.a)(a.state.sortedOrders),n=0;n<t.length;n++)t[n]._id.toString()===e._id.toString()&&(t[n].disinfectorId=e.disinfectorId,t[n].userCreated=e.userCreated,t[n].userAcceptedOrder=e.userAcceptedOrder,t[n].clientType=e.clientType,t[n].client=e.client,t[n].clientId=e.clientId,t[n].address=e.address,t[n].dateFrom=e.dateFrom,t[n].phone=e.phone,t[n].typeOfService=e.typeOfService,t[n].advertising=e.advertising,t[n].comment=e.comment);a.setState({sortedOrders:t})}},a.removeOrderFromDOM=function(e){if(a._isMounted){var t=Object(j.a)(a.state.sortedOrders);t=t.filter(function(t){return t._id.toString()!==e}),a.setState({sortedOrders:t})}},a.onClick=function(e,t){var n,r,l;n=new Date(t).getMonth()<9?"0".concat(new Date(t).getMonth()+1):"".concat(new Date(t).getMonth()+1),r=new Date(t).getDate()<10?"0".concat(new Date(t).getDate()):new Date(t).getDate();var c="".concat(new Date(t).getFullYear(),"-").concat(n,"-").concat(r);l=e<10?"0".concat(e,":00"):"".concat(e,":00"),a.props.history.push("/create-order",{pathname:"/create-order",state:{hour:l,date:c}})},a.deleteOrder=function(e,t,n,r,l){var c={id:e,clientType:t,clientPhone:n,clientId:r,orderDateFrom:l};a.props.deleteOrder(c,a.props.history,a.props.auth.user.occupation),window.location.reload()},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t=Be()(Ge.a);t.on("createOrder",function(t){new Date(t.order.dateFrom).getDate()===new Date(e.props.date).getDate()&&new Date(t.order.dateFrom).getMonth()===new Date(e.props.date).getMonth()&&new Date(t.order.dateFrom).getFullYear()===new Date(e.props.date).getFullYear()&&e.addOrderToDOM(t.order)}),t.on("editOrder",function(t){e.editOrderOnDOM(t.order)}),t.on("deleteOrder",function(t){new Date(t.orderDateFrom).getDate()===new Date(e.props.date).getDate()&&new Date(t.orderDateFrom).getMonth()===new Date(e.props.date).getMonth()&&new Date(t.orderDateFrom).getFullYear()===new Date(e.props.date).getFullYear()&&e.removeOrderFromDOM(t.id)})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){for(var e=this,t=[],a=0;a<=23;a++)t.push({hour:a,elements:[]});this.state.sortedOrders.forEach(function(e){t[new Date(e.dateFrom).getHours()].elements.push(e)});var n;return t.map(function(t,a){return n=t.elements.map(function(t,a){return r.a.createElement("div",{className:"col-md-".concat(6," pr-0"),key:a},r.a.createElement("div",{className:"card mt-2 mr-2 order order-bg-".concat(t.disinfectorId.color)},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},t.prevFailedOrder&&r.a.createElement("h3",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"})),t.failed&&r.a.createElement("h3",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"})),"corporate"===t.clientType?r.a.createElement(r.a.Fragment,null,t.clientId?r.a.createElement("li",null,"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043a\u043b\u0438\u0435\u043d\u0442: ",t.clientId.name):r.a.createElement("li",null,"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043a\u043b\u0438\u0435\u043d\u0442")):"","individual"===t.clientType?r.a.createElement("li",null,"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",t.client):"",r.a.createElement("li",null,"\u0422\u0435\u043b \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",t.phone),r.a.createElement("li",null,"\u0410\u0434\u0440\u0435\u0441: ",t.address),r.a.createElement("li",null,"\u0422\u0438\u043f \u0417\u0430\u043a\u0430\u0437\u0430: ",t.typeOfService)),r.a.createElement(u.b,{to:He(t)?"/order-full-details/".concat(t._id):"/order-details/".concat(t._id),className:"btn btn-primary mr-1 mt-2"},r.a.createElement("i",{className:"fas fa-info"})," \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"),r.a.createElement(u.b,{to:"/edit-order/".concat(t._id),className:"btn btn-warning mr-1 mt-2"},r.a.createElement("i",{className:"fas fa-edit"})," \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),r.a.createElement("button",{className:"btn btn-danger mt-2",onClick:function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?")&&("corporate"===t.clientType?e.deleteOrder(t._id,t.clientType,t.phone,t.clientId._id,t.dateFrom):"individual"===t.clientType&&e.deleteOrder(t._id,t.clientType,t.phone,"",t.dateFrom))}},r.a.createElement("i",{className:"fas fa-trash-alt"})," \u0423\u0434\u0430\u043b\u0438\u0442\u044c"))))}),r.a.createElement("div",{className:"hours",key:a},r.a.createElement("div",{className:"help row mt-3",id:"hour-".concat(t.hour)},r.a.createElement("button",{to:"/create-order",className:"btn btn-success mr-3",onClick:e.onClick.bind(e,t.hour,e.props.admin.date)},r.a.createElement("i",{className:"fas fa-plus"})),r.a.createElement("h1",{className:"d-inline mb-0"},"".concat(t.hour,":00"))),r.a.createElement("div",{className:"row"},n.length>0?n:""))})}}]),t}(n.Component),Qe=Object(S.b)(function(e){return{auth:e.auth,order:e.order,admin:e.admin,errors:e.errors}},{getSortedOrders:ue,deleteOrder:Ye})(Object(p.g)(qe)),We=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={date:new Date},a.onChange=function(e){a.props.admin.loadingSortedOrders||(a.setState({date:e}),a.props.getSortedOrders(e))},a.onSwiped=function(e){var t=new Date(a.state.date);"LEFT"===e?(t.setTime(t.getTime()+864e5),a.setState({date:t})):"RIGHT"===e&&(t.setTime(t.getTime()-864e5),a.setState({date:t})),a.props.getSortedOrders(a.state.date)},a.today=function(){var e=new Date;a.props.admin.loadingSortedOrders||(a.setState({date:e}),a.props.getSortedOrders(e))},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getSortedOrders(this.state.date)}},{key:"render",value:function(){var e=this,t=this.props.admin.loadingSortedOrders;return r.a.createElement("div",{className:"container-fluid mt-1"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center"},"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0410\u0434\u043c\u0438\u043d\u0430 ",this.props.auth.user.name))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-3 mt-4 calendar"},r.a.createElement("div",{className:"sticky-top"},r.a.createElement(ae.a,{className:"react-calendar",onChange:this.onChange,value:this.state.date}),r.a.createElement("button",{className:"btn btn-dark mt-3",onClick:function(){return e.today()}},r.a.createElement("i",{className:"fas fa-calendar-day"})," \u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0421\u0435\u0433\u043e\u0434\u043d\u044f"))),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("h2",{className:"text-center"},"\u0417\u0430\u044f\u0432\u043a\u0438 \u043d\u0430 ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.date)),t?r.a.createElement(me,null):r.a.createElement(de.a,{trackMouse:!0,preventDefaultTouchmoveEvent:!0,onSwipedLeft:function(){return e.onSwiped("LEFT")},onSwipedRight:function(){return e.onSwiped("RIGHT")},delta:120},r.a.createElement(Qe,{date:this.state.date})))))}}]),t}(n.Component),Pe=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,errors:e.errors}},{getSortedOrders:ue})(Object(p.g)(We)),Ze=a(11),Xe=a(15),Ke=a.n(Xe),Ve=function(){var e=[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043c\u0435\u0441\u044f\u0446 -- ",value:""}];Ke.a.forEach(function(t,a){e.push({label:t,value:a})});for(var t=[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0413\u043e\u0434 -- ",value:""}],a=2019;a<=(new Date).getFullYear();a++)t.push({label:a,value:a});return{monthLabels:e,yearLabels:t}},Je=function(e){var t=new Date,a=t.getMonth(),n=t.getFullYear();return"previous"===e&&(0===a?(a=11,n-=1):a-=1),{month:a,year:n}},ze=function(e){var t=Object(j.a)(e);return t=t.filter(function(e){return e.amount>0})},$e=function(e){var t=(e.totalScore/e.totalOrders).toFixed(2),a=5*e.failedOrders;return e.failedOrders>20?0:t*(1-a/100).toFixed(2)},et=function(e){var t={totalSum:0,totalScore:0,totalOrders:e.length,completed:0,confirmedOrders:[],rejected:0,totalSumForDisinfector:0,consultAndOsmotrConfirmed:0,failed:0,povtors:0,corporate:0,corporatePercent:0,corpSum:0,corpSumPercent:0,indiv:0,indivPercent:0,indivSum:0,indivSumPercent:0};return e.forEach(function(e){e.hasOwnProperty("prevFailedOrder")&&t.povtors++,e.completed&&(t.completed++,e.failed||e.hasOwnProperty("prevFailedOrder")||!e.operatorConfirmed||!e.accountantConfirmed&&!e.adminConfirmed||(t.confirmedOrders.push(e),t.totalSum+=e.cost,t.totalScore+=e.score,e.disinfectors&&e.disinfectors.length>0&&(t.totalSumForDisinfector=t.totalSumForDisinfector+e.cost/e.disinfectors.length),"corporate"===e.clientType?(t.corporate++,t.corpSum+=e.cost):"individual"===e.clientType&&(t.indiv++,t.indivSum+=e.cost),(e.typeOfService.includes("\u041a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u044f")||e.typeOfService.includes("\u041e\u0441\u043c\u043e\u0442\u0440")||e.typeOfService.includes("\u041e\u0441\u043c\u043e\u0442\u0440 \u0438 \u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u0438"))&&t.consultAndOsmotrConfirmed++),(e.operatorDecided&&!e.operatorConfirmed||e.accountantDecided&&!e.accountantConfirmed||e.adminDecided&&!e.adminConfirmed)&&t.rejected++,e.failed&&t.failed++)}),t.corporatePercent=(100*t.corporate/t.confirmedOrders.length).toFixed(1),t.indivPercent=(100*t.indiv/t.confirmedOrders.length).toFixed(1),t.corpSumPercent=(100*t.corpSum/t.totalSum).toFixed(1),t.indivSumPercent=(100*t.indivSum/t.totalSum).toFixed(1),t},tt=a(14),at=a.n(tt),nt=function(e){var t=[];return at.a.forEach(function(e){var a={material:e.material,amount:0,unit:e.unit};t.push(a)}),e.forEach(function(e){e.completed&&e.disinfectors&&e.disinfectors.forEach(function(e){e.consumption.forEach(function(e){t.forEach(function(t){e.material===t.material&&e.unit===t.unit&&(t.amount+=e.amount)})})})}),t},rt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={orders:a.props.admin.stats.orders,showOrders:!1},a.toggleShowOrders=function(e){a.setState({showOrders:e})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=et(this.state.orders),t=e.totalSum,a=e.totalScore,n=e.totalOrders,l=e.completed,c=e.confirmedOrders,s=e.rejected,o=e.consultAndOsmotrConfirmed,i=e.failed,m=e.povtors,d=e.corporate,u=e.corporatePercent,p=e.corpSum,h=e.corpSumPercent,E=e.indiv,f=e.indivPercent,g=e.indivSum,b=e.indivSumPercent,y=this.state.orders.filter(function(e){return e.completed&&!e.failed&&!e.hasOwnProperty("prevFailedOrder")}),v=nt(y),N=$e({totalScore:a,totalOrders:c.length,failedOrders:i})||0,O=(v=ze(v)).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)}),S=this.state.orders.map(function(e,t){var a=[];e.disinfectors.forEach(function(e){a.push({user:e.user,consumption:e.consumption})});var n=a.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("p",{className:"mb-0"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c: ",e.user.occupation," ",e.user.name),e.consumption.map(function(e,t){return r.a.createElement("p",{key:t,className:"mb-0"},e.material,": ",e.amount.toLocaleString()," ",e.unit)}))});return r.a.createElement("div",{className:"col-lg-4 col-md-6",key:t},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},e.prevFailedOrder&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),e.failed&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),e.disinfectorId&&r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439: ",e.disinfectorId.occupation," ",e.disinfectorId.name),!e.completed&&r.a.createElement("li",null,"\u0417\u0430\u043a\u0430\u0437 \u0435\u0449\u0435 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d"),e.operatorDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.operatorConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.operatorCheckedAt),")"),r.a.createElement("li",null,"\u0411\u0430\u043b\u043b (0-5): ",e.score)):r.a.createElement("li",{className:"text-danger"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.operatorCheckedAt),")")):r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.accountantDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.accountantConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.accountantCheckedAt),")"),r.a.createElement("li",null,"\u0421\u0447\u0435\u0442-\u0424\u0430\u043a\u0442\u0443\u0440\u0430: ",e.invoice?e.invoice:"--"),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement("li",{className:"text-danger"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.accountantCheckedAt),")")):r.a.createElement(r.a.Fragment,null,e.adminDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0410\u0434\u043c\u0438\u043d \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.adminConfirmed?r.a.createElement("li",{className:"text-success"},"\u0410\u0434\u043c\u0438\u043d \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.adminCheckedAt),")"):r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u043c\u0438\u043d \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.adminCheckedAt),")")):r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443")),"corporate"===e.clientType?r.a.createElement(r.a.Fragment,null,e.clientId?r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.clientId.name):r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442"),r.a.createElement("li",{className:"text-danger"},"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.client)):"","individual"===e.clientType?r.a.createElement("li",{className:"text-danger"},"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.client):"",r.a.createElement("li",{className:"text-danger"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d: ",e.phone),e.phone2&&""!==e.phone2?r.a.createElement("li",{className:"text-danger"},"\u0417\u0430\u043f\u0430\u0441\u043d\u043e\u0439 \u043d\u043e\u043c\u0435\u0440: ",e.phone2):"",e.completed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-danger"},"\u0414\u0430\u0442\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},e.dateFrom)),r.a.createElement("li",{className:"text-danger"},"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: \u0421 ",r.a.createElement(re.a,{format:"HH:mm"},e.dateFrom)," \u041f\u041e ",r.a.createElement(re.a,{format:"HH:mm"},e.completedAt))):r.a.createElement("li",{className:"text-danger"},"\u0414\u0430\u0442\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.dateFrom)),r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u0440\u0435\u0441: ",e.address),r.a.createElement("li",{className:"text-danger"},"\u0422\u0438\u043f \u0443\u0441\u043b\u0443\u0433\u0438: ",e.typeOfService),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430: ",e.comment?e.comment:"--"),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430: ",e.disinfectorComment?e.disinfectorComment:"--"),e.completed&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0421\u0440\u043e\u043a \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0438 (\u0432 \u043c\u0435\u0441\u044f\u0446\u0430\u0445): ",e.guarantee),r.a.createElement("li",null,"\u0420\u0430\u0441\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 (\u0437\u0430\u043a\u0430\u0437 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u043b\u0438 ",e.disinfectors.length," \u0447\u0435\u043b):"),r.a.createElement("ul",{className:"font-bold mb-0"},n),"corporate"===e.clientType?r.a.createElement(r.a.Fragment,null,"cash"===e.paymentMethod?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u041d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u0411\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),r.a.createElement("li",null,"\u041d\u043e\u043c\u0435\u0440 \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430: ",e.contractNumber))):""),e.completed&&"individual"===e.clientType&&e.cost?r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)"):""))))});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h4",{className:"text-center"},"\u0417\u0430\u043a\u0430\u0437\u044b"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("li",null,"\u0412\u0441\u0435\u0433\u043e \u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043e \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",n),r.a.createElement("li",null,"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",l),r.a.createElement("li",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043e \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",c.length," (\u0438\u0437 \u043d\u0438\u0445 \u041a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u0438 \u0438 \u041e\u0441\u043c\u043e\u0442\u0440\u044b: ",o,")"),r.a.createElement("li",{className:"pt-2"},"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",t.toLocaleString()," UZS"),r.a.createElement("li",{className:"pb-2"},"\u0421\u0440\u0435\u0434\u043d\u0438\u0439 \u0431\u0430\u043b\u043b: ",N.toFixed(2)," (\u0438\u0437 5)"),r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0440\u0433\u043d\u0443\u0442\u043e \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",s),r.a.createElement("li",null,"\u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",i),r.a.createElement("li",null,"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",m),r.a.createElement("h6",{className:"mt-2"},"* \u043d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b \u043d\u0435 \u0432\u0445\u043e\u0434\u044f\u0442 \u0432 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b \u0438 \u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443"))))),r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("h4",{className:"text-center"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u044b"),r.a.createElement("li",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",d," (",u," %)"),r.a.createElement("li",null,"\u041d\u0430 \u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443: ",p.toLocaleString()," UZS  (",h," %)"),r.a.createElement("h4",{className:"text-center"},"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u044b"),r.a.createElement("li",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",E," (",f," %)"),r.a.createElement("li",null,"\u041d\u0430 \u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443: ",g.toLocaleString()," UZS (",b," %)"))))),r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h4",{className:"text-center"},"\u041e\u0431\u0449\u0438\u0439 \u0420\u0430\u0441\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432:"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},O,r.a.createElement("h6",{className:"mt-2"},"* \u0441\u044e\u0434\u0430 \u043d\u0435 \u0432\u0445\u043e\u0434\u044f\u0442 \u043d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b")))))),this.state.showOrders?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{className:"btn btn-dark",onClick:this.toggleShowOrders.bind(this,!1)},r.a.createElement("i",{className:"fas fa-eye-slash"})," \u0421\u043a\u0440\u044b\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u044b"))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0412\u0441\u0435 \u0417\u0430\u043a\u0430\u0437\u044b")),this.state.orders.length>0?S:r.a.createElement("h2",null,"\u041d\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"))):r.a.createElement("button",{className:"btn btn-dark mt-2",onClick:this.toggleShowOrders.bind(this,!0)},r.a.createElement("i",{className:"fas fa-eye"})," \u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u044b"))}}]),t}(n.Component),lt=Object(S.b)(function(e){return{auth:e.auth,order:e.order,admin:e.admin,errors:e.errors}})(Object(p.g)(rt)),ct=a(30),st=a.n(ct),ot=function(e){for(var t=[],a=1;a<8;a+=1)t.push(st()(e).add(a,"days").toDate());return t},it=function(e){return{from:st()(e).startOf("week").toDate(),to:st()(e).endOf("week").toDate()}},mt=a(16),dt=a.n(mt),ut=(a(19),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={month:"",year:"",day:"",headingMonth:"",headingYear:"",headingDay:"",hoverRange:void 0,selectedDays:[]},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.getMonthStats=function(e){e.preventDefault();var t={type:"month",month:Number(a.state.month),year:Number(a.state.year)};a.props.getGenStatsForAdmin(t),a.setState({headingMonth:a.state.month,headingYear:a.state.year})},a.getSpecificMonthStats=function(e){var t=Je(e),n=t.month,r=t.year,l={type:"month",month:n,year:r};a.props.getGenStatsForAdmin(l),a.setState({headingMonth:n,headingYear:r})},a.getDayStats=function(e){e.preventDefault();var t={type:"day",day:a.state.day};a.props.getGenStatsForAdmin(t),a.setState({headingDay:a.state.day.split("-").reverse().join("-")})},a.handleDayChange=function(e){var t={type:"week",days:ot(it(e).from)};a.props.getGenStatsForAdmin(t),a.setState({selectedDays:ot(it(e).from)})},a.handleDayEnter=function(e){a.setState({hoverRange:it(e)})},a.handleDayLeave=function(){a.setState({hoverRange:void 0})},a.handleWeekClick=function(e,t,n){var r={type:"week",days:ot(it(t[0]).from)};a.props.getGenStatsForAdmin(r),a.setState({selectedDays:ot(it(t[0]).from)})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.clearStatsData()}},{key:"render",value:function(){var e=this,t=Ve(),a=t.monthLabels,n=t.yearLabels.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),l=a.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),c=this.state,s=c.hoverRange,o=c.selectedDays,i=o.length>0,m={hoverRange:s,selectedRange:i&&{from:o[0],to:o[6]},hoverRangeStart:s&&s.from,hoverRangeEnd:s&&s.to,selectedRangeStart:i&&o[0],selectedRangeEnd:i&&o[6]};return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center"},"\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("form",{onSubmit:this.getMonthStats,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u043c\u0435\u0441\u044f\u0446\u0430\u043c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"year"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0413\u043e\u0434:")),r.a.createElement("select",{name:"year",className:"form-control",onChange:this.onChange,required:!0},n)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"month"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041c\u0435\u0441\u044f\u0446:")),r.a.createElement("select",{name:"month",className:"form-control",onChange:this.onChange,required:!0},l)),r.a.createElement("button",{type:"submit",className:"btn btn-success mr-1 mt-1"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"),r.a.createElement("button",{type:"button",className:"btn btn-danger mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("current")}},"\u042d\u0442\u043e\u0442 \u043c\u0435\u0441\u044f\u0446"),r.a.createElement("button",{type:"button",className:"btn btn-primary mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("previous")}},"\u041f\u0440\u043e\u0448\u043b\u044b\u0439 \u043c\u0435\u0441\u044f\u0446"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("form",{onSubmit:this.getDayStats,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u0434\u043d\u044f\u043c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"day"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0414\u0435\u043d\u044c:")),r.a.createElement("input",{type:"date",name:"day",className:"form-control",onChange:this.onChange,required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 weekly-stats mt-3"},r.a.createElement("div",{className:"SelectedWeekExample form-bg font-weight-bold"},r.a.createElement("h4",{className:"text-center"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u043d\u0435\u0434\u0435\u043b\u044f\u043c"),r.a.createElement(dt.a,{selectedDays:o,showWeekNumbers:!0,showOutsideDays:!0,modifiers:m,firstDayOfWeek:1,onDayClick:this.handleDayChange,onDayMouseEnter:this.handleDayEnter,onDayMouseLeave:this.handleDayLeave,onWeekClick:this.handleWeekClick})))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},"week"===this.props.admin.method?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u041d\u0435\u0434\u0435\u043b\u044c\u043d\u0430\u044f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0437\u0430 ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[0])," - ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[6])):"","month"===this.props.admin.method?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u041c\u0435\u0441\u044f\u0447\u043d\u0430\u044f \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0437\u0430 ",Ke.a[this.state.headingMonth],", ",this.state.headingYear):"","day"===this.props.admin.method?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0414\u043d\u0435\u0432\u043d\u0430\u044f \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0437\u0430 ",this.state.headingDay):"")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},this.props.admin.loadingStats?r.a.createElement(me,null):r.a.createElement(lt,null))))}}]),t}(n.Component)),pt=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,errors:e.errors}},{getGenStatsForAdmin:function(e){return function(t){t(Se()),g.a.post("/stats/for-admin-general",{object:e}).then(function(a){return"month"===e.type?t({type:"GET_ADMIN_MONTH_STATS",payload:a.data}):"week"===e.type?t({type:"GET_ADMIN_WEEK_STATS",payload:a.data}):"day"===e.type?t({type:"GET_ADMIN_DAY_STATS",payload:a.data}):void 0}).catch(function(e){return t({type:y,payload:e})})}},clearStatsData:ve})(Object(p.g)(ut)),ht=a(33),Et=a.n(ht),ft=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={type:"",month:"",year:"",orders:[],headingMonth:"",headingYear:""},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.allTimeStats=function(){a.setState({type:"allTime",month:(new Date).getMonth(),year:(new Date).getFullYear()});var e={type:"allTime",month:Number(a.state.month),year:Number(a.state.year)};a.props.getAdvStats(e)},a.getMonthStats=function(e){e.preventDefault(),a.setState({type:"month",headingMonth:Number(a.state.month),headingYear:Number(a.state.year)});var t={type:"month",month:Number(a.state.month),year:Number(a.state.year)};a.props.getAdvStats(t)},a.getSpecificMonthStats=function(e){var t=Je(e),n=t.month,r=t.year,l={type:"month",month:n,year:r};a.props.getAdvStats(l),a.setState({type:"month",headingMonth:n,headingYear:r})},a.getYearStats=function(e){e.preventDefault(),a.setState({type:"year",headingYear:Number(a.state.year)});var t={type:"year",month:Number(a.state.month),year:Number(a.state.year)};a.props.getAdvStats(t)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=(new Date).getMonth(),t=(new Date).getFullYear();this.setState({type:"month",month:e,year:t,headingMonth:e,headingYear:t});var a={type:"month",month:e,year:t};this.props.getAdvStats(a)}},{key:"componentWillReceiveProps",value:function(e){this.setState({orders:e.admin.stats.orders})}},{key:"render",value:function(){var e=this,t=Ve(),a=t.monthLabels,n=t.yearLabels.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),l=a.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),c=[];Et.a.forEach(function(e){c.push({name:e.value,quantity:0,completed:0,confirmed:0,rejected:0,failed:0,povtors:0,totalSum:0,totalScore:0})}),this.state.orders.forEach(function(e){c.forEach(function(t){e.advertising===t.name&&(t.quantity++,e.hasOwnProperty("prevFailedOrder")&&t.povtors++,e.completed&&(t.completed++,e.failed||e.hasOwnProperty("prevFailedOrder")||!e.operatorConfirmed||!e.accountantConfirmed&&!e.adminConfirmed||(t.confirmed++,t.totalSum+=e.cost,t.totalScore+=e.score),(e.operatorDecided&&!e.operatorConfirmed||e.accountantDecided&&!e.accountantConfirmed||e.adminDecided&&!e.adminConfirmed)&&t.rejected++,e.failed&&t.failed++))})}),c.sort(function(e,t){return t.quantity-e.quantity});var s=c.map(function(e,t){var a=$e({totalScore:e.totalScore,totalOrders:e.confirmed,failedOrders:e.failed})||0;return r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3",key:t},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h3",{className:"text-center"},e.name),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("li",null,"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432: ",e.quantity),r.a.createElement("li",null,"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432: ",e.completed),r.a.createElement("li",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432: ",e.confirmed),r.a.createElement("li",{className:"pt-2"},"\u041d\u0430 \u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443: ",e.totalSum.toLocaleString()," UZS"),r.a.createElement("li",{className:"pb-2"},"\u0421\u0440\u0435\u0434\u043d\u0438\u0439 \u0431\u0430\u043b\u043b: ",a.toFixed(2)," (\u0438\u0437 5)"),r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0440\u0433\u043d\u0443\u0442\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432: ",e.rejected),r.a.createElement("li",null,"\u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",e.failed),r.a.createElement("li",null,"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",e.povtors),r.a.createElement("h6",{className:"mt-2"},"* \u043d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b \u043d\u0435 \u0432\u0445\u043e\u0434\u044f\u0442 \u0432 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b \u0438 \u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443")))))});return r.a.createElement("div",{className:"container-fluid mt-1 p-0"},r.a.createElement("div",{className:"row m-0 p-0"},r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("form",{onSubmit:this.getMonthStats,className:"form-bg p-2"},r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{name:"year",className:"form-control",onChange:this.onChange,required:!0},n)),r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{name:"month",className:"form-control",onChange:this.onChange,required:!0},l)),r.a.createElement("button",{type:"submit",className:"btn btn-success mr-1 mt-1"},r.a.createElement("i",{className:"fas fa-search"})," \u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c"),r.a.createElement("button",{type:"button",className:"btn btn-danger mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("current")}},"\u042d\u0442\u043e\u0442 \u043c\u0435\u0441\u044f\u0446"),r.a.createElement("button",{type:"button",className:"btn btn-primary mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("previous")}},"\u041f\u0440\u043e\u0448\u043b\u044b\u0439 \u043c\u0435\u0441\u044f\u0446")))),r.a.createElement("div",{className:"row m-0"},r.a.createElement("div",{className:"col-12 mt-3"},"month"===this.state.type?r.a.createElement("h2",{className:"text-center"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0440\u0435\u043a\u043b\u0430\u043c\u044b \u0437\u0430 ",Ke.a[this.state.headingMonth],", ",this.state.headingYear):"","year"===this.state.type?r.a.createElement("h2",{className:"text-center"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0440\u0435\u043a\u043b\u0430\u043c\u044b \u0437\u0430 ",this.state.headingYear," \u0433\u043e\u0434"):"","allTime"===this.state.type?r.a.createElement("h2",{className:"text-center"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0440\u0435\u043a\u043b\u0430\u043c\u044b \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f"):"")),this.props.admin.loadingStats?r.a.createElement(me,null):r.a.createElement("div",{className:"row m-0"},s))}}]),t}(n.Component),gt=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,order:e.order,errors:e.errors}},{getAdvStats:function(e){return function(t){t(Se()),g.a.post("/stats/adv-stats",{object:e}).then(function(e){return t({type:"GET_ADV_STATS",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}}})(Object(p.g)(ft)),bt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={orders:a.props.admin.stats.orders,acceptedOrders:a.props.admin.stats.acceptedOrders,showOrders:!1},a.renderOrders=function(e){return e.map(function(e,t){var a=[];e.disinfectors.forEach(function(e){a.push({user:e.user,consumption:e.consumption})});var n=a.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("p",{className:"mb-0"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c: ",e.user.occupation," ",e.user.name),e.consumption.map(function(e,t){return r.a.createElement("p",{key:t,className:"mb-0"},e.material,": ",e.amount.toLocaleString()," ",e.unit)}))});return r.a.createElement("div",{className:"col-lg-4 col-md-6",key:t},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},e.prevFailedOrder&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),e.failed&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),e.repeatedOrder?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u042d\u0442\u043e \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437"),e.repeatedOrderDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0420\u0435\u0448\u0435\u043d\u0438\u0435 \u043f\u043e \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044e \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b \u043f\u0440\u0438\u043d\u044f\u0442\u0430"),e.repeatedOrderNeeded?r.a.createElement("li",null,"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u0430\u044f \u0420\u0430\u0431\u043e\u0442\u0430 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f"):r.a.createElement("li",null,"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u0430\u044f \u0420\u0430\u0431\u043e\u0442\u0430 \u041d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f")):r.a.createElement("li",null,"\u0420\u0435\u0448\u0435\u043d\u0438\u0435 \u043f\u043e \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044e \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0439 \u0437\u0430\u044f\u0432\u043a\u0438 \u0435\u0449\u0435 \u043d\u0435 \u043f\u0440\u0438\u043d\u044f\u0442\u0430")):"",e.completed?r.a.createElement("li",null,"\u0417\u0430\u043a\u0430\u0437 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d"):r.a.createElement("li",null,"\u0417\u0430\u043a\u0430\u0437 \u0435\u0449\u0435 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d"),e.operatorDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.operatorConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.operatorCheckedAt),")"),r.a.createElement("li",null,"\u0411\u0430\u043b\u043b (0-5): ",e.score),r.a.createElement("li",null,"\u041e\u0442\u0437\u044b\u0432 \u041a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.clientReview?e.clientReview:"\u041d\u0435\u0442 \u041e\u0442\u0437\u044b\u0432\u0430")):r.a.createElement("li",{className:"text-danger"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.operatorCheckedAt),")")):r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.accountantDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.accountantConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.accountantCheckedAt),")"),r.a.createElement("li",null,"\u0421\u0447\u0435\u0442-\u0424\u0430\u043a\u0442\u0443\u0440\u0430: ",e.invoice?e.invoice:"--"),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement("li",{className:"text-danger"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.accountantCheckedAt),")")):r.a.createElement(r.a.Fragment,null,e.adminDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0410\u0434\u043c\u0438\u043d \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.adminConfirmed?r.a.createElement("li",{className:"text-success"},"\u0410\u0434\u043c\u0438\u043d \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.adminCheckedAt),")"):r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u043c\u0438\u043d \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.adminCheckedAt),")")):r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443")),"corporate"===e.clientType?r.a.createElement(r.a.Fragment,null,e.clientId?r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.clientId.name):r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442"),r.a.createElement("li",{className:"text-danger"},"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.client)):"","individual"===e.clientType?r.a.createElement("li",{className:"text-danger"},"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.client):"",r.a.createElement("li",{className:"text-danger"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u041a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.phone),e.phone2?r.a.createElement("li",null,"\u0414\u0440\u0443\u0433\u043e\u0439 \u043d\u043e\u043c\u0435\u0440: ",e.phone2):"",e.completed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-danger"},"\u0414\u0430\u0442\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},e.dateFrom)),r.a.createElement("li",{className:"text-danger"},"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: ",r.a.createElement(re.a,{format:"HH:mm"},e.dateFrom))):"",!e.completed&&e.repeatedOrder&&e.repeatedOrderDecided&&e.repeatedOrderNeeded?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-danger"},"\u0414\u0430\u0442\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},e.dateFrom)),r.a.createElement("li",{className:"text-danger"},"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: ",r.a.createElement(re.a,{format:"HH:mm"},e.dateFrom))):"",r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u0440\u0435\u0441: ",e.address),r.a.createElement("li",{className:"text-danger"},"\u0422\u0438\u043f \u0443\u0441\u043b\u0443\u0433\u0438: ",e.typeOfService),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430: ",e.comment?e.comment:"--"),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430: ",e.disinfectorComment?e.disinfectorComment:"--"),r.a.createElement("li",null,"\u0421\u0440\u043e\u043a \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0438 (\u0432 \u043c\u0435\u0441\u044f\u0446\u0430\u0445): ",e.guarantee),r.a.createElement("li",null,"\u0420\u0430\u0441\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 (\u0437\u0430\u043a\u0430\u0437 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u043b\u0438 ",e.disinfectors.length," \u0447\u0435\u043b):"),r.a.createElement("ul",{className:"font-bold mb-0"},n),e.completed&&"corporate"===e.clientType?r.a.createElement(r.a.Fragment,null,"cash"===e.paymentMethod?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u041d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u0411\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),r.a.createElement("li",null,"\u041d\u043e\u043c\u0435\u0440 \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430: ",e.contractNumber))):"",e.completed&&"individual"===e.clientType?r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)"):""))))})},a.toggleShowOrders=function(e){a.setState({showOrders:e})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=et(this.state.orders),a=t.totalScore,n=t.totalOrders,l=t.completed,c=t.confirmedOrders,s=t.rejected,o=t.consultAndOsmotrConfirmed,i=t.totalSumForDisinfector,m=t.failed,d=t.povtors,u=t.corporate,p=t.corporatePercent,h=t.corpSum,E=t.corpSumPercent,f=t.indiv,g=t.indivPercent,b=t.indivSum,y=t.indivSumPercent,v=0,N=[];at.a.forEach(function(e){var t={material:e.material,amount:0,unit:e.unit};N.push(t)}),this.state.orders.filter(function(e){return e.completed&&!e.failed&&!e.hasOwnProperty("prevFailedOrder")}).forEach(function(t){t.completed&&t.disinfectors.forEach(function(t){t.user._id===e.props.admin.stats.disinfectorId&&t.consumption.forEach(function(e){N.forEach(function(t){e.material===t.material&&e.unit===t.unit&&(t.amount+=e.amount)})})})}),this.state.acceptedOrders.forEach(function(e){e.completed&&!e.failed&&e.operatorConfirmed&&(e.accountantConfirmed||e.adminConfirmed)&&(v+=e.cost)});var O=$e({totalScore:a,totalOrders:c.length,failedOrders:m})||0,S=(N=ze(N)).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)}),D=this.renderOrders(this.state.orders),C=this.renderOrders(this.state.acceptedOrders);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h4",{className:"text-center"},"\u0417\u0430\u043a\u0430\u0437\u044b"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("li",null,"\u0412\u0441\u0435\u0433\u043e \u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043e \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",n),r.a.createElement("li",null,"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",l),r.a.createElement("li",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043e \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",c.length," (\u0438\u0437 \u043d\u0438\u0445 \u041a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u0438 \u0438 \u041e\u0441\u043c\u043e\u0442\u0440\u044b: ",o,")"),r.a.createElement("li",{className:"pt-2"},"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",i.toLocaleString()," UZS"),r.a.createElement("li",{className:"pb-2"},"\u0421\u0440\u0435\u0434\u043d\u0438\u0439 \u0431\u0430\u043b\u043b: ",O.toFixed(2)," (\u0438\u0437 5)"),r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0440\u0433\u043d\u0443\u0442\u043e \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",s),r.a.createElement("li",null,"\u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",m),r.a.createElement("li",null,"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",d),r.a.createElement("h6",{className:"mt-2"},"* \u043d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b \u043d\u0435 \u0432\u0445\u043e\u0434\u044f\u0442 \u0432 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b \u0438 \u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443"))))),r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("li",null,"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043f\u0440\u0438\u043d\u044f\u043b \u0437\u0430\u043a\u0430\u0437\u043e\u0432: ",this.state.acceptedOrders.length),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u043f\u0440\u0438\u043d\u044f\u0442\u044b\u0445 \u0437\u0430\u043a\u0430\u0437\u043e\u0432: ",v.toLocaleString()," UZS"),r.a.createElement("h4",{className:"text-center"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u044b"),r.a.createElement("li",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",u," (",p," %)"),r.a.createElement("li",null,"\u041d\u0430 \u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443: ",h.toLocaleString()," UZS  (",E," %)"),r.a.createElement("h4",{className:"text-center"},"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u044b"),r.a.createElement("li",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",f," (",g," %)"),r.a.createElement("li",null,"\u041d\u0430 \u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443: ",b.toLocaleString()," UZS (",y," %)"))))),r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h4",{className:"text-center"},"\u0420\u0430\u0441\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432:"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},S,r.a.createElement("h6",{className:"mt-2"},"* \u0441\u044e\u0434\u0430 \u043d\u0435 \u0432\u0445\u043e\u0434\u044f\u0442 \u043d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b")))))),this.state.showOrders?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{className:"btn btn-dark",onClick:this.toggleShowOrders.bind(this,!1)},r.a.createElement("i",{className:"fas fa-eye-slash"})," \u0421\u043a\u0440\u044b\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u044b"))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0412\u0441\u0435 \u0417\u0430\u043a\u0430\u0437\u044b \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f")),this.state.orders.length>0?D:r.a.createElement("h2",null,"\u041d\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u043e\u0432")),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u041f\u0440\u0438\u043d\u044f\u0442\u044b\u0435 \u0417\u0430\u043a\u0430\u0437\u044b \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f")),this.state.acceptedOrders.length>0?C:r.a.createElement("h2",null,"\u041d\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"))):r.a.createElement("button",{className:"btn btn-dark mt-2",onClick:this.toggleShowOrders.bind(this,!0)},r.a.createElement("i",{className:"fas fa-eye"})," \u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u044b"))}}]),t}(n.Component),yt=Object(S.b)(function(e){return{auth:e.auth,order:e.order,admin:e.admin,errors:e.errors}})(Object(p.g)(bt)),vt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={month:"",year:"",day:"",headingMonth:"",headingYear:"",headingDay:"",hoverRange:void 0,selectedDays:[],selectedDaysAfterSubmit:[],disinfectorIdMonth:"",disinfectorIdWeek:"",disinfectorIdDay:"",disinfectorName:"",occupation:""},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.setSpecificMonth=function(e){var t=Je(e),n=t.month,r=t.year;a.setState({month:n,year:r})},a.getMonthStats=function(e){e.preventDefault(),a.props.admin.disinfectors.forEach(function(e){e._id.toString()===a.state.disinfectorIdMonth.toString()&&a.setState({headingMonth:a.state.month,headingYear:a.state.year,disinfectorName:e.name,occupation:e.occupation})});var t={type:"month",id:a.state.disinfectorIdMonth,month:Number(a.state.month),year:Number(a.state.year)};a.props.getDisinfectorStatsForAdmin(t)},a.getWeekStats=function(e){if(e.preventDefault(),0===a.state.selectedDays.length)alert("\u0412\u044b \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043b\u0438 \u043d\u0435\u0434\u0435\u043b\u044e");else{a.props.admin.disinfectors.forEach(function(e){e._id.toString()===a.state.disinfectorIdWeek.toString()&&a.setState({selectedDaysAfterSubmit:a.state.selectedDays,disinfectorName:e.name,occupation:e.occupation})});var t={type:"week",id:a.state.disinfectorIdWeek,days:a.state.selectedDays};a.props.getDisinfectorStatsForAdmin(t)}},a.getDayStats=function(e){e.preventDefault(),a.props.admin.disinfectors.forEach(function(e){e._id.toString()===a.state.disinfectorIdDay.toString()&&a.setState({headingDay:a.state.day.split("-").reverse().join("-"),disinfectorName:e.name,occupation:e.occupation})});var t={type:"day",id:a.state.disinfectorIdDay,day:a.state.day};a.props.getDisinfectorStatsForAdmin(t)},a.handleDayChange=function(e){a.setState({selectedDays:ot(it(e).from)})},a.handleDayEnter=function(e){a.setState({hoverRange:it(e)})},a.handleDayLeave=function(){a.setState({hoverRange:void 0})},a.handleWeekClick=function(e,t,n){a.setState({selectedDays:ot(it(t[0]).from)})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.clearStatsData()}},{key:"componentDidMount",value:function(){this.props.getAllDisinfectorsAndSubadmins()}},{key:"render",value:function(){var e=this,t=Ve(),a=t.monthLabels,n=t.yearLabels.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),l=a.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),c=[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f -- ",value:""}];this.props.admin.disinfectors.forEach(function(e){c.push({label:"".concat(e.occupation," ").concat(e.name),value:e._id})});var s=c.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),o=this.state,i=o.hoverRange,m=o.selectedDays,d=m.length>0,u={hoverRange:i,selectedRange:d&&{from:m[0],to:m[6]},hoverRangeStart:i&&i.from,hoverRangeEnd:i&&i.to,selectedRangeStart:d&&m[0],selectedRangeEnd:d&&m[6]};return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("form",{onSubmit:this.getMonthStats,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u043c\u0435\u0441\u044f\u0446\u0430\u043c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"disinfectorIdMonth"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:")),r.a.createElement("select",{name:"disinfectorIdMonth",className:"form-control",onChange:this.onChange,required:!0},s)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"year"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0413\u043e\u0434:")),r.a.createElement("select",{name:"year",className:"form-control",onChange:this.onChange,value:this.state.year,required:!0},n)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"month"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041c\u0435\u0441\u044f\u0446:")),r.a.createElement("select",{name:"month",className:"form-control",onChange:this.onChange,value:this.state.month,required:!0},l)),r.a.createElement("button",{type:"submit",className:"btn btn-success mr-1 mt-1"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"),r.a.createElement("button",{type:"button",className:"btn btn-danger mr-1 mt-1",onClick:function(){return e.setSpecificMonth("current")}},"\u042d\u0442\u043e\u0442 \u043c\u0435\u0441\u044f\u0446"),r.a.createElement("button",{type:"button",className:"btn btn-primary mr-1 mt-1",onClick:function(){return e.setSpecificMonth("previous")}},"\u041f\u0440\u043e\u0448\u043b\u044b\u0439 \u043c\u0435\u0441\u044f\u0446"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("form",{onSubmit:this.getDayStats,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u0434\u043d\u044f\u043c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"disinfectorIdDay"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:")),r.a.createElement("select",{name:"disinfectorIdDay",className:"form-control",onChange:this.onChange,required:!0},s)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"day"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0414\u0435\u043d\u044c:")),r.a.createElement("input",{type:"date",name:"day",className:"form-control",onChange:this.onChange,required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 weekly-stats mt-3"},r.a.createElement("div",{className:"SelectedWeekExample form-bg font-weight-bold"},r.a.createElement("h4",{className:"text-center"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u043d\u0435\u0434\u0435\u043b\u044f\u043c"),r.a.createElement(dt.a,{selectedDays:m,showWeekNumbers:!0,showOutsideDays:!0,modifiers:u,firstDayOfWeek:1,onDayClick:this.handleDayChange,onDayMouseEnter:this.handleDayEnter,onDayMouseLeave:this.handleDayLeave,onWeekClick:this.handleWeekClick})),r.a.createElement("form",{onSubmit:this.getWeekStats,className:"form-bg p-2"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"disinfectorIdWeek"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:")),r.a.createElement("select",{name:"disinfectorIdWeek",className:"form-control",onChange:this.onChange,required:!0},s)),r.a.createElement("button",{type:"submit",className:"btn btn-success"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c")))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},"week"===this.props.admin.method&&this.state.disinfectorName&&this.state.selectedDays?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u041d\u0435\u0434\u0435\u043b\u044c\u043d\u0430\u044f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 ",this.state.occupation," ",this.state.disinfectorName," \u0437\u0430 ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDaysAfterSubmit[0])," - ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDaysAfterSubmit[6])):"","month"===this.props.admin.method&&this.state.disinfectorName&&this.state.month&&this.state.year?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u041c\u0435\u0441\u044f\u0447\u043d\u0430\u044f \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 ",this.state.occupation,"  ",this.state.disinfectorName," \u0437\u0430 ",Ke.a[this.state.headingMonth],", ",this.state.headingYear):"","day"===this.props.admin.method&&this.state.disinfectorName&&this.state.day?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0414\u043d\u0435\u0432\u043d\u0430\u044f \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 ",this.state.occupation,"  ",this.state.disinfectorName," \u0437\u0430 ",this.state.headingDay):"")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},this.props.admin.loadingStats?r.a.createElement(me,null):r.a.createElement(yt,null))))}}]),t}(n.Component),Nt=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,errors:e.errors}},{getAllDisinfectorsAndSubadmins:Ee,getDisinfectorStatsForAdmin:function(e){return function(t){t(Se()),g.a.post("/stats/for-admin-disinfector-stats",{object:e}).then(function(a){return"month"===e.type?t({type:"DISINF_STATS_MONTH_ADMIN",payload:a.data}):"week"===e.type?t({type:"DISINF_STATS_MONTH_WEEK",payload:a.data}):"day"===e.type?t({type:"DISINF_STATS_DAY_ADMIN",payload:a.data}):void 0}).catch(function(e){return t({type:y,payload:e})})}},clearStatsData:ve})(Object(p.g)(vt)),Ot=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={orders:a.props.admin.stats.orders,showOrders:!1},a.toggleShowOrders=function(e){a.setState({showOrders:e})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.orders,t=et(e),a=t.totalSum,n=t.totalScore,l=t.totalOrders,c=t.completed,s=t.confirmedOrders,o=t.rejected,i=t.consultAndOsmotrConfirmed,m=t.failed,d=t.povtors,u=t.corporate,p=t.corporatePercent,h=t.corpSum,E=t.corpSumPercent,f=t.indiv,g=t.indivPercent,b=t.indivSum,y=t.indivSumPercent,v=this.state.orders.filter(function(e){return e.completed&&!e.failed&&!e.hasOwnProperty("prevFailedOrder")}),N=nt(v),O=$e({totalScore:n,totalOrders:s.length,failedOrders:m})||0,S=(N=ze(N)).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)}),D=e.map(function(e,t){var a=[];e.disinfectors.forEach(function(e){a.push({user:e.user,consumption:e.consumption})});var n=a.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("p",{className:"mb-0"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c: ",e.user.occupation," ",e.user.name),e.consumption.map(function(e,t){return r.a.createElement("p",{key:t,className:"mb-0"},e.material,": ",e.amount.toLocaleString()," ",e.unit)}))});return r.a.createElement("div",{className:"col-lg-4 col-md-6",key:t},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},e.prevFailedOrder&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),e.failed&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),e.disinfectorId?r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439: ",e.disinfectorId.occupation," ",e.disinfectorId.name):"",e.operatorDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.operatorConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.operatorCheckedAt),")"),r.a.createElement("li",null,"\u0411\u0430\u043b\u043b (0-5): ",e.score),r.a.createElement("li",null,"\u041e\u0442\u0437\u044b\u0432 \u041a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.clientReview?e.clientReview:"\u041d\u0435\u0442 \u041e\u0442\u0437\u044b\u0432\u0430")):r.a.createElement("li",{className:"text-danger"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.operatorCheckedAt),")")):r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.accountantDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.accountantConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.accountantCheckedAt),")"),r.a.createElement("li",null,"\u0421\u0447\u0435\u0442-\u0424\u0430\u043a\u0442\u0443\u0440\u0430: ",e.invoice?e.invoice:"--"),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement("li",{className:"text-danger"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.accountantCheckedAt),")")):r.a.createElement(r.a.Fragment,null,e.adminDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0410\u0434\u043c\u0438\u043d \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.adminConfirmed?r.a.createElement("li",{className:"text-success"},"\u0410\u0434\u043c\u0438\u043d \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.adminCheckedAt),")"):r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u043c\u0438\u043d \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.adminCheckedAt),")")):r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443")),"corporate"===e.clientType?r.a.createElement(r.a.Fragment,null,e.clientId?r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.clientId.name):r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442"),r.a.createElement("li",{className:"text-danger"},"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.client)):"","individual"===e.clientType?r.a.createElement("li",{className:"text-danger"},"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.client):"",r.a.createElement("li",{className:"text-danger"},"\u0414\u0430\u0442\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},e.dateFrom)),e.completed?r.a.createElement("li",{className:"text-danger"},"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: \u0421 ",r.a.createElement(re.a,{format:"HH:mm"},e.dateFrom)," \u041f\u041e ",r.a.createElement(re.a,{format:"HH:mm"},e.completedAt)):r.a.createElement("li",{className:"text-danger"},"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: \u0421 ",r.a.createElement(re.a,{format:"HH:mm"},e.dateFrom)),r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u0440\u0435\u0441: ",e.address),r.a.createElement("li",{className:"text-danger"},"\u0422\u0438\u043f \u0443\u0441\u043b\u0443\u0433\u0438: ",e.typeOfService),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430: ",e.comment?e.comment:"--"),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430: ",e.disinfectorComment?e.disinfectorComment:"--"),r.a.createElement("li",null,"\u0421\u0440\u043e\u043a \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0438 (\u0432 \u043c\u0435\u0441\u044f\u0446\u0430\u0445): ",e.guarantee),r.a.createElement("li",null,"\u0420\u0430\u0441\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 (\u0437\u0430\u043a\u0430\u0437 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u043b\u0438 ",e.disinfectors.length," \u0447\u0435\u043b):"),r.a.createElement("ul",{className:"font-bold mb-0"},n),e.completed&&"corporate"===e.clientType?r.a.createElement(r.a.Fragment,null,"cash"===e.paymentMethod?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u041d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u0411\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),r.a.createElement("li",null,"\u041d\u043e\u043c\u0435\u0440 \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430: ",e.contractNumber))):"",e.completed&&"individual"===e.clientType&&e.cost?r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)"):""))))});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("li",null,"\u0412\u0441\u0435\u0433\u043e \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043f\u0440\u0438\u043d\u044f\u043b \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",l),r.a.createElement("li",null,"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",c),r.a.createElement("li",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043e \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",s.length," (\u0438\u0437 \u043d\u0438\u0445 \u041a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u0438 \u0438 \u041e\u0441\u043c\u043e\u0442\u0440\u044b: ",i,")"),r.a.createElement("li",{className:"pt-2"},"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",a.toLocaleString()," UZS"),r.a.createElement("li",{className:"pb-2"},"\u0421\u0440\u0435\u0434\u043d\u0438\u0439 \u0431\u0430\u043b\u043b: ",O.toFixed(2)," (\u0438\u0437 5)"),r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0440\u0433\u043d\u0443\u0442\u043e \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",o),r.a.createElement("li",null,"\u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",m),r.a.createElement("li",null,"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",d),r.a.createElement("h6",{className:"mt-2"},"* \u043d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b \u043d\u0435 \u0432\u0445\u043e\u0434\u044f\u0442 \u0432 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b \u0438 \u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443"))))),r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("h4",{className:"text-center"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u044b"),r.a.createElement("li",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",u," (",p," %)"),r.a.createElement("li",null,"\u041d\u0430 \u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443: ",h.toLocaleString()," UZS  (",E," %)"),r.a.createElement("h4",{className:"text-center"},"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u044b"),r.a.createElement("li",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",f," (",g," %)"),r.a.createElement("li",null,"\u041d\u0430 \u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443: ",b.toLocaleString()," UZS (",y," %)"))))),r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h4",{className:"text-center"},"\u041d\u0430 \u044d\u0442\u0438\u0445 \u0437\u0430\u043a\u0430\u0437\u0430\u0445 \u0440\u0430\u0441\u0445\u043e\u0434\u043e\u0432\u0430\u043d\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432:"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},S,r.a.createElement("h6",{className:"mt-2"},"* \u0440\u0430\u0441\u0445\u043e\u0434 \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u044b\u0445 \u0437\u0430\u043a\u0430\u0437\u043e\u0432")))))),this.state.showOrders?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{className:"btn btn-dark",onClick:this.toggleShowOrders.bind(this,!1)},r.a.createElement("i",{className:"fas fa-eye-slash"})," \u0421\u043a\u0440\u044b\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u044b"))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0417\u0430\u043a\u0430\u0437\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0438\u043d\u044f\u043b \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c")),e.length>0?D:r.a.createElement("h2",null,"\u041d\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"))):r.a.createElement("button",{className:"btn btn-dark mt-2",onClick:this.toggleShowOrders.bind(this,!0)},r.a.createElement("i",{className:"fas fa-eye"})," \u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u044b"))}}]),t}(n.Component),St=Object(S.b)(function(e){return{auth:e.auth,order:e.order,admin:e.admin,errors:e.errors}})(Object(p.g)(Ot)),Dt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={month:"",year:"",day:"",headingMonth:"",headingYear:"",headingDay:"",hoverRange:void 0,selectedDays:[],selectedDaysAfterSubmit:[],operatorId:"",operatorName:"",occupation:""},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.setSpecificMonth=function(e){var t=Je(e),n=t.month,r=t.year;a.setState({month:n,year:r})},a.getMonthStats=function(e){e.preventDefault(),a.props.admin.operators.forEach(function(e){e._id.toString()===a.state.operatorId.toString()&&a.setState({headingMonth:a.state.month,headingYear:a.state.year,operatorName:e.name,occupation:e.occupation})});var t={type:"month",operatorId:a.state.operatorId,month:Number(a.state.month),year:Number(a.state.year)};a.props.getOperatorStats(t)},a.getWeekStats=function(e){if(e.preventDefault(),0===a.state.selectedDays.length)alert("\u0412\u044b \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043b\u0438 \u043d\u0435\u0434\u0435\u043b\u044e");else{a.props.admin.operators.forEach(function(e){e._id.toString()===a.state.operatorId.toString()&&a.setState({selectedDaysAfterSubmit:a.state.selectedDays,operatorName:e.name,occupation:e.occupation})});var t={type:"week",operatorId:a.state.operatorId,days:a.state.selectedDays};a.props.getOperatorStats(t)}},a.getDayStats=function(e){e.preventDefault(),a.props.admin.operators.forEach(function(e){e._id.toString()===a.state.operatorId.toString()&&a.setState({headingDay:a.state.day.split("-").reverse().join("-"),operatorName:e.name,occupation:e.occupation})});var t={type:"day",operatorId:a.state.operatorId,day:a.state.day};a.props.getOperatorStats(t)},a.handleDayChange=function(e){a.setState({selectedDays:ot(it(e).from)})},a.handleDayEnter=function(e){a.setState({hoverRange:it(e)})},a.handleDayLeave=function(){a.setState({hoverRange:void 0})},a.handleWeekClick=function(e,t,n){a.setState({selectedDays:ot(it(t[0]).from)})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.clearStatsData()}},{key:"componentDidMount",value:function(){this.props.getAllOperatorsAndAmins()}},{key:"render",value:function(){var e=this,t=Ve(),a=t.monthLabels,n=t.yearLabels.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),l=a.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),c=[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430/\u0410\u0434\u043c\u0438\u043d\u0430 -- ",value:""}];this.props.admin.operators.forEach(function(e){c.push({label:"".concat(e.occupation," ").concat(e.name),value:e._id})});var s=c.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),o=this.state,i=o.hoverRange,m=o.selectedDays,d=m.length>0,u={hoverRange:i,selectedRange:d&&{from:m[0],to:m[6]},hoverRangeStart:i&&i.from,hoverRangeEnd:i&&i.to,selectedRangeStart:d&&m[0],selectedRangeEnd:d&&m[6]};return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("form",{onSubmit:this.getMonthStats,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u043c\u0435\u0441\u044f\u0446\u0430\u043c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"operatorId"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430/\u0410\u0434\u043c\u0438\u043d\u0430:")),r.a.createElement("select",{name:"operatorId",className:"form-control",onChange:this.onChange,required:!0},s)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"year"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0413\u043e\u0434:")),r.a.createElement("select",{name:"year",className:"form-control",onChange:this.onChange,value:this.state.year,required:!0},n)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"month"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041c\u0435\u0441\u044f\u0446:")),r.a.createElement("select",{name:"month",className:"form-control",onChange:this.onChange,value:this.state.month,required:!0},l)),r.a.createElement("button",{type:"submit",className:"btn btn-success mr-1 mt-1"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"),r.a.createElement("button",{type:"button",className:"btn btn-danger mr-1 mt-1",onClick:function(){return e.setSpecificMonth("current")}},"\u042d\u0442\u043e\u0442 \u043c\u0435\u0441\u044f\u0446"),r.a.createElement("button",{type:"button",className:"btn btn-primary mr-1 mt-1",onClick:function(){return e.setSpecificMonth("previous")}},"\u041f\u0440\u043e\u0448\u043b\u044b\u0439 \u043c\u0435\u0441\u044f\u0446"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("form",{onSubmit:this.getDayStats,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u0434\u043d\u044f\u043c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"operatorId"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430/\u0410\u0434\u043c\u0438\u043d\u0430:")),r.a.createElement("select",{name:"operatorId",className:"form-control",onChange:this.onChange,required:!0},s)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"day"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0414\u0435\u043d\u044c:")),r.a.createElement("input",{type:"date",name:"day",className:"form-control",onChange:this.onChange,required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 weekly-stats mt-3"},r.a.createElement("div",{className:"SelectedWeekExample form-bg font-weight-bold"},r.a.createElement("h4",{className:"text-center"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u043d\u0435\u0434\u0435\u043b\u044f\u043c"),r.a.createElement(dt.a,{selectedDays:m,showWeekNumbers:!0,showOutsideDays:!0,modifiers:u,firstDayOfWeek:1,onDayClick:this.handleDayChange,onDayMouseEnter:this.handleDayEnter,onDayMouseLeave:this.handleDayLeave,onWeekClick:this.handleWeekClick})),r.a.createElement("form",{onSubmit:this.getWeekStats,className:"form-bg p-2"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"operatorId"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430/\u0410\u0434\u043c\u0438\u043d\u0430:")),r.a.createElement("select",{name:"operatorId",className:"form-control",onChange:this.onChange,required:!0},s)),r.a.createElement("button",{type:"submit",className:"btn btn-success"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c")))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},"week"===this.props.admin.method&&this.state.operatorName&&this.state.selectedDays?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u041d\u0435\u0434\u0435\u043b\u044c\u043d\u0430\u044f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 ",this.state.occupation," ",this.state.operatorName," \u0437\u0430 ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDaysAfterSubmit[0])," - ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDaysAfterSubmit[6])):"","month"===this.props.admin.method&&this.state.operatorName&&this.state.headingMonth&&this.state.headingYear?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u041c\u0435\u0441\u044f\u0447\u043d\u0430\u044f \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 ",this.state.occupation," ",this.state.operatorName," \u0437\u0430 ",Ke.a[this.state.headingMonth],", ",this.state.headingYear):"","day"===this.props.admin.method&&this.state.operatorName&&this.state.headingDay?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0414\u043d\u0435\u0432\u043d\u0430\u044f \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 ",this.state.occupation," ",this.state.operatorName," \u0437\u0430 ",this.state.headingDay):"")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},this.props.admin.loadingStats?r.a.createElement(me,null):r.a.createElement(St,null))))}}]),t}(n.Component),Ct=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,errors:e.errors}},{getAllOperatorsAndAmins:function(){return function(e){e(Ce()),g.a.post("/get-users",{object:{method:"role",roles:["operator","admin"]}}).then(function(t){return e({type:"GET_ALL_OPERATORS_AND_ADMINS_FOR_ADMIN",payload:t.data})}).catch(function(t){return e({type:y,payload:t})})}},getOperatorStats:function(e){return function(t){t(Se()),g.a.post("/stats/operator-stats",{object:e}).then(function(e){return t({type:"GET_OPERATOR_STATS",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}},clearStatsData:ve})(Object(p.g)(Dt)),At=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r))))._isMounted=!1,a.state={orderQueries:[]},a.adminConfirmsOrderQuery=function(e,t,n){var r={orderId:e,response:t,disinfectors:n};a.props.adminConfirmsOrderQuery(r,a.props.history),window.location.reload()},a.goToAddNewForm=function(e){a.props.history.push("/fail/add-new/".concat(e._id),{pathname:"/fail/add-new/".concat(e._id),state:{order:e}})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.props.admin.orderQueries&&this.props.admin.orderQueries.length>0&&this.setState({orderQueries:this.props.admin.orderQueries})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state.orderQueries.map(function(t,a){var n=[];t.disinfectors.forEach(function(e){n.push({user:e.user,consumption:e.consumption})});var l=n.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("p",{className:"mb-0"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c: ",e.user.occupation," ",e.user.name),e.consumption.map(function(e,t){return r.a.createElement("p",{key:t,className:"mb-0"},e.material,": ",e.amount.toLocaleString()," ",e.unit)}))});return r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3",key:a},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 pl-0 list-unstyled"},t.prevFailedOrder&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),t.failed&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"}),"\u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),t.returnedBack?r.a.createElement("li",{className:"text-danger"},"\u042d\u0442\u043e \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437"):"",t.disinfectorId?r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439: ",t.disinfectorId.occupation," ",t.disinfectorId.name):"","corporate"===t.clientType?r.a.createElement(r.a.Fragment,null,t.clientId?r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",t.clientId.name):r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442"),r.a.createElement("li",{className:"text-danger"},"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",t.client)):"","individual"===t.clientType?r.a.createElement("li",{className:"text-danger"},"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",t.client):"",r.a.createElement("li",{className:"text-danger"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u041a\u043b\u0438\u0435\u043d\u0442\u0430: ",t.phone),r.a.createElement("li",{className:"text-danger"},"\u0414\u0430\u0442\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},t.dateFrom)),r.a.createElement("li",{className:"text-danger"},"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: \u0421 ",r.a.createElement(re.a,{format:"HH:mm"},t.dateFrom)," \u041f\u041e ",r.a.createElement(re.a,{format:"HH:mm"},t.completedAt)),r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u0440\u0435\u0441: ",t.address),r.a.createElement("li",null,"\u0422\u0438\u043f \u0443\u0441\u043b\u0443\u0433\u0438: ",t.typeOfService),r.a.createElement("li",null,"\u041e\u0442\u043a\u0443\u0434\u0430 \u0443\u0437\u043d\u0430\u043b\u0438: ",t.advertising),r.a.createElement("li",null,"\u0424\u043e\u0440\u043c\u0430 \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0417\u0430\u043a\u0430\u0437\u0430 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.completedAt)),r.a.createElement("li",null,"\u0421\u0440\u043e\u043a \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0438 (\u0432 \u043c\u0435\u0441\u044f\u0446\u0430\u0445): ",t.guarantee),r.a.createElement("li",null,"\u0420\u0430\u0441\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 (\u0437\u0430\u043a\u0430\u0437 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u043b\u0438 ",t.disinfectors.length," \u0447\u0435\u043b):"),r.a.createElement("ul",{className:"font-bold mb-0"},l),"corporate"===t.clientType?r.a.createElement(r.a.Fragment,null,"cash"===t.paymentMethod?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u041d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",t.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(t.cost/t.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u0411\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),r.a.createElement("li",null,"\u041d\u043e\u043c\u0435\u0440 \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430: ",t.contractNumber))):"","individual"===t.clientType?r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",t.cost.toLocaleString()," \u0421\u0443\u043c (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(t.cost/t.disinfectors.length).toFixed(2).toLocaleString()," \u0421\u0443\u043c)"):"",t.userCreated?r.a.createElement("li",null,"\u0414\u043e\u0431\u0430\u0432\u0438\u043b \u0417\u0430\u043a\u0430\u0437: ",t.userCreated.occupation," ",t.userCreated.name):"",t.userAcceptedOrder?r.a.createElement("li",null,"\u0417\u0430\u043a\u0430\u0437 \u043f\u0440\u0438\u043d\u044f\u043b: ",t.userAcceptedOrder.occupation," ",t.userAcceptedOrder.name):"",t.operatorDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),t.operatorConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.operatorCheckedAt),")"),r.a.createElement("li",null,"\u0411\u0430\u043b\u043b (0-5): ",t.score),r.a.createElement("li",null,"\u041e\u0442\u0437\u044b\u0432 \u041a\u043b\u0438\u0435\u043d\u0442\u0430: ",t.clientReview?t.clientReview:"\u041d\u0435\u0442 \u041e\u0442\u0437\u044b\u0432\u0430")):r.a.createElement("li",{className:"text-danger"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.operatorCheckedAt),")")):r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443")),r.a.createElement("div",{className:"btn-group mt-3"},r.a.createElement("button",{className:"btn btn-danger mr-2",onClick:function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437?")&&e.adminConfirmsOrderQuery(t._id,"false")}},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")),r.a.createElement("div",{className:"btn-group mt-3"},r.a.createElement("button",{className:"btn btn-success mr-2",onClick:function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437?")&&e.adminConfirmsOrderQuery(t._id,"true")}},"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c")),r.a.createElement("div",{className:"btn-group mt-3"},r.a.createElement("button",{className:"btn btn-dark mr-2",onClick:function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437 \u043e\u0431\u0440\u0430\u0442\u043d\u043e \u0434\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0443?")&&e.adminConfirmsOrderQuery(t._id,"back",t.disinfectors)}},"\u041e\u0431\u0440\u0430\u0442\u043d\u043e")),t.failed?"":r.a.createElement("div",{className:"btn-group mt-3"},r.a.createElement("button",{className:"btn btn-secondary mr-2",onClick:function(){return e.goToAddNewForm(t)}},"\u041a\u043b\u0438\u0435\u043d\u0442 \u041d\u0435\u0434\u043e\u0432\u043e\u043b\u0435\u043d")))))});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h1",{className:"text-center"},"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435 \u0417\u0430\u043a\u0430\u0437\u044b")),r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.props.getQueriesForAdmin()}},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u044b")),t))}}]),t}(n.Component),Mt=Object(S.b)(function(e){return{auth:e.auth,order:e.order,admin:e.admin,errors:e.errors}},{getQueriesForAdmin:pe,adminConfirmsOrderQuery:he})(Object(p.g)(At)),kt=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.admin.orderQueries&&0!==this.props.admin.orderQueries.length||this.props.getQueriesForAdmin()}},{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid"},this.props.admin.loadingOrderQueries?r.a.createElement(me,null):r.a.createElement(Mt,null))}}]),t}(n.Component),wt=Object(S.b)(function(e){return{auth:e.auth,order:e.order,admin:e.admin,errors:e.errors}},{getQueriesForAdmin:pe})(Object(p.g)(kt)),jt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={array:[{}],currentMaterials:[],materials:[{material:"",amount:0,unit:""}],disinfector:""},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.changeSelect=function(e){var t=e.target.name.split("-")[1],n=a.state.materials;n[t].material=e.target.value.split("+")[0],n[t].unit=e.target.value.split("+")[1],a.setState({materials:n})},a.changeAmount=function(e){var t=e.target.name.split("-")[1],n=a.state.materials;n[t].amount=Number(e.target.value),a.setState({materials:n})},a.addMaterial=function(e){e.preventDefault();var t=a.state.array;t.push({});var n=a.state.materials;n.push({material:"",amount:0,unit:""}),a.setState({array:t,materials:n})},a.deleteMaterial=function(e){e.preventDefault();var t=a.state.array;t.pop();var n=a.state.materials;n.pop(),a.setState({array:t,materials:n})},a.onSubmit=function(e){e.preventDefault();var t=0,n=0,r=0;if(a.state.materials.forEach(function(e){""===e.material&&t++,e.amount<=0&&r++,a.state.currentMaterials.forEach(function(t){e.material===t.material&&e.unit===t.unit&&e.amount>t.amount&&n++})}),t>0)alert('\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u041f\u043e\u043b\u0435 "\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0438 \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"');else if(r>0)alert("\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043d\u0443\u043b\u0435\u043c \u0438\u043b\u0438 \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u0430\u043c \u0447\u0438\u0441\u043b\u043e\u043c");else if(n>0)alert("\u0423 \u0432\u0430\u0441 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432");else{var l={disinfector:a.state.disinfector,admin:a.props.auth.user.id,materials:a.state.materials};a.props.addMaterialToDisinfector(l,a.props.auth.user.occupation,a.props.history),a.props.getAllDisinfectorsAndSubadmins()}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getCurrentMaterials(),this.props.getAllDisinfectorsAndSubadmins(),window.scrollTo({top:0})}},{key:"componentWillReceiveProps",value:function(e){this.setState({currentMaterials:e.admin.currentMaterials.materials})}},{key:"render",value:function(){var e=this,t=this.props.admin.disinfectors.map(function(e,t){var a=ze(Object(j.a)(e.materials)).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount," ",e.unit)});return r.a.createElement("div",{className:"col-lg-4 col-md-6",key:t},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("h4",{className:"text-center"},e.occupation," ",e.name),r.a.createElement("p",{className:"mb-0"},"\u0418\u043c\u0435\u0435\u0442\u0441\u044f \u0432 \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432:"),r.a.createElement("ul",null,a)))))}),a=[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0435\u0449\u0435\u0441\u0442\u0432\u043e --",value:"",unit:""}];at.a.forEach(function(e){a.push({label:e.material,value:e.material,unit:e.unit})});var n=a.map(function(e,t){return r.a.createElement("option",{value:"".concat(e.value,"+").concat(e.unit),key:t},e.label," ",e.unit)}),l=this.state.array.map(function(t,a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{name:"consumption-".concat(a),className:"form-control",onChange:e.changeSelect,required:!0},n)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"quantity-".concat(a)},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e:"),r.a.createElement("input",{type:"number",step:"0.001",className:"form-control",name:"quantity-".concat(a),onChange:e.changeAmount,required:!0})),r.a.createElement("div",{className:"border-bottom-red"}))}),c=[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f --",value:""}];this.props.admin.disinfectors.forEach(function(e){return c.push({label:"".concat(e.occupation," ").concat(e.name),value:e._id})});var s=ze(Object(j.a)(this.state.currentMaterials)).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount," ",e.unit)});return r.a.createElement("div",{className:"container-fluid"},this.props.admin.loadingCurMat?r.a.createElement(me,null):r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-lg-6 col-md-8 m-auto"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h3",{className:"text-center"},"\u0421\u0435\u0439\u0447\u0430\u0441 \u0438\u043c\u0435\u0435\u0442\u0441\u044f \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0435"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},s,r.a.createElement("li",null,"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},this.props.admin.currentMaterials.lastUpdated))))))),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",{className:"text-center"},"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"))),this.props.admin.loadingDisinfectors?r.a.createElement(me,null):r.a.createElement("div",{className:"row mt-2"},t),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-lg-6 col-md-8 mx-auto"},r.a.createElement("div",{className:"card mt-2"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h2",{className:"text-center"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"disinfector"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:"),this.props.admin.loadingDisinfectors?r.a.createElement("p",null,"\u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u044b \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f..."):r.a.createElement("select",{value:this.state.disinfector,name:"disinfector",className:"form-control",onChange:this.onChange,required:!0},c.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}))),r.a.createElement("label",{htmlFor:"consumption"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0438 \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e:"),l,this.state.array.length<at.a.length?r.a.createElement("button",{className:"btn btn-primary mr-2 mt-2",onClick:this.addMaterial},r.a.createElement("i",{className:"fas fa-plus"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"):"",1===this.state.array.length?"":r.a.createElement("button",{className:"btn btn-danger mt-2",onClick:this.deleteMaterial},r.a.createElement("i",{className:"fas fa-trash-alt"})," \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"),r.a.createElement("div",{className:"border-bottom"}),r.a.createElement("button",{type:"submit",className:"btn btn-success"},r.a.createElement("i",{className:"fas fa-plus-circle"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e")))))))}}]),t}(n.Component),Yt=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,errors:e.errors}},{getAllDisinfectorsAndSubadmins:Ee,getCurrentMaterials:fe,addMaterialToDisinfector:function(e,t,a){return function(n){g.a.post("/admin/add-materials-to-disinfector",{object:e}).then(function(e){return n({type:"ADD_MAT_DISINFECTOR",payload:e.data}),a.push("/".concat(t))}).catch(function(e){return n({type:y,payload:e})})}}})(Object(p.g)(jt)),It=a(42),Ft=a.n(It),xt=function(e){var t=e.name,a=e.placeholder,n=e.value,l=e.label,c=e.error,s=e.info,o=e.type,i=e.onChange,m=e.disabled,d=e.required;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t},l),r.a.createElement("input",{type:o,className:Ft()("form-control",{"is-invalid":c}),placeholder:a,name:t,value:n,onChange:i,disabled:m,required:d}),s&&r.a.createElement("small",{className:"form-text text-muted"},s),c&&r.a.createElement("div",{className:"invalid-feedback"},c))};xt.defaultProps={type:"text"};var Tt=xt,Rt=function(e){var t=e.name,a=e.placeholder,n=e.value,l=e.error,c=e.info,s=e.onChange;return r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{className:Ft()("form-control",{"is-invalid":l}),placeholder:a,name:t,value:n,onChange:s}),c&&r.a.createElement("small",{className:"form-text text-muted"},c),l&&r.a.createElement("div",{className:"invalid-feedback"},l))},_t=a(28),Ht=a.n(_t),Lt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={_id:"",disinfectorId:"",userAcceptedOrder:"",clientType:"",client:"",clientId:"",address:"",date:"",timeFrom:"",phone:"",hasSecondPhone:!1,phone2:"",typeOfService:[],advertising:"",comment:""},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.onChangeTypes=function(e){var t=Object(j.a)(a.state.typeOfService);t.forEach(function(t){t.type===e.target.value&&(t.selected=e.target.checked)}),a.setState({typeOfService:t})},a.toggleSecondPhone=function(e){e.preventDefault(),a.setState({hasSecondPhone:!a.state.hasSecondPhone})},a.deleteSecondPhone=function(e){e.preventDefault(),a.setState({hasSecondPhone:!1,phone2:""})},a.onSubmit=function(e){e.preventDefault();for(var t=a.state.date.split("-"),n=new Date("".concat(t[1],"-").concat(t[2],"-").concat(t[0]," ").concat(a.state.timeFrom)),r=0,l=0,c=1;c<=12;c++)a.state.phone[c]>="0"&&a.state.phone[c]<="9"&&r++,a.state.phone2[c]>="0"&&a.state.phone2[c]<="9"&&l++;var s="",o=0;if(a.state.typeOfService.forEach(function(e){e.selected&&(1===++o?s+=e.type:s=s+", "+e.type)}),13!==a.state.phone.length||a.state.hasSecondPhone&&13!==a.state.phone2.length)alert("\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c 13 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432. \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 +998XXXXXXXXX");else if("+"!==a.state.phone[0]||a.state.hasSecondPhone&&"+"!==a.state.phone2[0])alert('\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 "+". \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 +998XXXXXXXXX');else if(12!==r||a.state.hasSecondPhone&&12!==l)alert('\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c "+" \u0438 12 \u0446\u0438\u0444\u0440');else if(0===o)alert("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u0437\u0430\u043a\u0430\u0437\u0430");else{var i={_id:a.state._id,disinfectorId:a.state.disinfectorId,userAcceptedOrder:a.state.userAcceptedOrder,clientType:a.state.clientType,client:a.state.client,clientId:a.state.clientId,address:a.state.address,date:a.state.date,dateFrom:n,timeFrom:a.state.timeFrom,phone:a.state.phone,phone2:a.state.phone2,typeOfService:s,advertising:a.state.advertising,comment:a.state.comment};a.props.editOrder(i,a.props.history,a.props.auth.user.occupation)}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getOrderForEdit(this.props.match.params.orderId),this.props.getDisinfectors(),this.props.getCorporateClients(),this.props.getAllUsers()}},{key:"componentWillReceiveProps",value:function(e){if(e.order.orderById){var t=e.order.orderById;t.disinfectorId=M(t.disinfectorId)?"":t.disinfectorId,t.userAcceptedOrder=t.userAcceptedOrder?t.userAcceptedOrder:"",t.clientType=M(t.clientType)?"":t.clientType,t.clientId=M(t.clientId)?"":t.clientId,t.client=M(t.client)?"":t.client,t.address=M(t.address)?"":t.address,t.phone=M(t.phone)?"":t.phone,t.typeOfService=M(t.typeOfService)?"":t.typeOfService,t.advertising=M(t.advertising)?"":t.advertising,t.comment=M(t.comment)?"":t.comment,M(t.phone2)?(this.setState({hasSecondPhone:!1}),t.phone2=""):this.setState({hasSecondPhone:!0});var a,n,r,l=M(t.dateFrom)?"":new Date(t.dateFrom);a=new Date(l).getMonth()<9?"0".concat(new Date(l).getMonth()+1):"".concat(new Date(l).getMonth()+1),n=new Date(l).getDate()<10?"0".concat(new Date(l).getDate()):new Date(l).getDate();var c="".concat(new Date(l).getFullYear(),"-").concat(a,"-").concat(n);r=new Date(l).getHours()<10?"0".concat(new Date(l).getHours(),":00"):"".concat(new Date(l).getHours(),":00");var s=[];Ht.a.forEach(function(e){s.push({type:e.value,selected:!1})});var o=t.typeOfService.split(",");s.forEach(function(e){o.forEach(function(t){e.type===t.trim()&&(e.selected=!0)})}),this.setState({_id:t._id,disinfectorId:t.disinfectorId._id,userAcceptedOrder:t.userAcceptedOrder._id,clientType:t.clientType,client:t.client,clientId:t.clientId._id,address:t.address,date:c,timeFrom:r,phone:t.phone,phone2:t.phone2,typeOfService:s,advertising:t.advertising,comment:t.comment})}}},{key:"render",value:function(){var e=this,t=this.props.order.allUsers?this.props.order.allUsers.sort(function(e,t){return e.name-t.name}):[],a=[{label:"-- \u041a\u0442\u043e \u043f\u0440\u0438\u043d\u044f\u043b \u0437\u0430\u043a\u0430\u0437? --",value:""}];t.forEach(function(e){a.push({label:"".concat(e.occupation,", ").concat(e.name),value:e._id})});var n=t.filter(function(e){return"disinfector"===e.occupation||"subadmin"===e.occupation}),l=[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0434\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430 --",value:""}];n.forEach(function(e){return l.push({label:"".concat(e.name,", ").concat(e.occupation),value:e._id})});var c=[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430 --",value:""}];this.props.order.corporateClients.sort(function(e,t){return e.name.toUpperCase()<t.name.toUpperCase()?-1:e.name.toUpperCase()>t.name.toUpperCase()?1:0}).forEach(function(e){c.push({label:e.name,value:e._id})});var s=[{label:"-- \u041e\u0442\u043a\u0443\u0434\u0430 \u0443\u0437\u043d\u0430\u043b\u0438 \u043e \u043d\u0430\u0441? --",value:""}];Et.a.forEach(function(e){s.push({label:e.label,value:e.value})});var o=this.state.typeOfService.map(function(t,a){return r.a.createElement("div",{className:"form-check",key:a},r.a.createElement("label",{className:"form-check-label"},t.selected?r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"checkbox",defaultChecked:"checked",className:"form-check-input",onChange:e.onChangeTypes,value:t.type}),t.type):r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"checkbox",className:"form-check-input",onChange:e.onChangeTypes,value:t.type}),t.type)))});return r.a.createElement(r.a.Fragment,null,this.props.order.loading?r.a.createElement(me,null):r.a.createElement("div",{className:"container edit-order mt-4"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h2",{className:"display-5 text-center"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0417\u0430\u043a\u0430\u0437"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"clientType"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0422\u0438\u043f \u041a\u043b\u0438\u0435\u043d\u0442\u0430:"),r.a.createElement("select",{className:"form-control",value:this.state.clientType,name:"clientType",onChange:this.onChange,required:!0},[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u043a\u043b\u0438\u0435\u043d\u0442\u0430 --",value:""},{label:"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439",value:"corporate"},{label:"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439",value:"individual"}].map(function(e,t){return r.a.createElement("option",{key:t,value:e.value},e.label)}))),"corporate"===this.state.clientType?r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"clientId"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u041a\u043b\u0438\u0435\u043d\u0442\u0430:"),r.a.createElement("select",{className:"form-control",value:this.state.clientId,name:"clientId",onChange:this.onChange,required:!0},c.map(function(e,t){return r.a.createElement("option",{key:t,value:e.value},e.label)}))):"",r.a.createElement(Tt,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0418\u043c\u044f \u041a\u043b\u0438\u0435\u043d\u0442\u0430:",type:"text",name:"client",value:this.state.client,onChange:this.onChange,required:!0}),r.a.createElement(Tt,{label:"\u0410\u0434\u0440\u0435\u0441",type:"text",name:"address",value:this.state.address,onChange:this.onChange,required:!0}),r.a.createElement(Tt,{label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",type:"phone",name:"phone",value:this.state.phone,onChange:this.onChange,required:!0}),this.state.hasSecondPhone?r.a.createElement(r.a.Fragment,null,r.a.createElement(Tt,{label:"\u0414\u0440\u0443\u0433\u043e\u0439 \u041d\u043e\u043c\u0435\u0440 \u0422\u0435\u043b\u0435\u0444\u043e\u043d\u0430",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043f\u0430\u0441\u043d\u043e\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",type:"phone",name:"phone2",value:this.state.phone2,onChange:this.onChange,required:!0}),r.a.createElement("button",{className:"btn btn-danger mb-2",onClick:this.deleteSecondPhone},r.a.createElement("i",{className:"fas fa-minus-circle"})," \u0423\u0431\u0440\u0430\u0442\u044c \u0437\u0430\u043f\u0430\u0441\u043d\u043e\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430")):r.a.createElement("button",{className:"btn btn-success mb-3",onClick:this.toggleSecondPhone},r.a.createElement("i",{className:"fas fa-plus-circle"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0439 \u043d\u043e\u043c\u0435\u0440"),r.a.createElement(Tt,{label:"\u0414\u0430\u0442\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430",name:"date",type:"date",value:this.state.date,onChange:this.onChange,required:!0}),r.a.createElement(Tt,{label:"\u0412\u0440\u0435\u043c\u044f (\u0447\u0430\u0441\u044b:\u043c\u0438\u043d\u0443\u0442\u044b:AM/PM) C",name:"timeFrom",type:"time",value:this.state.timeFrom,onChange:this.onChange,required:!0}),r.a.createElement("div",{className:"border-bottom"}),r.a.createElement("label",{htmlFor:""},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u0437\u0430\u043a\u0430\u0437\u0430 (\u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e):"),o,r.a.createElement("div",{className:"border-bottom"}),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"advertising"},"\u041e\u0442\u043a\u0443\u0434\u0430 \u0423\u0437\u043d\u0430\u043b\u0438:"),r.a.createElement("select",{className:"form-control",value:this.state.advertising,name:"advertising",onChange:this.onChange,required:!0},s.map(function(e,t){return r.a.createElement("option",{key:t,value:e.value},e.label)}))),this.props.order.loading?r.a.createElement("p",null,"\u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u044b \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f..."):r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"disinfectorId"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430:"),r.a.createElement("select",{className:"form-control",value:this.state.disinfectorId,name:"disinfectorId",onChange:this.onChange,required:!0},l.map(function(e,t){return r.a.createElement("option",{key:t,value:e.value},e.label)}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"userAcceptedOrder"},"\u041a\u0442\u043e \u043f\u0440\u0438\u043d\u044f\u043b \u0437\u0430\u043a\u0430\u0437:"),r.a.createElement("select",{className:"form-control",value:this.state.userAcceptedOrder,name:"userAcceptedOrder",onChange:this.onChange,required:!0},a.map(function(e,t){return r.a.createElement("option",{key:t,value:e.value},e.label)}))),r.a.createElement(Rt,{name:"comment",placeholder:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 (\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043d\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435)",value:this.state.comment,onChange:this.onChange,required:!0}),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fas fa-edit"})," \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"))))))))}}]),t}(n.Component),Bt=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,order:e.order,errors:e.errors}},{getDisinfectors:function(){return function(e){e(Re()),g.a.post("/get-users",{object:{method:"role",roles:["disinfector","subadmin"]}}).then(function(t){e({type:"GET_DISINFECTORS",payload:t.data})}).catch(function(t){return e({type:y,payload:t})})}},getAllUsers:je,getCorporateClients:we,getOrderForEdit:function(e){return function(t){t(Re()),g.a.post("/order/get-order-by-id",{id:e}).then(function(e){return t({type:"GET_ORDER_BY_ID",payload:e.data})}).catch(function(e){return t({type:y,payload:e.response.data})})}},editOrder:function(e,t,a){return function(n){g.a.post("/order/edit",{order:e}).then(function(e){return t.push("/".concat(a))}).catch(function(e){return n({type:y,payload:e})})}}})(Object(p.g)(Lt)),Ut=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={array:[{}],currentMaterials:[],materials:[{material:"",amount:0,unit:""}]},a.changeSelect=function(e){var t=e.target.name.split("-")[1],n=a.state.materials;n[t].material=e.target.value.split("+")[0],n[t].unit=e.target.value.split("+")[1],a.setState({materials:n})},a.changeAmount=function(e){var t=e.target.name.split("-")[1],n=a.state.materials;n[t].amount=Number(e.target.value),a.setState({materials:n})},a.addMaterial=function(e){e.preventDefault();var t=a.state.array;t.push({});var n=a.state.materials;n.push({material:"",amount:0,unit:""}),a.setState({array:t,materials:n})},a.deleteMaterial=function(e){e.preventDefault();var t=a.state.array;t.pop();var n=a.state.materials;n.pop(),a.setState({array:t,materials:n})},a.onSubmit=function(e){e.preventDefault();var t=0,n=0;if(a.state.materials.forEach(function(e){""===e.material&&t++,e.amount<=0&&n++}),t>0)alert('\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u041f\u043e\u043b\u0435 "\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0438 \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"');else if(n>0)alert("\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043d\u0443\u043b\u0435\u043c \u0438\u043b\u0438 \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u0430\u043c \u0447\u0438\u0441\u043b\u043e\u043c");else{var r={admin:a.props.auth.user.id,materials:a.state.materials};a.props.addMatComing(r,a.props.history)}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getCurrentMaterials()}},{key:"componentWillReceiveProps",value:function(e){this.setState({currentMaterials:e.admin.currentMaterials.materials})}},{key:"render",value:function(){var e=this,t=[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0435\u0449\u0435\u0441\u0442\u0432\u043e --",value:"",unit:""}];at.a.forEach(function(e){t.push({label:e.material,value:e.material,unit:e.unit})});var a=t.map(function(e,t){return r.a.createElement("option",{value:"".concat(e.value,"+").concat(e.unit),key:t},e.label," ",e.unit)}),n=this.state.array.map(function(t,n){return r.a.createElement(r.a.Fragment,{key:n},r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{name:"consumption-".concat(n),className:"form-control",onChange:e.changeSelect,required:!0},a)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"quantity-".concat(n)},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e:"),r.a.createElement("input",{type:"number",step:"0.001",className:"form-control",name:"quantity-".concat(n),onChange:e.changeAmount,required:!0})),r.a.createElement("div",{className:"border-bottom-red"}))}),l=ze(Object(j.a)(this.state.currentMaterials)).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount," ",e.unit)});return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-lg-6 col-md-8"},this.props.admin.loadingCurMat?r.a.createElement(me,null):r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h3",{className:"text-center"},"\u0421\u0435\u0439\u0447\u0430\u0441 \u0438\u043c\u0435\u0435\u0442\u0441\u044f \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0435"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},l,r.a.createElement("li",{className:"mt-2"},"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},this.props.admin.currentMaterials.lastUpdated)),r.a.createElement(u.b,{to:"/admin/set-current-materials",className:"btn btn-warning mt-2"},r.a.createElement("i",{className:"fas fa-marker"})," \u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0435"))))),r.a.createElement("div",{className:"col-lg-6 col-md-8"},r.a.createElement("div",{className:"card mt-2"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",{className:"text-center"},"\u041f\u0440\u0438\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("label",{htmlFor:"consumption"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0438 \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e:"),n,this.state.array.length<at.a.length?r.a.createElement("button",{className:"btn btn-primary mr-2 mt-2",onClick:this.addMaterial},r.a.createElement("i",{className:"fas fa-plus"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"):"",1===this.state.array.length?"":r.a.createElement("button",{className:"btn btn-danger mt-2",onClick:this.deleteMaterial},r.a.createElement("i",{className:"fas fa-trash-alt"})," \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"),r.a.createElement("div",{className:"border-bottom"}),r.a.createElement("button",{type:"submit",className:"btn btn-success"},r.a.createElement("i",{className:"fas fa-plus-circle"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u0438\u0445\u043e\u0434 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432")))))))}}]),t}(n.Component),Gt=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,errors:e.errors}},{getCurrentMaterials:fe,addMatComing:function(e,t){return function(a){g.a.post("/admin/add-mat-coming",{object:e}).then(function(e){a({type:"UPDATE_MAT_COMING",payload:e.data}),t.push("/admin")}).catch(function(e){return a({type:y,payload:e})})}}})(Object(p.g)(Ut)),qt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={comings:a.props.admin.materialComing},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.comings,t=[];at.a.forEach(function(e){t.push({material:e.material,amount:0,unit:e.unit})}),e.forEach(function(e){e.materials.forEach(function(e){t.forEach(function(t){e.material===t.material&&e.unit===t.unit&&(t.amount+=e.amount)})})});var a=(t=ze(t)).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)}),n=e.map(function(e,t){var a=e.materials.map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)});return r.a.createElement("div",{className:"col-lg-4 col-md-6",key:t},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("li",null,"\u0410\u0434\u043c\u0438\u043d: ",e.admin.name),r.a.createElement("li",null,"\u0414\u0430\u0442\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.createdAt)),r.a.createElement("li",null,"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b:"),r.a.createElement("ul",null,a)))))});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-5 col-md-7 m-auto"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h4",{className:"text-center"},"\u041e\u0431\u0449\u0438\u0439 \u041f\u0440\u0438\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0437\u0430 \u044d\u0442\u043e\u0442 \u043f\u0435\u0440\u0438\u043e\u0434:"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},a))))),r.a.createElement("div",{className:"row mt-3"},n))}}]),t}(n.Component),Qt=Object(S.b)(function(e){return{auth:e.auth,order:e.order,admin:e.admin,errors:e.errors}})(Object(p.g)(qt)),Wt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={month:"",year:"",headingMonth:"",headingYear:"",hoverRange:void 0,selectedDays:[]},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.getMonthStats=function(e){e.preventDefault();var t={type:"month",month:Number(a.state.month),year:Number(a.state.year)};a.props.getMaterialComingEvents(t),a.setState({headingMonth:a.state.month,headingYear:a.state.year})},a.getSpecificMonthStats=function(e){var t=Je(e),n=t.month,r=t.year,l={type:"month",month:n,year:r};a.props.getMaterialComingEvents(l),a.setState({headingMonth:n,headingYear:r})},a.handleDayChange=function(e){var t={type:"week",days:ot(it(e).from)};a.props.getMaterialComingEvents(t),a.setState({selectedDays:ot(it(e).from)})},a.handleDayEnter=function(e){a.setState({hoverRange:it(e)})},a.handleDayLeave=function(){a.setState({hoverRange:void 0})},a.handleWeekClick=function(e,t,n){var r={type:"week",days:ot(it(t[0]).from)};a.props.getMaterialComingEvents(r),a.setState({selectedDays:ot(it(t[0]).from)})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=(new Date).getMonth(),t=(new Date).getFullYear(),a={type:"month",month:Number(e),year:Number(t)};this.props.getMaterialComingEvents(a),this.props.getAllDisinfectorsAndSubadmins(),this.setState({headingMonth:e,headingYear:t})}},{key:"render",value:function(){var e=this,t=Ve(),a=t.monthLabels,n=t.yearLabels.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),l=a.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),c=this.state,s=c.hoverRange,o=c.selectedDays,i=o.length>0,m={hoverRange:s,selectedRange:i&&{from:o[0],to:o[6]},hoverRangeStart:s&&s.from,hoverRangeEnd:s&&s.to,selectedRangeStart:i&&o[0],selectedRangeEnd:i&&o[6]};return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-2"},r.a.createElement("form",{onSubmit:this.getMonthStats,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u041f\u0440\u0438\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u043f\u043e \u043c\u0435\u0441\u044f\u0446\u0430\u043c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"year"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0413\u043e\u0434:")),r.a.createElement("select",{name:"year",className:"form-control",onChange:this.onChange,required:!0},n)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"month"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041c\u0435\u0441\u044f\u0446:")),r.a.createElement("select",{name:"month",className:"form-control",onChange:this.onChange,required:!0},l)),r.a.createElement("button",{type:"submit",className:"btn btn-success mr-1 mt-1"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"),r.a.createElement("button",{type:"button",className:"btn btn-danger mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("current")}},"\u042d\u0442\u043e\u0442 \u043c\u0435\u0441\u044f\u0446"),r.a.createElement("button",{type:"button",className:"btn btn-primary mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("previous")}},"\u041f\u0440\u043e\u0448\u043b\u044b\u0439 \u043c\u0435\u0441\u044f\u0446"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 ml-auto weekly-stats mt-2"},r.a.createElement("div",{className:"SelectedWeekExample form-bg font-weight-bold"},r.a.createElement("h4",{className:"text-center"},"\u041f\u0440\u0438\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u043f\u043e \u043d\u0435\u0434\u0435\u043b\u044f\u043c"),r.a.createElement(dt.a,{selectedDays:o,showWeekNumbers:!0,showOutsideDays:!0,modifiers:m,firstDayOfWeek:1,onDayClick:this.handleDayChange,onDayMouseEnter:this.handleDayEnter,onDayMouseLeave:this.handleDayLeave,onWeekClick:this.handleWeekClick})))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},"week"===this.props.admin.addMatEventsMethod?r.a.createElement("h3",{className:"text-center pl-3 pr-3"},"\u041d\u0435\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u041f\u0440\u0438\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0437\u0430 ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[0])," - ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[6])):r.a.createElement("h3",{className:"text-center pl-3 pr-3"},"\u041c\u0435\u0441\u044f\u0447\u043d\u044b\u0439 \u041f\u0440\u0438\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0437\u0430 ",Ke.a[this.state.headingMonth],", ",this.state.headingYear))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},this.props.admin.loadingStats?r.a.createElement(me,null):r.a.createElement(Qt,null))))}}]),t}(n.Component),Pt=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,errors:e.errors}},{getMaterialComingEvents:function(e){return function(t){t(Se()),g.a.post("/admin/get-mat-coming",{object:e}).then(function(a){return"month"===e.type?t({type:"MAT_COMING_MONTH",payload:a.data}):"week"===e.type?t({type:"MAT_COMING_WEEK",payload:a.data}):void 0}).catch(function(e){return t({type:y,payload:e})})}},getAllDisinfectorsAndSubadmins:Ee})(Object(p.g)(Wt)),Zt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={events:a.props.admin.addMatEvents},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.events,t=this.props.admin.disinfectors,a=[];at.a.forEach(function(e){a.push({material:e.material,amount:0,unit:e.unit})});var n=[];t.forEach(function(e){return n.push({_id:e._id,name:e.name,occupation:e.occupation,events:[],received:at.a.map(function(e){return{material:e.material,amount:0,unit:e.unit}})})}),a.forEach(function(t){e.forEach(function(e){e.materials.forEach(function(e){e.material===t.material&&e.unit===t.unit&&(t.amount+=e.amount)})})}),e.forEach(function(e){n.forEach(function(t){e.disinfector&&e.disinfector._id.toString()===t._id.toString()&&e.disinfector.name===t.name&&(t.events.push(e),t.received.forEach(function(t){e.materials.forEach(function(e){e.material!==t.material||e.unit!==t.unit||(t.amount+=e.amount)})}))})});var l=(a=ze(a)).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)}),c=n.map(function(e,t){e.received=ze(e.received);var a=e.received.map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)}),n=e.events.map(function(e,t){var a=e.materials.map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)});return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("div",{className:"col-lg-4 col-md-6",key:t},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("li",null,"\u041a\u043e\u0433\u0434\u0430 \u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043e: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.createdAt)),r.a.createElement("li",null,"\u041a\u0442\u043e \u0440\u0430\u0437\u0434\u0430\u043b: ",e.admin.occupation," ",e.admin.name),r.a.createElement("p",{className:"mb-0"},"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b"),r.a.createElement("ul",null,a))))))});return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("div",{className:"border-between-disinfectors mt-3"}),r.a.createElement("div",{className:"border-between-disinfectors mt-1"}),r.a.createElement("h3",{className:"text-center mt-3"},e.occupation," ",e.name),0===e.events.length?r.a.createElement("h4",null,"\u0423 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435\u0442 \u0440\u0430\u0437\u0434\u0430\u0447"):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h4",{className:"text-center"},"\u0412\u0441\u0435\u0433\u043e ",e.name," \u041f\u043e\u043b\u0443\u0447\u0438\u043b \u0437\u0430 \u044d\u0442\u043e\u0442 \u043f\u0435\u0440\u0438\u043e\u0434:"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},a))))),r.a.createElement("div",{className:"row mt-3"},n)))});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h4",{className:"text-center"},"\u041e\u0431\u0449\u0430\u044f \u0420\u0430\u0437\u0434\u0430\u0447\u0430 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0437\u0430 \u044d\u0442\u043e\u0442 \u043f\u0435\u0440\u0438\u043e\u0434:"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},l))))),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0420\u0430\u0437\u0434\u0430\u0447\u0430 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c"),c)))}}]),t}(n.Component),Xt=Object(S.b)(function(e){return{auth:e.auth,order:e.order,admin:e.admin,errors:e.errors}})(Object(p.g)(Zt)),Kt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={month:"",year:"",headingMonth:"",headingYear:"",hoverRange:void 0,selectedDays:[]},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.getMonthStats=function(e){e.preventDefault();var t={type:"month",month:Number(a.state.month),year:Number(a.state.year)};a.props.getAddMaterialEvents(t),a.setState({headingMonth:a.state.month,headingYear:a.state.year})},a.getSpecificMonthStats=function(e){var t=Je(e),n=t.month,r=t.year,l={type:"month",month:n,year:r};a.props.getAddMaterialEvents(l),a.setState({headingMonth:n,headingYear:r})},a.handleDayChange=function(e){var t={type:"week",days:ot(it(e).from)};a.props.getAddMaterialEvents(t),a.setState({selectedDays:ot(it(e).from)})},a.handleDayEnter=function(e){a.setState({hoverRange:it(e)})},a.handleDayLeave=function(){a.setState({hoverRange:void 0})},a.handleWeekClick=function(e,t,n){var r={type:"week",days:ot(it(t[0]).from)};a.props.getAddMaterialEvents(r),a.setState({selectedDays:ot(it(t[0]).from)})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=(new Date).getMonth(),t=(new Date).getFullYear(),a={type:"month",month:Number(e),year:Number(t)};this.props.getAddMaterialEvents(a),this.props.getAllDisinfectorsAndSubadmins(),this.setState({headingMonth:Number(e),headingYear:Number(t)})}},{key:"render",value:function(){var e=this,t=Ve(),a=t.monthLabels,n=t.yearLabels.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),l=a.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),c=this.state,s=c.hoverRange,o=c.selectedDays,i=o.length>0,m={hoverRange:s,selectedRange:i&&{from:o[0],to:o[6]},hoverRangeStart:s&&s.from,hoverRangeEnd:s&&s.to,selectedRangeStart:i&&o[0],selectedRangeEnd:i&&o[6]};return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-2"},r.a.createElement("form",{onSubmit:this.getMonthStats,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u0420\u0430\u0437\u0434\u0430\u0447\u0430 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u043f\u043e \u043c\u0435\u0441\u044f\u0446\u0430\u043c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"year"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0413\u043e\u0434:")),r.a.createElement("select",{name:"year",className:"form-control",onChange:this.onChange,required:!0},n)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"month"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041c\u0435\u0441\u044f\u0446:")),r.a.createElement("select",{name:"month",className:"form-control",onChange:this.onChange,required:!0},l)),r.a.createElement("button",{type:"submit",className:"btn btn-success mr-1 mt-1"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"),r.a.createElement("button",{type:"button",className:"btn btn-danger mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("current")}},"\u042d\u0442\u043e\u0442 \u043c\u0435\u0441\u044f\u0446"),r.a.createElement("button",{type:"button",className:"btn btn-primary mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("previous")}},"\u041f\u0440\u043e\u0448\u043b\u044b\u0439 \u043c\u0435\u0441\u044f\u0446"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 ml-auto weekly-stats mt-2"},r.a.createElement("div",{className:"SelectedWeekExample form-bg font-weight-bold"},r.a.createElement("h4",{className:"text-center"},"\u0420\u0430\u0437\u0434\u0430\u0447\u0430 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u043f\u043e \u043d\u0435\u0434\u0435\u043b\u044f\u043c"),r.a.createElement(dt.a,{selectedDays:o,showWeekNumbers:!0,showOutsideDays:!0,modifiers:m,firstDayOfWeek:1,onDayClick:this.handleDayChange,onDayMouseEnter:this.handleDayEnter,onDayMouseLeave:this.handleDayLeave,onWeekClick:this.handleWeekClick})))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},"week"===this.props.admin.addMatEventsMethod?r.a.createElement("h3",{className:"text-center pl-3 pr-3"},"\u041d\u0435\u0434\u0435\u043b\u044c\u043d\u0430\u044f \u0420\u0430\u0437\u0434\u0430\u0447\u0430 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0437\u0430 ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[0])," - ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[6])):r.a.createElement("h3",{className:"text-center pl-3 pr-3"},"\u041c\u0435\u0441\u044f\u0447\u043d\u0430\u044f \u0420\u0430\u0437\u0434\u0430\u0447\u0430 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0437\u0430 ",Ke.a[this.state.headingMonth],", ",this.state.headingYear))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},this.props.admin.loadingAddMatEvents?r.a.createElement(me,null):r.a.createElement(Xt,null))))}}]),t}(n.Component),Vt=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,errors:e.errors}},{getAddMaterialEvents:function(e){return function(t){t(Ae()),g.a.post("/admin/get-add-material-events",{object:e}).then(function(a){return"month"===e.type?t({type:"GET_ADD_MAT_EVENTS_MONTH",payload:a.data}):"week"===e.type?t({type:"GET_ADD_MAT_EVENTS_WEEK",payload:a.data}):void 0}).catch(function(e){return t({type:y,payload:e})})}},getAllDisinfectorsAndSubadmins:Ee})(Object(p.g)(Kt)),Jt=function(e){var t=e.name,a=e.value,n=e.error,l=e.info,c=e.onChange,s=e.options.map(function(e){return r.a.createElement("option",{key:e.label,value:e.value},e.label)});return r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{className:Ft()("form-control",{"is-invalid":n}),name:t,value:a,onChange:c},s),l&&r.a.createElement("small",{className:"form-text text-muted"},l),n&&r.a.createElement("div",{className:"invalid-feedback"},n))},zt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={type:"",name:"",phone:"",address:"",inn:"",errors:{}},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){if(e.preventDefault(),a.state.type){if("individual"===a.state.type){for(var t=0,n=1;n<=12;n++)a.state.phone[n]>="0"&&a.state.phone[n]<="9"&&t++;if(13!==a.state.phone.length)alert("\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c 13 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432. \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 +998XXXXXXXXX");else if("+"!==a.state.phone[0])alert('\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 "+". \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 +998XXXXXXXXX');else if(12!==t)alert('\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c "+" \u0438 12 \u0446\u0438\u0444\u0440');else{var r={type:a.state.type,name:a.state.name,phone:a.state.phone,address:a.state.address,createdAt:new Date};a.props.addClient(r,a.props.history,a.props.auth.user.occupation)}}else if("corporate"===a.state.type){var l={type:a.state.type,name:a.state.name,inn:a.state.inn,createdAt:new Date};a.props.addClient(l,a.props.history,a.props.auth.user.occupation)}}else alert("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u043a\u043b\u0438\u0435\u043d\u0442\u0430")},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"container create-order mt-4"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",{className:"text-center"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u041a\u043b\u0438\u0435\u043d\u0442\u0430"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(Jt,{name:"type",value:this.state.type,onChange:this.onChange,error:e.type,options:[{label:"-- \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0438\u043f \u043a\u043b\u0438\u0435\u043d\u0442\u0430 --",value:""},{label:"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439",value:"corporate"},{label:"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439",value:"individual"}],required:!0}),r.a.createElement(Tt,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0418\u043c\u044f \u041a\u043b\u0438\u0435\u043d\u0442\u0430",type:"text",name:"name",value:this.state.name,onChange:this.onChange,error:e.name,required:!0}),"corporate"===this.state.type?r.a.createElement(r.a.Fragment,null,r.a.createElement(Tt,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0418\u041d\u041d \u041a\u043b\u0438\u0435\u043d\u0442\u0430",type:"text",name:"inn",value:this.state.inn,onChange:this.onChange,error:e.inn})):"","individual"===this.state.type?r.a.createElement(r.a.Fragment,null,r.a.createElement(Tt,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0422\u0435\u043b \u041d\u043e\u043c\u0435\u0440 \u041a\u043b\u0438\u0435\u043d\u0442\u0430 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 +998XX-XXX-XX-XX (\u0431\u0435\u0437 \u0442\u0438\u0440\u0435)",type:"text",name:"phone",value:this.state.phone,onChange:this.onChange,error:e.phone,required:!0}),r.a.createElement(Tt,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0410\u0434\u0440\u0435\u0441 \u041a\u043b\u0438\u0435\u043d\u0442\u0430",type:"text",name:"address",value:this.state.address,onChange:this.onChange,error:e.address,required:!0})):"",r.a.createElement("button",{type:"submit",className:"btn btn-success"},r.a.createElement("i",{className:"fas fa-plus-circle"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")))))))}}]),t}(n.Component),$t=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,errors:e.errors}},{addClient:function(e,t,a){return function(n){g.a.post("/admin/add-client",{object:e}).then(function(e){return t.push("/".concat(a))}).catch(function(e){return n({type:y,payload:e.response.data})})}}})(Object(p.g)(zt)),ea=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={client:{orders:[]},id:"",type:"",name:"",phone:"",address:"",inn:""},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault();var t={id:a.state.id,type:a.state.type,name:a.state.name,phone:a.state.phone,address:a.state.address,inn:a.state.inn};a.props.editClient(t,a.props.history)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.admin.clientById._id?this.setState({client:this.props.admin.clientById,id:this.props.admin.clientById._id,type:this.props.admin.clientById.type,name:this.props.admin.clientById.name||"",phone:this.props.admin.clientById.phone||"",address:this.props.admin.clientById.address||"",inn:this.props.admin.clientById.inn||""}):this.props.clientById(this.props.match.params.id)}},{key:"componentWillReceiveProps",value:function(e){e.admin.clientById&&this.setState({client:e.admin.clientById,id:e.admin.clientById._id,type:e.admin.clientById.type,name:e.admin.clientById.name||"",phone:e.admin.clientById.phone||"",address:e.admin.clientById.address||"",inn:e.admin.clientById.inn||""})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid"},this.props.admin.loadingClients?r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-12"},r.a.createElement(me,null))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-lg-6 col-md-8 m-auto"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",{className:"display-5 text-center"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u041a\u043b\u0438\u0435\u043d\u0442\u0430"),r.a.createElement("p",{className:"font-bold mb-0"},"\u0422\u0438\u043f \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ","corporate"===this.state.type?"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439":"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"\u0418\u043c\u044f \u041a\u043b\u0438\u0435\u043d\u0442\u0430:"),r.a.createElement("input",{type:"text",name:"name",className:"form-control",onChange:this.onChange,value:this.state.name,required:!0})),"individual"===this.state.type&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"phone"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u041a\u043b\u0438\u0435\u043d\u0442\u0430:"),r.a.createElement("input",{type:"text",name:"phone",className:"form-control",onChange:this.onChange,value:this.state.phone,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"address"},"\u0410\u0434\u0440\u0435\u0441 \u041a\u043b\u0438\u0435\u043d\u0442\u0430:"),r.a.createElement("input",{type:"text",name:"address",className:"form-control",onChange:this.onChange,value:this.state.address,required:!0}))),"corporate"===this.state.type&&r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"inn"},"\u0418\u041d\u041d \u041a\u043b\u0438\u0435\u043d\u0442\u0430:"),r.a.createElement("input",{type:"text",name:"inn",className:"form-control",onChange:this.onChange,value:this.state.inn})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fas fa-edit"})," \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"))))))))}}]),t}(n.Component),ta=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,errors:e.errors}},{clientById:ge,editClient:function(e,t){return function(a){g.a.post("/admin/edit-client",{object:e}).then(function(a){return t.push("/client/".concat(e.id))}).catch(function(e){return a({type:y,payload:e.response.data})})}}})(Object(p.g)(ea)),aa=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={users:[],userId:"",password1:"",password2:""},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.clearState=function(e){a.setState({userId:"",password1:"",password2:""})},a.changePassword=function(e){e.preventDefault();var t=!1,n=!1;if(a.state.password1!==a.state.password2&&(t=!0),(a.state.password1.length<6||a.state.password1.length>30)&&(n=!0),(a.state.password2.length<6||a.state.password2.length>30)&&(n=!0),t)alert("\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442");else if(n)alert("\u0414\u043b\u0438\u043d\u0430 \u043f\u0430\u0440\u043e\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u0438 \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 30 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432");else{var r={userId:a.state.userId,password1:a.state.password1,password2:a.state.password2};a.props.changePassword(r,a.props.history),window.location.reload()}},a.deleteUser=function(e){var t={id:e};a.props.disableUser(t,a.props.history)},a.changeMaterials=function(e){a.props.setUserById(e),a.props.history.push("/admin/set-disinfector-materials/".concat(e._id))},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getAllUsers()}},{key:"componentWillReceiveProps",value:function(e){e.admin.users&&this.setState({users:e.admin.users})}},{key:"render",value:function(){var e=this,t=[{label:"- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f -- ",value:""}],a=this.state.users.map(function(a,n){return t.push({label:"".concat(a.occupation," ").concat(a.name),value:a._id}),r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3",key:n},r.a.createElement("div",{className:"card order"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 pl-0 list-unstyled"},r.a.createElement("li",null,"\u0418\u043c\u044f: ",a.name),r.a.createElement("li",null,"E-mail: ",a.email),r.a.createElement("li",null,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d: ",a.phone),r.a.createElement("li",null,"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c: ",a.occupation),r.a.createElement("li",null,"\u0426\u0432\u0435\u0442 (\u0432 \u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u0435): ",a.color||"--")),r.a.createElement(u.b,{to:"/admin/edit-user/".concat(a._id),className:"btn btn-dark mt-2 mr-2"},r.a.createElement("i",{className:"fas fa-user-edit"})," \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),["subadmin","disinfector"].includes(a.occupation)&&r.a.createElement("button",{className:"btn btn-primary mt-2 mr-2",onClick:function(){return e.changeMaterials(a)}},r.a.createElement("i",{className:"fas fa-syringe"})," \u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b"),r.a.createElement("button",{className:"btn btn-danger mt-2 mr-2",onClick:function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f ".concat(a.occupation," ").concat(a.name,"?"))&&e.deleteUser(a._id)}},r.a.createElement("i",{className:"fas fa-trash-alt"})," \u0423\u0434\u0430\u043b\u0438\u0442\u044c"))))});return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center"},"\u0412\u0441\u0435 \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"))),this.props.admin.loadingUsers?r.a.createElement(me,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-1"},r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{type:"button",className:"btn btn-primary mt-2","data-toggle":"modal","data-target":"#changePassword"},r.a.createElement("i",{className:"fas fa-key"})," \u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),r.a.createElement("div",{className:"modal fade",id:"changePassword"},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("button",{type:"button",className:"close",onClick:this.clearState.bind(this),"data-dismiss":"modal"},"\xd7")),r.a.createElement("div",{className:"modal-body"},r.a.createElement("h4",{className:"modal-title"},r.a.createElement("i",{className:"fas fa-key"})," \u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u041f\u0430\u0440\u043e\u043b\u044c \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),r.a.createElement("form",{onSubmit:this.changePassword},r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{className:"form-control",name:"userId",onChange:this.onChange,value:this.state.userId,required:!0},t.map(function(e,t){return r.a.createElement("option",{key:t,value:e.value},e.label)}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password1"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u041d\u043e\u0432\u044b\u0439 \u041f\u0430\u0440\u043e\u043b\u044c:"),r.a.createElement("input",{type:"password",name:"password1",className:"form-control",onChange:this.onChange,value:this.state.password1,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password2"},"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u041f\u0430\u0440\u043e\u043b\u044c:"),r.a.createElement("input",{type:"password",name:"password2",className:"form-control",onChange:this.onChange,value:this.state.password2,required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-success"},r.a.createElement("i",{className:"fas fa-copyright"})," \u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u041f\u0430\u0440\u043e\u043b\u044c")))))))),r.a.createElement("div",{className:"row mt-2"},a)))}}]),t}(n.Component),na=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,errors:e.errors}},{getAllUsers:je,changePassword:function(e,t){return function(a){g.a.post("/change-password",{object:e}).then(function(){return t.push("/admin/users")}).catch(function(e){return a({type:y,payload:e})})}},disableUser:function(e,t){return function(a){a({type:"REMOVE_DISABLED_USER_FROM_DOM",payload:e.id}),g.a.post("/disable-user",{object:e}).then(function(){return t.push("/admin/users")}).catch(function(e){return a({type:y,payload:e})})}},setUserById:function(e){return function(t){t({type:"GET_USER_BY_ID",payload:e})}}})(Object(p.g)(aa)),ra=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,userId:"",name:"",email:"",phone:"",occupation:"",color:"",birthday:"",married:"",hasChildren:"",children:""},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){var t;e.preventDefault(),"no"===a.state.hasChildren?t=0:"yes"===a.state.hasChildren&&(t=Number(a.state.children));var n={userId:a.state.userId,name:a.state.name,email:a.state.email,phone:a.state.phone,occupation:a.state.occupation,color:a.state.color,birthday:new Date(a.state.birthday),married:"yes"===a.state.married,hasChildren:"yes"===a.state.hasChildren,children:t};a.props.editUser(n,a.props.history)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getUserById(this.props.match.params.userId)}},{key:"componentWillReceiveProps",value:function(e){e.admin.userById&&this.setState({userId:e.admin.userById._id,name:e.admin.userById.name,email:e.admin.userById.email,phone:e.admin.userById.phone,occupation:e.admin.userById.occupation,color:e.admin.userById.color,loading:!1});var t,a,n,r,l,c=e.admin.userById;c.birthday=M(c.birthday)?"":new Date(c.birthday),c.married=M(c.married)?"":c.married,c.hasChildren=M(c.hasChildren)?"":c.hasChildren,c.children=M(c.children)?"":c.children,t=new Date(c.birthday).getMonth()<9?"0".concat(new Date(c.birthday).getMonth()+1):"".concat(new Date(c.birthday).getMonth()+1),a=new Date(c.birthday).getDate()<10?"0".concat(new Date(c.birthday).getDate()):new Date(c.birthday).getDate(),c.birthday&&(n="".concat(new Date(c.birthday).getFullYear(),"-").concat(t,"-").concat(a)),!0===c.married?r="yes":!1===c.married&&(r="no"),!0===c.hasChildren?l="yes":!1===c.hasChildren&&(l="no"),this.setState({birthday:n,married:r,hasChildren:l,children:c.hasChildren?c.children:""})}},{key:"render",value:function(){var e=r.a.createElement("div",{className:"col-lg-6 col-md-8 m-auto"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("li",null,"\u0418\u043c\u044f: ",this.state.name),r.a.createElement("li",null,"E-mail: ",this.state.email),r.a.createElement("li",null,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d: ",this.state.phone),r.a.createElement("li",null,"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c: ",this.state.occupation),r.a.createElement("li",null,"\u0426\u0432\u0435\u0442 (\u0432 \u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u0435): ",this.state.color?this.state.color:"--"),r.a.createElement("li",null,"\u0414\u0430\u0442\u0430 \u0420\u043e\u0436\u0434\u0435\u043d\u0438\u044f: ",this.state.birthday?r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.birthday):"--"),r.a.createElement("li",null,"\u0416\u0435\u043d\u0430\u0442 / \u0417\u0430\u043c\u0443\u0436\u0435\u043c ? ","yes"===this.state.married?"\u0414\u0430":"\u041d\u0435\u0442"),r.a.createElement("li",null,"\u0415\u0441\u0442\u044c \u043b\u0438 \u0434\u0435\u0442\u0438 ? ","yes"===this.state.hasChildren?"\u0414\u0430":"\u041d\u0435\u0442"),"yes"===this.state.hasChildren?r.a.createElement("li",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u0435\u0442\u0435\u0439: ",this.state.children):""))));return r.a.createElement("div",{className:"container-fluid"},this.state.loading?r.a.createElement(me,null):r.a.createElement("div",{className:"row"},e),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-lg-6 col-md-8 m-auto"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",{className:"display-5 text-center"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"\u0418\u043c\u044f \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:"),r.a.createElement("input",{type:"text",name:"name",className:"form-control",onChange:this.onChange,value:this.state.name,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:"),r.a.createElement("input",{type:"email",name:"email",className:"form-control",onChange:this.onChange,value:this.state.email,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"phone"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d:"),r.a.createElement("input",{type:"text",name:"phone",className:"form-control",onChange:this.onChange,value:this.state.phone,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"occupation"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"),r.a.createElement("select",{className:"form-control",value:this.state.occupation,name:"occupation",onChange:this.onChange,required:!0},[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f --",value:""},{label:"\u0410\u0434\u043c\u0438\u043d",value:"admin"},{label:"\u0421\u0443\u0431\u0430\u0434\u043c\u0438\u043d",value:"subadmin"},{label:"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440",value:"operator"},{label:"\u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440",value:"disinfector"},{label:"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440",value:"accountant"}].map(function(e,t){return r.a.createElement("option",{key:t,value:e.value},e.label)}))),"disinfector"===this.state.occupation||"subadmin"===this.state.occupation?r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"color"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0426\u0432\u0435\u0442 (\u0434\u043b\u044f \u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044f):"),r.a.createElement("select",{className:"form-control",value:this.state.color,name:"color",onChange:this.onChange,required:!0},[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0446\u0432\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f (\u0434\u043b\u044f \u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044f) --",value:""},{label:"\u041a\u0440\u0430\u0441\u043d\u044b\u0439",value:"red"},{label:"\u0417\u0435\u043b\u0435\u043d\u044b\u0439",value:"green"},{label:"\u0421\u0438\u043d\u0438\u0439",value:"blue"},{label:"\u041e\u0440\u0430\u043d\u0436\u0435\u0432\u044b\u0439",value:"orange"},{label:"\u0416\u0435\u043b\u0442\u044b\u0439",value:"yellow"},{label:"\u0424\u0438\u043e\u043b\u0435\u0442\u043e\u0432\u044b\u0439",value:"violet"},{label:"\u041a\u043e\u0440\u0438\u0447\u043d\u0435\u0432\u044b\u0439",value:"brown"},{label:"\u0417\u043e\u043b\u043e\u0442\u043e\u0439",value:"gold"},{label:"\u0416\u0435\u043b\u0442\u043e-\u0437\u0435\u043b\u0435\u043d\u044b\u0439",value:"greenyellow"},{label:"\u0418\u043d\u0434\u0438\u0433\u043e",value:"indigo"},{label:"\u0421\u0432\u0435\u0442\u043b\u043e-\u0421\u0438\u043d\u0438\u0439",value:"lightsteelblue"},{label:"\u041e\u0440\u0445\u0438\u0434\u0435\u044f",value:"orchid"},{label:"\u0426\u0432\u0435\u0442 \u043c\u043e\u0440\u0441\u043a\u043e\u0439 \u0432\u043e\u043b\u043d\u044b",value:"seagreen"},{label:"\u0411\u0438\u0440\u044e\u0437\u043e\u0432\u044b\u0439",value:"turquoise"},{label:"\u0424\u043e\u0440\u0430",value:"bisque"},{label:"\u0421\u0438\u044f\u043d",value:"cyan"},{label:"DarkGoldenRod",value:"darkgoldenrod"}].map(function(e,t){return r.a.createElement("option",{key:t,value:e.value},e.label)}))):"",r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"birthday"},"\u0414\u0430\u0442\u0430 \u0420\u043e\u0436\u0434\u0435\u043d\u0438\u044f:"),r.a.createElement("input",{type:"date",name:"birthday",className:"form-control",onChange:this.onChange,defaultValue:this.state.birthday,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"married"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043e\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0442\u0430\u0442\u0443\u0441:"),r.a.createElement("select",{className:"form-control",value:this.state.married,name:"married",onChange:this.onChange,required:!0},r.a.createElement("option",{value:""},"--\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u0434\u0435\u0441\u044c -- "),r.a.createElement("option",{value:"yes"},"\u0416\u0435\u043d\u0430\u0442 / \u0417\u0430\u043c\u0443\u0436\u0435\u043c"),r.a.createElement("option",{value:"no"}," \u041d\u0435 \u0436\u0435\u043d\u0430\u0442 / \u041d\u0435 \u0437\u0430\u043c\u0443\u0436\u0435\u043c"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"hasChildren"},"\u0415\u0441\u0442\u044c \u043b\u0438 \u0434\u0435\u0442\u0438 \u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f?"),r.a.createElement("select",{className:"form-control",value:this.state.hasChildren,name:"hasChildren",onChange:this.onChange,required:!0},r.a.createElement("option",{value:""},"--\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u0434\u0435\u0441\u044c -- "),r.a.createElement("option",{value:"yes"},"\u0415\u0441\u0442\u044c"),r.a.createElement("option",{value:"no"}," \u041d\u0435\u0442"))),"yes"===this.state.hasChildren?r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"children"},"\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0434\u0435\u0442\u0435\u0439?"),r.a.createElement("input",{type:"number",name:"children",step:"1",min:"1",className:"form-control",onChange:this.onChange,value:this.state.children,required:!0})):"",r.a.createElement("button",{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fas fa-user-edit"})," \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c")))))))}}]),t}(n.Component),la=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,errors:e.errors}},{getUserById:be,editUser:function(e,t){return function(a){g.a.post("/edit-user",{object:e}).then(function(){return t.push("/admin/users")}).catch(function(e){return a({type:y,payload:e})})}}})(Object(p.g)(ra)),ca=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",phone:"",address:"",inn:"",method:"",headingText:"",clients:[]},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.searchByName=function(e){e.preventDefault(),a.setState({method:"name",headingText:a.state.name});var t={method:"name",payload:a.state.name};a.props.searchClients(t)},a.searchByPhone=function(e){e.preventDefault(),a.setState({method:"phone",headingText:a.state.phone});var t={method:"phone",payload:a.state.phone};a.props.searchClients(t)},a.searchByAddress=function(e){e.preventDefault(),a.setState({method:"address",headingText:a.state.address});var t={method:"address",payload:a.state.address};a.props.searchClients(t)},a.searchByInn=function(e){e.preventDefault(),a.setState({method:"inn",headingText:a.state.inn});var t={method:"inn",payload:a.state.inn};a.props.searchClients(t)},a.searchAll=function(e){e.preventDefault(),a.setState({method:"all"});a.props.searchClients({method:"all",payload:""})},a.showCorporate=function(){a.setState({method:"corporate",headingText:"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439"});a.props.searchClients({method:"corporate",payload:"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439"})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.admin.clients.length>0&&this.setState({clients:this.props.admin.clients,method:this.props.admin.searchClientsMethod,headingText:this.props.admin.searchClientsInput})}},{key:"componentWillReceiveProps",value:function(e){this.setState({clients:e.admin.clients})}},{key:"render",value:function(){var e=this,t=this.state.clients.sort(function(e,t){return e.name.toUpperCase()<t.name.toUpperCase()?-1:e.name.toUpperCase()>t.name.toUpperCase()?1:0}),a=t.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.name," ","corporate"===e.type&&e.inn?"(\u0418\u041d\u041d: ".concat(e.inn,")"):""),r.a.createElement("td",null,r.a.createElement(u.b,{to:"/client/".concat(e._id),className:"btn btn-primary pl-1 pr-1"},r.a.createElement("i",{className:"fas fa-comment-dots"})," \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")),r.a.createElement("td",null,"corporate"===e.type?"\u041a\u043e\u0440\u043f.":"\u0424\u0438\u0437."),r.a.createElement("td",null,e.phone?e.phone:"--"),r.a.createElement("td",null,e.address?e.address:"--"))}),n="";switch(this.state.method){case"name":n="\u043f\u043e \u0438\u043c\u0435\u043d\u0438";break;case"phone":n="\u043f\u043e \u043d\u043e\u043c\u0435\u0440\u0443 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430";break;case"address":n="\u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443";break;case"inn":n="\u043f\u043e \u0418\u041d\u041d";break;case"corporate":n="\u043f\u043e \u0440\u043e\u043b\u0438";break;default:n=""}return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center"},"\u041f\u043e\u0438\u0441\u043a \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-2"},r.a.createElement("form",{onSubmit:this.searchByName,className:"form-bg p-1"},r.a.createElement("h4",{className:"text-center mb-0"},"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0438\u043c\u0435\u043d\u0438"),r.a.createElement(Tt,{type:"text",placeholder:"\u0418\u043c\u044f",name:"name",value:this.state.client,onChange:this.onChange,required:!0}),r.a.createElement("button",{type:"submit",className:"btn btn-success"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-2"},r.a.createElement("form",{onSubmit:this.searchByPhone,className:"form-bg p-1"},r.a.createElement("h4",{className:"text-center mb-0"},"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u043e\u043c\u0435\u0440\u0443 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"),r.a.createElement(Tt,{type:"text",placeholder:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",name:"phone",value:this.state.phone,onChange:this.onChange,required:!0}),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-2"},r.a.createElement("form",{onSubmit:this.searchByAddress,className:"form-bg p-1"},r.a.createElement("h4",{className:"text-center mb-0"},"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443"),r.a.createElement(Tt,{type:"text",placeholder:"\u0410\u0434\u0440\u0435\u0441",name:"address",value:this.state.address,onChange:this.onChange,required:!0}),r.a.createElement("button",{type:"submit",className:"btn btn-dark"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-2"},r.a.createElement("form",{onSubmit:this.searchByInn,className:"form-bg p-1"},r.a.createElement("h4",{className:"text-center mb-0"},"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0418\u041d\u041d"),r.a.createElement(Tt,{type:"text",placeholder:"\u0418\u041d\u041d",name:"inn",value:this.state.inn,onChange:this.onChange,required:!0}),r.a.createElement("button",{type:"submit",className:"btn btn-warning"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-2"},r.a.createElement("button",{type:"submit",className:"btn btn-danger",onClick:function(){return e.showCorporate()}},r.a.createElement("i",{className:"fas fa-building"})," \u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u044b"))),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-12"},""!==this.state.method&&r.a.createElement(r.a.Fragment,null,"all"===this.state.method?r.a.createElement("h2",{className:"text-center"},"\u0412\u0441\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u044b"):r.a.createElement("h2",{className:"text-center"},"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 ",n,' "',this.state.headingText,'"')))),this.props.admin.loadingClients?r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-12"},r.a.createElement(me,null))):r.a.createElement(r.a.Fragment,null,""!==this.state.method&&0===t.length?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center"},"\u041a\u043b\u0438\u0435\u043d\u0442\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"))):r.a.createElement("div",{className:"row"},t.length>0&&r.a.createElement("div",{className:"col-12"},r.a.createElement("h4",null,"\u041d\u0430\u0439\u0434\u0435\u043d\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432: ",t.length)),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"table-responsive mt-3"},r.a.createElement("table",{className:"table table-bordered table-hover table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u0418\u043c\u044f"),r.a.createElement("th",null,"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"),r.a.createElement("th",null,"\u0422\u0438\u043f"),r.a.createElement("th",null,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),r.a.createElement("th",null,"\u0410\u0434\u0440\u0435\u0441"))),r.a.createElement("tbody",null,a)))))))}}]),t}(n.Component),sa=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,errors:e.errors}},{searchClients:function(e){return function(t){t(ke(e)),g.a.post("/admin/search-clients",{object:e}).then(function(e){return t({type:"SEARCH_CLIENTS",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}}})(Object(p.g)(ca)),oa=function(e){var t="";return 0===e.length?"--":(e.forEach(function(a,n){n===e.length-1?t+=a:t+="".concat(a,", ")}),t)},ia=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=new Date(e),n=new Date(a.setMonth(a.getMonth()+t));return(new Date).getTime()>n.getTime()},ma=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={possibleOccupations:["admin","accountant","subadmin","operator"],userOccupation:a.props.auth.user.occupation,order:a.props.order,shouldLoadOrder:a.props.shouldLoadOrder},a.goToAddNewForm=function(){a.props.history.push("/fail/add-new/".concat(a.state.order._id),{pathname:"/fail/add-new/".concat(a.state.order._id),state:{order:a.state.order,shouldLoadOrder:a.state.shouldLoadOrder}})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.userOccupation,n=t.order,l=!1,c=!1;return this.state.possibleOccupations.includes(a)&&n.completed&&n.guarantee&&!ia(n.completedAt,n.guarantee)&&(c=!0),l=!(!n.completed||!c&&He(n)||n.prevFailedOrder),r.a.createElement(r.a.Fragment,null,l?r.a.createElement("button",{className:"btn btn-secondary mt-3 mr-2",onClick:function(){return e.goToAddNewForm()}},"\u041a\u043b\u0438\u0435\u043d\u0442 \u041d\u0435\u0434\u043e\u0432\u043e\u043b\u0435\u043d"):"")}}]),t}(n.Component);ma.defaultProps={order:{},shouldLoadOrder:!0};var da=Object(S.b)(function(e){return{auth:e.auth,errors:e.errors}})(Object(p.g)(ma)),ua=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={orders:[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.admin.ordersOfClient&&this.props.admin.ordersOfClient.length>0&&this.setState({orders:this.props.admin.ordersOfClient})}},{key:"render",value:function(){var e=et(this.state.orders),t=e.totalSum,a=e.totalScore,n=e.totalOrders,l=e.completed,c=e.confirmedOrders,s=e.rejected,o=e.failed,i=e.povtors,m=nt(this.state.orders),d=(m=ze(m)).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)}),u=this.state.orders.map(function(e,t){var a=[];e.disinfectors.forEach(function(e){a.push({user:e.user,consumption:e.consumption})});var n=a.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("p",{className:"mb-0"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c: ",e.user.occupation," ",e.user.name),e.consumption.map(function(e,t){return r.a.createElement("p",{key:t,className:"mb-0"},e.material,": ",e.amount.toLocaleString()," ",e.unit)}))});return r.a.createElement("div",{className:"col-lg-4 col-md-6",key:t},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},e.prevFailedOrder&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),e.failed&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),e.disinfectorId&&r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439: ",e.disinfectorId.occupation," ",e.disinfectorId.name),e.operatorDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.operatorConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.operatorCheckedAt),")"),r.a.createElement("li",null,"\u0411\u0430\u043b\u043b (0-5): ",e.score),r.a.createElement("li",null,"\u041e\u0442\u0437\u044b\u0432 \u041a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.clientReview?e.clientReview:"\u041d\u0435\u0442 \u041e\u0442\u0437\u044b\u0432\u0430")):r.a.createElement("li",{className:"text-danger"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.operatorCheckedAt),")")):r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.accountantDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.accountantConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.accountantCheckedAt),")"),r.a.createElement("li",null,"\u0421\u0447\u0435\u0442-\u0424\u0430\u043a\u0442\u0443\u0440\u0430: ",e.invoice?e.invoice:"--"),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement("li",{className:"text-danger"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.accountantCheckedAt),")")):r.a.createElement(r.a.Fragment,null,e.adminDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0410\u0434\u043c\u0438\u043d \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.adminConfirmed?r.a.createElement("li",{className:"text-success"},"\u0410\u0434\u043c\u0438\u043d \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.adminCheckedAt),")"):r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u043c\u0438\u043d \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.adminCheckedAt),")")):r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443")),"corporate"===e.clientType?r.a.createElement(r.a.Fragment,null,e.clientId?r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.clientId.name):r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442"),r.a.createElement("li",{className:"text-danger"},"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.client)):"","individual"===e.clientType?r.a.createElement("li",{className:"text-danger"},"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.client):"",r.a.createElement("li",{className:"text-danger"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u041a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.phone),e.phone2?r.a.createElement("li",null,"\u0414\u0440\u0443\u0433\u043e\u0439 \u043d\u043e\u043c\u0435\u0440: ",e.phone2):"",r.a.createElement("li",{className:"text-danger"},"\u0414\u0430\u0442\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},e.dateFrom)),r.a.createElement("li",{className:"text-danger"},"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: \u0421 ",r.a.createElement(re.a,{format:"HH:mm"},e.dateFrom)," \u041f\u041e ",r.a.createElement(re.a,{format:"HH:mm"},e.completedAt)),r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u0440\u0435\u0441: ",e.address),r.a.createElement("li",{className:"text-danger"},"\u0422\u0438\u043f \u0443\u0441\u043b\u0443\u0433\u0438: ",e.typeOfService),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430: ",e.comment?e.comment:"--"),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430: ",e.disinfectorComment?e.disinfectorComment:"--"),r.a.createElement("li",null,"\u0421\u0440\u043e\u043a \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0438 (\u0432 \u043c\u0435\u0441\u044f\u0446\u0430\u0445): ",e.guarantee),r.a.createElement("li",null,"\u0420\u0430\u0441\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 (\u0437\u0430\u043a\u0430\u0437 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u043b\u0438 ",e.disinfectors.length," \u0447\u0435\u043b):"),r.a.createElement("ul",{className:"font-bold mb-0"},n),"corporate"===e.clientType?r.a.createElement(r.a.Fragment,null,"cash"===e.paymentMethod?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u041d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),e.cost&&r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u0411\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),r.a.createElement("li",null,"\u041d\u043e\u043c\u0435\u0440 \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430: ",e.contractNumber))):"","individual"===e.clientType&&e.cost?r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)"):"",r.a.createElement("li",null,"\u0424\u043e\u0440\u043c\u0430 \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0417\u0430\u043a\u0430\u0437\u0430 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.completedAt)),r.a.createElement(da,{order:e,shouldLoadOrder:!0})))))});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h3",{className:"text-center"},"\u0417\u0430\u043a\u0430\u0437\u044b"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("li",null,"\u0412\u0441\u0435\u0433\u043e \u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043e \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",n),r.a.createElement("li",null,"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",l),r.a.createElement("li",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043e \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",c.length),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",t.toLocaleString()," UZS"),r.a.createElement("li",null,"\u0421\u0440\u0435\u0434\u043d\u0438\u0439 \u0431\u0430\u043b\u043b: ",(a/c.length).toFixed(2)," (\u0438\u0437 5)"),r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0440\u0433\u043d\u0443\u0442\u043e \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",s),r.a.createElement("li",null,"\u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",o),r.a.createElement("li",null,"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",i))))),r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h4",{className:"text-center"},"\u041e\u0431\u0449\u0438\u0439 \u0420\u0430\u0441\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432:"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},d))))),this.state.orders.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0417\u0430\u043a\u0430\u0437\u044b"))),r.a.createElement("div",{className:"row"},u)))}}]),t}(n.Component),pa=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,errors:e.errors}},{})(Object(p.g)(ua)),ha=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={client:{orders:[],contracts:[]},contract:"",searchMethod:"",month:"",year:"",day:"",headingMonth:"",headingYear:"",headingDay:"",hoverRange:void 0,selectedDays:[]},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.handleContractCRUD=function(e,t){var n={id:a.state.client._id,method:e,contract:t};a.props.changeContractNumbers(n,a.props.history)},a.onSubmit=function(e){e.preventDefault();var t={id:a.state.client._id,method:"add",contract:a.state.contract};a.props.changeContractNumbers(t,a.props.history),a.setState({contract:""})},a.getOrdersOfClientDay=function(e){e.preventDefault();var t={client:{id:a.state.client._id,type:a.state.client.type,name:a.state.client.name,phone:a.state.client.phone||""},type:"day",day:a.state.day};a.props.getOrdersOfClient(t),a.setState({searchMethod:"day",headingDay:a.state.day.split("-").reverse().join("-")})},a.handleDayChange=function(e){var t={client:{id:a.state.client._id,type:a.state.client.type,name:a.state.client.name,phone:a.state.client.phone||""},type:"week",days:ot(it(e).from)};a.props.getOrdersOfClient(t),a.setState({searchMethod:"week",selectedDays:ot(it(e).from)})},a.handleDayEnter=function(e){a.setState({hoverRange:it(e)})},a.handleDayLeave=function(){a.setState({hoverRange:void 0})},a.handleWeekClick=function(e,t,n){var r={client:{id:a.state.client._id,type:a.state.client.type,name:a.state.client.name,phone:a.state.client.phone||""},type:"week",days:ot(it(t[0]).from)};a.props.getOrdersOfClient(r),a.setState({searchMethod:"week",selectedDays:ot(it(t[0]).from)})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.clientById(this.props.match.params.clientId),window.scrollTo({top:0})}},{key:"componentWillReceiveProps",value:function(e){e.admin.clientById&&this.setState({client:e.admin.clientById})}},{key:"render",value:function(){var e=this,t=this.state,a=t.hoverRange,n=t.selectedDays,l=n.length>0,c={hoverRange:a,selectedRange:l&&{from:n[0],to:n[6]},hoverRangeStart:a&&a.from,hoverRangeEnd:a&&a.to,selectedRangeStart:l&&n[0],selectedRangeEnd:l&&n[6]},s=this.state.client,o=0,i=0,m=[],d=[],p=[];s.orders.forEach(function(e){e.completed&&e.operatorDecided&&(m.push(e),e.failed||e.hasOwnProperty("prevFailedOrder")||!e.operatorConfirmed||!e.adminConfirmed&&!e.accountantConfirmed||(d.push(e),o+=e.cost,i+=e.score),(e.operatorDecided&&!e.operatorConfirmed||e.accountantDecided&&!e.accountantConfirmed||e.adminDecided&&!e.adminConfirmed)&&p.push(e))});var h=0;s.orders.forEach(function(e){e.dateFrom&&h++});for(var E=Math.ceil(h/10),f=[],g=1;g<=E;g++)f.push({});var b=f.map(function(e,t){for(var a=[],n=10*t;n<=10*t+9;n++)s.orders[n]&&s.orders[n].dateFrom&&a.push(s.orders[n].dateFrom);return a.sort(function(e,t){return new Date(e)-new Date(t)}),r.a.createElement("div",{className:"col-md-4",key:t},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 pl-0 list-unstyled"},a.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e))})))))}),y=s.contracts.map(function(t,a){return r.a.createElement("li",{className:"mb-3",key:a},"\u0414\u043e\u0433\u043e\u0432\u043e\u0440: ",t," ",r.a.createElement("button",{className:"btn btn-danger ml-3",onClick:function(){return e.handleContractCRUD("delete",t)}},r.a.createElement("i",{className:"fas fa-trash-alt"})," \u0423\u0434\u0430\u043b\u0438\u0442\u044c"))});return r.a.createElement("div",{className:"container-fluid"},this.props.admin.loadingClients?r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-12"},r.a.createElement(me,null))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",{className:"text-center"},"\u041a\u043b\u0438\u0435\u043d\u0442 ",s.name))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 pl-0 list-unstyled"},"corporate"===s.type?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043a\u043b\u0438\u0435\u043d\u0442: ",s.name),r.a.createElement("li",null,"\u0418\u041d\u041d: ",s.inn||"--"),r.a.createElement("li",null,"\u041d\u043e\u043c\u0435\u0440\u0430 \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432: ",oa(s.contracts))):"","individual"===s.type?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u043a\u043b\u0438\u0435\u043d\u0442: ",s.name),r.a.createElement("li",null,"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430: ",s.phone),r.a.createElement("li",null,"\u0410\u0434\u0440\u0435\u0441: ",s.address)):"",r.a.createElement("li",null,"\u0412\u0441\u0435\u0433\u043e \u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043e\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",s.orders.length),d.length>0&&r.a.createElement("li",null,"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0438 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432: ",d.length),i>0&&r.a.createElement("li",null,"\u0421\u0440\u0435\u0434\u043d\u044f\u044f \u043e\u0446\u0435\u043d\u043a\u0430: ",(i/d.length).toFixed(2)," (\u0438\u0437 5)"),o>0&&r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",o.toLocaleString()," UZS")),r.a.createElement(u.b,{to:"/edit-client/".concat(s._id),className:"btn btn-warning mt-2"},r.a.createElement("i",{className:"fas fa-edit"})," \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u041a\u043b\u0438\u0435\u043d\u0442\u0430")))),"corporate"===s.type?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h5",{className:"text-center"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u041d\u043e\u043c\u0435\u0440 \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430"),r.a.createElement("ul",{className:"font-bold mb-0 pl-0 list-unstyled"},y)))),r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("h5",{className:"text-center"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u041d\u043e\u043c\u0435\u0440 \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430"),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"contract",className:"form-control",onChange:this.onChange,value:this.state.contract,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u041d\u043e\u043c\u0435\u0440 \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430",required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-success"},r.a.createElement("i",{className:"fas fa-plus-circle"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")))))):"")),s.orders.length>0&&"object"===typeof s.orders[0]&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"border-between-disinfectors mt-3"}),r.a.createElement("div",{className:"border-between-disinfectors mt-1"}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0414\u0430\u0442\u044b \u0417\u0430\u043a\u0430\u0437\u043e\u0432 \u041a\u043b\u0438\u0435\u043d\u0442\u0430"))),r.a.createElement("div",{className:"row"},b),r.a.createElement("div",{className:"border-between-disinfectors mt-3"}),r.a.createElement("div",{className:"border-between-disinfectors mt-1"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("form",{onSubmit:this.getOrdersOfClientDay,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u0417\u0430\u043a\u0430\u0437\u044b \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043f\u043e \u0434\u043d\u044f\u043c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"day"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0414\u0435\u043d\u044c:")),r.a.createElement("input",{type:"date",name:"day",className:"form-control",onChange:this.onChange,required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 weekly-stats mt-3"},r.a.createElement("div",{className:"SelectedWeekExample form-bg font-weight-bold"},r.a.createElement("h4",{className:"text-center"},"\u0417\u0430\u043a\u0430\u0437\u044b \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043f\u043e \u043d\u0435\u0434\u0435\u043b\u044f\u043c"),r.a.createElement(dt.a,{selectedDays:n,showWeekNumbers:!0,showOutsideDays:!0,modifiers:c,firstDayOfWeek:1,onDayClick:this.handleDayChange,onDayMouseEnter:this.handleDayEnter,onDayMouseLeave:this.handleDayLeave,onWeekClick:this.handleWeekClick})))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},"week"===this.state.searchMethod?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0417\u0430\u043a\u0430\u0437\u044b \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0437\u0430 ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[0])," - ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[6])):"","day"===this.state.searchMethod?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0417\u0430\u043a\u0430\u0437\u044b \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0437\u0430 ",this.state.headingDay):"")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},this.props.admin.loadingOrdersOfClient?r.a.createElement(me,null):r.a.createElement(r.a.Fragment,null,""!==this.state.searchMethod&&r.a.createElement(pa,null)))))}}]),t}(n.Component),Ea=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,errors:e.errors}},{clientById:ge,changeContractNumbers:function(e,t){return function(t){g.a.post("/admin/change-contract-numbers",{object:e}).then(function(e){return t({type:"CLIENT_BY_ID",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}},getOrdersOfClient:function(e){return function(t){t({type:"SET_LOADING_CLIENT_ORDERS"}),g.a.post("/admin/get-orders-of-client",{object:e}).then(function(e){return t({type:"SET_ORDERS_OF_CLIENT",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}}})(Object(p.g)(ha)),fa=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={user:{materials:[]},materials:[{material:"",amount:0,unit:""}]},a.changeSelect=function(e){var t=e.target.name.split("-")[1],n=e.target.value.split("+")[0],r=e.target.value.split("+")[1],l=Object(j.a)(a.state.materials);l[t].material=n,l[t].unit=r,a.setState({materials:l})},a.changeAmount=function(e){var t=e.target.name.split("-")[1],n=Number(e.target.value),r=Object(j.a)(a.state.materials);r[t].amount=n,a.setState({materials:r})},a.addMaterial=function(e){e.preventDefault();var t=Object(j.a)(a.state.materials);t.push({material:"",amount:0,unit:""}),a.setState({materials:t})},a.deleteMaterial=function(e){e.preventDefault();var t=Object(j.a)(a.state.materials);t.pop(),a.setState({materials:t})},a.onSubmit=function(e){e.preventDefault(),console.clear();var t=!1,n=!1;if(a.state.materials.forEach(function(e){""!==e.material&&""!==e.unit||(t=!0),e.amount<0&&(n=!0)}),t)return alert('\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u041f\u043e\u043b\u0435 "\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0438 \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"');if(n)return alert("\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u0430\u043c \u0447\u0438\u0441\u043b\u043e\u043c");var r={userId:a.state.user._id,materials:a.state.materials};a.props.setDisinfectorMaterials(r,a.props.history)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.admin.userById&&this.props.admin.userById._id&&this.props.admin.userById.materials?this.setState({user:this.props.admin.userById}):this.props.getUserById(this.props.match.params.id)}},{key:"componentWillReceiveProps",value:function(e){e.admin.userById&&this.setState({user:e.admin.userById})}},{key:"render",value:function(){var e=this,t=this.state.user,a=ze(t.materials||[]),n=[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0435\u0449\u0435\u0441\u0442\u0432\u043e --",value:"",unit:""}];at.a.forEach(function(e){n.push({label:e.material,value:e.material,unit:e.unit})});var l=n.map(function(e,t){return r.a.createElement("option",{value:"".concat(e.value,"+").concat(e.unit),key:t},e.label," ",e.unit)}),c=this.state.materials.map(function(t,a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{name:"material-".concat(a),className:"form-control",onChange:e.changeSelect,required:!0},l)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"quantity-".concat(a)},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e:"),r.a.createElement("input",{type:"number",step:"0.001",className:"form-control",name:"quantity-".concat(a),onChange:e.changeAmount,required:!0})),r.a.createElement("div",{className:"border-bottom-red"}))});return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",{className:"text-center"},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-md-6"},t._id&&t.materials?r.a.createElement("div",{className:"card order"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 pl-0 list-unstyled"},r.a.createElement("h4",{className:"text-center"},t.occupation," ",t.name),r.a.createElement("p",{className:"mb-0"},"\u0418\u043c\u0435\u0435\u0442\u0441\u044f \u0432 \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432:"),r.a.createElement("ul",null,a.map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount," ",e.unit)}))))):r.a.createElement(me,null)),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"card mt-2"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"text-center"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b"),r.a.createElement("form",{onSubmit:this.onSubmit},c,this.state.materials.length<at.a.length&&r.a.createElement("button",{className:"btn btn-primary mr-2 mt-2",onClick:this.addMaterial},r.a.createElement("i",{className:"fas fa-plus"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"),1===this.state.materials.length?"":r.a.createElement("button",{className:"btn btn-danger mt-2",onClick:this.deleteMaterial},r.a.createElement("i",{className:"fas fa-trash-alt"})," \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"),r.a.createElement("div",{className:"border-bottom"}),r.a.createElement("button",{type:"submit",className:"btn btn-success"},r.a.createElement("i",{className:"fas fa-marker"})," \u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b")))))))}}]),t}(n.Component),ga=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,errors:e.errors}},{getUserById:be,setDisinfectorMaterials:function(e,t){return function(a){g.a.post("/admin/set-disinfector-materials",{object:e}).then(function(){return t.push("/admin")}).catch(function(e){return a({type:y,payload:e})})}}})(Object(p.g)(fa)),ba=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={currentMaterials:[],materials:[{material:"",amount:0,unit:""}]},a.changeSelect=function(e){var t=e.target.name.split("-")[1],n=e.target.value.split("+")[0],r=e.target.value.split("+")[1],l=Object(j.a)(a.state.materials);l[t].material=n,l[t].unit=r,a.setState({materials:l})},a.changeAmount=function(e){var t=e.target.name.split("-")[1],n=Number(e.target.value),r=Object(j.a)(a.state.materials);r[t].amount=n,a.setState({materials:r})},a.addMaterial=function(e){e.preventDefault();var t=Object(j.a)(a.state.materials);t.push({material:"",amount:0,unit:""}),a.setState({materials:t})},a.deleteMaterial=function(e){e.preventDefault();var t=Object(j.a)(a.state.materials);t.pop(),a.setState({materials:t})},a.onSubmit=function(e){e.preventDefault(),console.clear();var t=!1,n=!1;if(a.state.materials.forEach(function(e){""!==e.material&&""!==e.unit||(t=!0),e.amount<0&&(n=!0)}),t)return alert('\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u041f\u043e\u043b\u0435 "\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0438 \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"');if(n)return alert("\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u0430\u043c \u0447\u0438\u0441\u043b\u043e\u043c");var r={materials:a.state.materials};a.props.setCurrentMaterials(r,a.props.history)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.admin.currentMaterials&&this.props.admin.currentMaterials.materials&&this.props.admin.currentMaterials.materials.length>0?this.setState({currentMaterials:this.props.admin.currentMaterials.materials}):this.props.getCurrentMaterials()}},{key:"componentWillReceiveProps",value:function(e){e.admin.currentMaterials.materials&&this.setState({currentMaterials:e.admin.currentMaterials.materials})}},{key:"render",value:function(){var e=this,t=ze(Object(j.a)(this.state.currentMaterials)).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount," ",e.unit)}),a=[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0435\u0449\u0435\u0441\u0442\u0432\u043e --",value:"",unit:""}];at.a.forEach(function(e){a.push({label:e.material,value:e.material,unit:e.unit})});var n=a.map(function(e,t){return r.a.createElement("option",{value:"".concat(e.value,"+").concat(e.unit),key:t},e.label," ",e.unit)}),l=this.state.materials.map(function(t,a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{name:"material-".concat(a),className:"form-control",onChange:e.changeSelect,required:!0},n)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"quantity-".concat(a)},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e:"),r.a.createElement("input",{type:"number",step:"0.001",className:"form-control",name:"quantity-".concat(a),onChange:e.changeAmount,required:!0})),r.a.createElement("div",{className:"border-bottom-red"}))});return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",{className:"text-center"},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0435"))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"card mt-2"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"text-center"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0445\u043e\u0442\u0438\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0438 \u0438\u0445 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),r.a.createElement("form",{onSubmit:this.onSubmit},l,this.state.materials.length<at.a.length&&r.a.createElement("button",{className:"btn btn-primary mr-2 mt-2",onClick:this.addMaterial},r.a.createElement("i",{className:"fas fa-plus"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"),1===this.state.materials.length?"":r.a.createElement("button",{className:"btn btn-danger mt-2",onClick:this.deleteMaterial},r.a.createElement("i",{className:"fas fa-trash-alt"})," \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"),r.a.createElement("div",{className:"border-bottom"}),r.a.createElement("button",{type:"submit",className:"btn btn-success"},r.a.createElement("i",{className:"fas fa-marker"})," \u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b"))))),r.a.createElement("div",{className:"col-md-6"},this.props.admin.loadingCurMat?r.a.createElement(me,null):r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h3",{className:"text-center"},"\u0421\u0435\u0439\u0447\u0430\u0441 \u0438\u043c\u0435\u0435\u0442\u0441\u044f \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0435"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},t,r.a.createElement("li",{className:"mt-2"},"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},this.props.admin.currentMaterials.lastUpdated))))))))}}]),t}(n.Component),ya=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,errors:e.errors}},{getCurrentMaterials:fe,setCurrentMaterials:function(e,t){return function(a){g.a.post("/admin/set-current-materials",{object:e}).then(function(){return t.push("/admin/material-coming")}).catch(function(e){return a({type:y,payload:e})})}}})(Object(p.g)(ba)),va=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={material:"",errors:{}},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.onDeleteMaterial=function(){var e={material:a.state.material};a.props.deleteMaterialFromDB(e,a.props.history)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",{className:"text-center"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0438\u0437 \u0411\u0414"),r.a.createElement("p",null,"* \u0438\u043c\u044f \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u0434\u043e\u043b\u0436\u043d\u043e \u0442\u043e\u0447\u043d\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0442\u044c \u0441 \u0438\u043c\u0435\u043d\u0435\u043c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u0432 \u0411\u0414 \u0438 \u0432 materials.js (\u0440\u0435\u0433\u0438\u0441\u0442\u0440 \u0431\u0443\u043a\u0432 \u0442\u043e\u0436\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0442\u044c)"),r.a.createElement("form",{onSubmit:this.onDeleteMaterial},r.a.createElement(Tt,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0418\u043c\u044f \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430, \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u043d\u0443\u0436\u043d\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c",type:"text",name:"material",value:this.state.material,onChange:this.onChange,error:e.material,required:!0}),r.a.createElement("button",{type:"submit",className:"btn btn-danger"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))))}}]),t}(n.Component),Na=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,errors:e.errors}},{deleteMaterialFromDB:function(e,t){return function(a){g.a.post("/admin/delete-material",{object:e}).then(function(){return t.push("/admin")}).catch(function(e){return a({type:y,payload:e})})}}})(Object(p.g)(va)),Oa=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={material:"",unit:"",errors:{}},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.onSubmit=function(){var e={material:a.state.material,unit:a.state.unit};a.props.addNewMaterial(e,a.props.history)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"container-fluid mt-4"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",{className:"text-center"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u041d\u043e\u0432\u044b\u0439 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(Tt,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0418\u043c\u044f \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430",type:"text",name:"material",value:this.state.material,onChange:this.onChange,error:e.material,required:!0}),r.a.createElement(Jt,{name:"unit",value:this.state.unit,onChange:this.onChange,error:e.unit,options:[{label:"-- \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0435\u0434\u0438\u043d\u0438\u0446\u0443 \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f --",value:""},{label:"\u0433\u0440",value:"\u0433\u0440"},{label:"\u0448\u0442",value:"\u0448\u0442"},{label:"\u043c\u043b",value:"\u043c\u043b"},{label:"\u043f\u0430\u043a",value:"\u043f\u0430\u043a"}],required:!0}),r.a.createElement("button",{type:"submit",className:"btn btn-success"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))))),r.a.createElement(Na,null)))}}]),t}(n.Component),Sa=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,errors:e.errors}},{addNewMaterial:function(e,t){return function(a){g.a.post("/admin/new-material",{object:e}).then(function(){return t.push("/admin")}).catch(function(e){return a({type:y,payload:e})})}}})(Object(p.g)(Oa)),Da=function(e){return function(t){t(Aa()),g.a.post("/subadmin/get-sorted-orders",{date:e}).then(function(a){return t({type:"GET_SORTED_ORDERS_SUBADMIN",payload:a.data,date:e})}).catch(function(e){return t({type:y,payload:e})})}},Ca=function(){return function(e){e(Ma());g.a.post("/get-users",{object:{method:"role",roles:["disinfector"]}}).then(function(t){return e({type:"ALL_DISINFECTORS",payload:t.data})}).catch(function(t){return e({type:y,payload:t})})}},Aa=function(){return{type:"LOADING_SORTED_ORDERS_SUBADMIN"}},Ma=function(){return{type:"SUBADMIN_LOADING"}},ka=function(){return{type:"SUBADMIN_LOADING_STATS"}},wa=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r))))._isMounted=!1,a.state={date:new Date,sortedOrders:a.props.subadmin.sortedOrders},a.addOrderToDOM=function(e){a._isMounted&&a.setState(function(t){var a=Object(j.a)(t.sortedOrders);return a.push(e),{sortedOrders:a}})},a.editOrderOnDOM=function(e){if(a._isMounted){for(var t=Object(j.a)(a.state.sortedOrders),n=0;n<t.length;n++)t[n]._id.toString()===e._id.toString()&&(t[n].disinfectorId=e.disinfectorId,t[n].userCreated=e.userCreated,t[n].userAcceptedOrder=e.userAcceptedOrder,t[n].clientType=e.clientType,t[n].client=e.client,t[n].clientId=e.clientId,t[n].address=e.address,t[n].dateFrom=e.dateFrom,t[n].phone=e.phone,t[n].typeOfService=e.typeOfService,t[n].advertising=e.advertising,t[n].comment=e.comment);a.setState({sortedOrders:t})}},a.removeOrderFromDOM=function(e){if(a._isMounted){var t=Object(j.a)(a.state.sortedOrders);t=t.filter(function(t){return t._id.toString()!==e}),a.setState({sortedOrders:t})}},a.onClick=function(e,t){var n,r,l;n=new Date(t).getMonth()<9?"0".concat(new Date(t).getMonth()+1):"".concat(new Date(t).getMonth()+1),r=new Date(t).getDate()<10?"0".concat(new Date(t).getDate()):new Date(t).getDate();var c="".concat(new Date(t).getFullYear(),"-").concat(n,"-").concat(r);l=e<10?"0".concat(e,":00"):"".concat(e,":00"),a.props.history.push("/create-order",{pathname:"/create-order",state:{hour:l,date:c}})},a.deleteOrder=function(e,t,n,r,l){var c={id:e,clientType:t,clientPhone:n,clientId:r,orderDateFrom:l};a.props.deleteOrder(c,a.props.history,a.props.auth.user.occupation),window.location.reload()},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t=Be()(Ge.a);t.on("createOrder",function(t){new Date(t.order.dateFrom).getDate()===new Date(e.props.date).getDate()&&new Date(t.order.dateFrom).getMonth()===new Date(e.props.date).getMonth()&&new Date(t.order.dateFrom).getFullYear()===new Date(e.props.date).getFullYear()&&e.addOrderToDOM(t.order)}),t.on("editOrder",function(t){e.editOrderOnDOM(t.order)}),t.on("deleteOrder",function(t){new Date(t.orderDateFrom).getDate()===new Date(e.props.date).getDate()&&new Date(t.orderDateFrom).getMonth()===new Date(e.props.date).getMonth()&&new Date(t.orderDateFrom).getFullYear()===new Date(e.props.date).getFullYear()&&e.removeOrderFromDOM(t.id)})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){for(var e=this,t=[],a=0;a<=23;a++)t.push({hour:a,elements:[]});this.state.sortedOrders.forEach(function(e){t[new Date(e.dateFrom).getHours()].elements.push(e)});var n;return t.map(function(t,a){return n=t.elements.map(function(t,a){return r.a.createElement("div",{className:"col-md-".concat(6," pr-0"),key:a},r.a.createElement("div",{className:"card mt-2 mr-2 order order-bg-".concat(t.disinfectorId.color)},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},t.prevFailedOrder&&r.a.createElement("h3",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"})),t.failed&&r.a.createElement("h3",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"})),"corporate"===t.clientType?r.a.createElement(r.a.Fragment,null,t.clientId?r.a.createElement("li",null,"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043a\u043b\u0438\u0435\u043d\u0442: ",t.clientId.name):r.a.createElement("li",null,"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043a\u043b\u0438\u0435\u043d\u0442 ")):"","individual"===t.clientType?r.a.createElement("li",null,"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",t.client):"",r.a.createElement("li",null,"\u0422\u0435\u043b \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",t.phone),r.a.createElement("li",null,"\u0410\u0434\u0440\u0435\u0441: ",t.address),r.a.createElement("li",null,"\u0422\u0438\u043f \u0417\u0430\u043a\u0430\u0437\u0430: ",t.typeOfService)),He(t)?r.a.createElement(r.a.Fragment,null,r.a.createElement(u.b,{to:"/order-full-details/".concat(t._id),className:"btn btn-primary mr-1 mt-2"},r.a.createElement("i",{className:"fas fa-info"})," \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")):r.a.createElement(r.a.Fragment,null,r.a.createElement(u.b,{to:"/order-details/".concat(t._id),className:"btn btn-primary mr-1 mt-2"},r.a.createElement("i",{className:"fas fa-info"})," \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"),r.a.createElement(u.b,{to:"/edit-order/".concat(t._id),className:"btn btn-warning mr-1 mt-2"},r.a.createElement("i",{className:"fas fa-edit"})," \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),e.props.date>(new Date).setHours(0,0,0,0)?r.a.createElement("button",{className:"btn btn-danger mt-2",onClick:function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?")&&("corporate"===t.clientType?e.deleteOrder(t._id,t.clientType,t.phone,t.clientId._id,t.dateFrom):"individual"===t.clientType&&e.deleteOrder(t._id,t.clientType,t.phone,"",t.dateFrom))}},r.a.createElement("i",{className:"fas fa-trash-alt"})," \u0423\u0434\u0430\u043b\u0438\u0442\u044c"):""))))}),r.a.createElement("div",{className:"hours",key:a},r.a.createElement("div",{className:"help row mt-3",id:"hour-".concat(t.hour)},r.a.createElement("button",{to:"/create-order",className:"btn btn-success mr-3",onClick:e.onClick.bind(e,t.hour,e.props.subadmin.date)},r.a.createElement("i",{className:"fas fa-plus"})),r.a.createElement("h1",{className:"d-inline mb-0"},"".concat(t.hour,":00"))),r.a.createElement("div",{className:"row"},n.length>0?n:""))})}}]),t}(n.Component),ja=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,subadmin:e.subadmin,errors:e.errors}},{getSortedOrders:Da,deleteOrder:Ye})(Object(p.g)(wa)),Ya=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={date:new Date},a.onChange=function(e){a.props.subadmin.loadingSortedOrders||(a.setState({date:e}),a.props.getSortedOrders(e))},a.onSwiped=function(e){var t=new Date(a.state.date);"LEFT"===e?(t.setTime(t.getTime()+864e5),a.setState({date:t})):"RIGHT"===e&&(t.setTime(t.getTime()-864e5),a.setState({date:t})),a.props.getSortedOrders(a.state.date)},a.today=function(){var e=new Date;a.props.subadmin.loadingSortedOrders||(a.setState({date:e}),a.props.getSortedOrders(e))},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getSortedOrders(this.state.date)}},{key:"render",value:function(){var e=this,t=this.props.subadmin.loadingSortedOrders;return r.a.createElement("div",{className:"container-fluid mt-1"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center"},"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0421\u0443\u0431\u0430\u0434\u043c\u0438\u043d\u0430 ",this.props.auth.user.name))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-3 mt-4 calendar"},r.a.createElement("div",{className:"sticky-top"},r.a.createElement(ae.a,{onChange:this.onChange,value:this.state.date}),r.a.createElement("button",{className:"btn btn-dark mt-3",onClick:function(){return e.today()}},r.a.createElement("i",{className:"fas fa-calendar-day"})," \u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0421\u0435\u0433\u043e\u0434\u043d\u044f"))),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("h2",{className:"text-center"},"\u0417\u0430\u044f\u0432\u043a\u0438 \u043d\u0430 ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.date)),t?r.a.createElement(me,null):r.a.createElement(de.a,{trackMouse:!0,preventDefaultTouchmoveEvent:!0,onSwipedLeft:function(){return e.onSwiped("LEFT")},onSwipedRight:function(){return e.onSwiped("RIGHT")},delta:120},r.a.createElement(ja,{date:this.state.date})))))}}]),t}(n.Component),Ia=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,subadmin:e.subadmin,errors:e.errors}},{getSortedOrders:Da})(Object(p.g)(Ya)),Fa=function(e){return function(t){t(Ra()),g.a.post("/auth/get-disinfector-materials",{id:e}).then(function(e){return t({type:"GET_DISINFECTOR_MATERIALS",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}},xa=function(){return{type:"LOADING_DISINF_STATS"}},Ta=function(){return{type:"SET_LOADING_DISINFECTORS"}},Ra=function(){return{type:"LOADING_CURRENT_DISINFECTOR"}},_a=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={addComment:!1,disinfectorComment:a.props.orderObject.disinfectorComment,errors:{}},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.toggleAddComment=function(e){e.preventDefault(),a.setState({addComment:!a.state.addComment})},a.onSubmit=function(e){e.preventDefault();var t={id:a.props.orderObject._id,comment:a.state.disinfectorComment};a.props.addDisinfectorComment(t,a.props.history,a.props.auth.user.occupation),a.setState({addComment:!a.state.addComment})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.orderObject,t=this.state.errors,a=new Date;return r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("div",{className:"card order"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold list-unstyled"},"corporate"===e.clientType?r.a.createElement(r.a.Fragment,null,e.clientId?r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.clientId.name):r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442"),r.a.createElement("li",{className:"text-danger"},"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.client)):"","individual"===e.clientType?r.a.createElement("li",{className:"text-danger"},"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.client):"",r.a.createElement("li",{className:"text-danger"},"\u0422\u0435\u043b. \u043d\u043e\u043c\u0435\u0440 \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.phone),""!==e.phone2?r.a.createElement("li",null,"\u0417\u0430\u043f\u0430\u0441\u043d\u043e\u0439 \u043d\u043e\u043c\u0435\u0440: ",e.phone2):"",r.a.createElement("li",{className:"text-danger"},"\u0414\u0430\u0442\u0430 \u0438 \u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.dateFrom)),r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u0440\u0435\u0441: ",e.address),r.a.createElement("li",{className:"text-danger"},"\u0422\u0438\u043f \u0443\u0441\u043b\u0443\u0433\u0438: ",e.typeOfService),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430: ",e.comment?e.comment:"--"),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430: ",this.state.disinfectorComment?this.state.disinfectorComment:"--"),e.userAcceptedOrder?r.a.createElement("li",null,"\u041a\u0442\u043e \u043f\u0440\u0438\u043d\u044f\u043b \u0437\u0430\u043a\u0430\u0437: ",e.userAcceptedOrder.occupation," ",e.userAcceptedOrder.name):"",e.userCreated?r.a.createElement("li",null,"\u0417\u0430\u043a\u0430\u0437 \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d: ",e.userCreated.occupation," ",e.userCreated.name," ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.createdAt)):""),this.state.addComment?r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(Rt,{name:"disinfectorComment",placeholder:"\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",value:this.state.disinfectorComment,onChange:this.onChange,error:t.disinfectorComment}),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{type:"submit",className:"btn btn-success mr-3"},r.a.createElement("i",{className:"fas fa-plus-circle"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),r.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:this.toggleAddComment},r.a.createElement("i",{className:"fas fa-window-close"})," \u0417\u0430\u043a\u0440\u044b\u0442\u044c"))):r.a.createElement("button",{type:"button",className:"btn btn-success d-block",onClick:this.toggleAddComment},r.a.createElement("i",{className:"fas fa-comment-dots"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"),a.getTime()>new Date(e.dateFrom).getTime()?r.a.createElement(u.b,{to:"/order-complete-form/".concat(e._id),className:"btn btn-primary mt-3"},r.a.createElement("i",{className:"fab fa-wpforms"})," \u0424\u043e\u0440\u043c\u0430 \u041e \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438"):"")))}}]),t}(n.Component),Ha=Object(S.b)(function(e){return{auth:e.auth,order:e.order,subadmin:e.subadmin,errors:e.errors}},{getOrders:Ie,addDisinfectorComment:Fe})(Object(p.g)(_a)),La=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={orders:[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getDisinfectorMaterials(this.props.auth.user.id),this.props.getSubadmOrders(this.props.auth.user.id)}},{key:"componentWillReceiveProps",value:function(e){e.subadmin.myOrders&&this.setState({orders:e.subadmin.myOrders})}},{key:"render",value:function(){var e=this.state.orders.sort(function(e,t){return new Date(e.dateFrom)-new Date(t.dateFrom)}).map(function(e,t){return r.a.createElement(Ha,{orderObject:e,index:t,key:t})}),t=ze(this.props.auth.user.materials).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 mt-2"},r.a.createElement("h2",{className:"text-center"},"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0421\u0443\u0431a\u0434\u043c\u0438\u043d\u0430 ",this.props.auth.user.name))),this.props.auth.loadingUser?r.a.createElement(me,null):r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",{className:"text-center"},"\u0412\u0430\u0448\u0438 \u0438\u043c\u0435\u044e\u0449\u0438\u0435\u0441\u044f \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b")),r.a.createElement("div",{className:"col-md-6 mx-auto mt-3"},r.a.createElement("div",{className:"card order"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},t)))))),r.a.createElement("div",{className:"container-fluid"},this.props.subadmin.loading?r.a.createElement(me,null):r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center mt-3"},"\u0412\u0430\u0448\u0438 \u0417\u0430\u043a\u0430\u0437\u044b")),e)))}}]),t}(n.Component),Ba=Object(S.b)(function(e){return{auth:e.auth,order:e.order,subadmin:e.subadmin,errors:e.errors}},{getSubadmOrders:function(e){return function(t){t(Ma()),g.a.post("/order/get-my-orders",{userId:e}).then(function(e){return t({type:"SUBADM_GET_MY_ORDERS",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}},getDisinfectorMaterials:Fa})(Object(p.g)(La)),Ua=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={array:[{}],currentMaterials:[],materials:[{material:"",amount:0,unit:""}],disinfector:""},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.changeSelect=function(e){var t=e.target.name.split("-")[1],n=a.state.materials;n[t].material=e.target.value.split("+")[0],n[t].unit=e.target.value.split("+")[1],a.setState({materials:n})},a.changeAmount=function(e){var t=e.target.name.split("-")[1],n=a.state.materials;n[t].amount=Number(e.target.value),a.setState({materials:n})},a.addMaterial=function(e){e.preventDefault();var t=a.state.array;t.push({});var n=a.state.materials;n.push({material:"",amount:0,unit:""}),a.setState({array:t,materials:n})},a.deleteMaterial=function(e){e.preventDefault();var t=a.state.array;t.pop();var n=a.state.materials;n.pop(),a.setState({array:t,materials:n})},a.onSubmit=function(e){e.preventDefault();var t=0,n=0,r=0;if(a.state.materials.forEach(function(e){""===e.material&&t++,e.amount<=0&&r++,a.state.currentMaterials.forEach(function(t){e.material===t.material&&e.unit===t.unit&&e.amount>t.amount&&n++})}),t>0)alert('\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u041f\u043e\u043b\u0435 "\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0438 \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"');else if(r>0)alert("\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043d\u0443\u043b\u0435\u043c \u0438\u043b\u0438 \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u0430\u043c \u0447\u0438\u0441\u043b\u043e\u043c");else if(n>0)alert("\u0423 \u0432\u0430\u0441 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432");else{var l={disinfector:a.state.disinfector,subadmin:a.props.auth.user.id,materials:a.state.materials};a.props.addMaterialToDisinfector(l,a.props.history),a.props.getAllDisinfectorsAndSubadmins()}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getAllDisinfectorsAndSubadmins(),this.props.getSubadminMaterials(this.props.auth.user.id),window.scrollTo({top:0})}},{key:"componentWillReceiveProps",value:function(e){this.setState({currentMaterials:e.auth.user.materials})}},{key:"render",value:function(){var e=this,t=ze(Object(j.a)(this.state.currentMaterials)).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount," ",e.unit)}),a=this.props.subadmin.disinfectors.map(function(e,t){var a=ze(Object(j.a)(e.materials)).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount," ",e.unit)});return r.a.createElement("div",{className:"col-lg-4 col-md-6",key:t},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("h4",{className:"text-center"},e.occupation,": ",e.name),r.a.createElement("p",{className:"mb-0"},"\u0418\u043c\u0435\u0435\u0442\u0441\u044f \u0432 \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432:"),r.a.createElement("ul",null,a)))))}),n=[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0435\u0449\u0435\u0441\u0442\u0432\u043e --",value:"",unit:""}];at.a.forEach(function(e){n.push({label:e.material,value:e.material,unit:e.unit})});var l=n.map(function(e,t){return r.a.createElement("option",{value:"".concat(e.value,"+").concat(e.unit),key:t},e.label," ",e.unit)}),c=this.state.array.map(function(t,a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{name:"consumption-".concat(a),className:"form-control",onChange:e.changeSelect,required:!0},l)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"quantity-".concat(a)},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e:"),r.a.createElement("input",{type:"number",step:"0.001",className:"form-control",name:"quantity-".concat(a),onChange:e.changeAmount,required:!0})),r.a.createElement("div",{className:"border-bottom-red"}))}),s=[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f --",value:""}];return this.props.subadmin.disinfectors.forEach(function(t){t._id!==e.props.auth.user.id&&s.push({label:"".concat(t.occupation," ").concat(t.name),value:t._id})}),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-lg-6 col-md-8 mx-auto"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h3",{className:"text-center"},"\u0423 \u0432\u0430\u0441 \u0438\u043c\u0435\u0435\u0442\u0441\u044f \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},t))))),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",{className:"text-center"},"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"))),this.props.subadmin.loading?r.a.createElement(me,null):r.a.createElement("div",{className:"row mt-2"},a),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-lg-6 col-md-8 mx-auto"},r.a.createElement("div",{className:"card mt-2"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h2",{className:"text-center"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"disinfector"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:"),this.props.subadmin.loading?r.a.createElement("p",null,"\u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u044b \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f..."):r.a.createElement("select",{value:this.state.disinfector,name:"disinfector",className:"form-control",onChange:this.onChange,required:!0},s.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}))),r.a.createElement("label",{htmlFor:"consumption"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0438 \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e:"),c,this.state.array.length<at.a.length?r.a.createElement("button",{className:"btn btn-primary mr-2",onClick:this.addMaterial},r.a.createElement("i",{className:"fas fa-plus"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"):"",1===this.state.array.length?"":r.a.createElement("button",{className:"btn btn-danger",onClick:this.deleteMaterial},r.a.createElement("i",{className:"fas fa-trash-alt"})," \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"),r.a.createElement("div",{className:"border-bottom"}),r.a.createElement("button",{type:"submit",className:"btn btn-success"},r.a.createElement("i",{className:"fas fa-plus-circle"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e")))))))}}]),t}(n.Component),Ga=Object(S.b)(function(e){return{auth:e.auth,subadmin:e.subadmin,errors:e.errors}},{getAllDisinfectorsAndSubadmins:Ee,getSubadminMaterials:function(e){return function(t){g.a.post("/subadmin/get-subadmin-materials",{id:e}).then(function(e){return t({type:"SUBADMIN_MATERIALS",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}},addMaterialToDisinfector:function(e,t){return function(a){g.a.post("/subadmin/add-material-to-disinfector",{object:e}).then(function(e){return a({type:"SUBADMIN_ADDS_MATERIAL",payload:e.data}),t.push("/subadmin")}).catch(function(e){return a({type:y,payload:e})})}}})(Object(p.g)(Ua)),qa=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={comings:a.props.subadmin.materialComing},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.comings,t=[];at.a.forEach(function(e){t.push({material:e.material,amount:0,unit:e.unit})}),e.forEach(function(e){e.materials.forEach(function(e){t.forEach(function(t){e.material===t.material&&e.unit===t.unit&&(t.amount+=e.amount)})})});var a=(t=ze(t)).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)}),n=e.map(function(e,t){var a=e.materials.map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)});return r.a.createElement("div",{className:"col-lg-4 col-md-6",key:t},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("li",null,"\u0410\u0434\u043c\u0438\u043d: ",e.admin.name),r.a.createElement("li",null,"\u0414\u0430\u0442\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.createdAt)),r.a.createElement("li",null,"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b:"),r.a.createElement("ul",null,a)))))});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-5 col-md-7 m-auto"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h4",{className:"text-center"},"\u0412\u0430\u0448 \u041e\u0431\u0449\u0438\u0439 \u041f\u0440\u0438\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0437\u0430 \u044d\u0442\u043e\u0442 \u043f\u0435\u0440\u0438\u043e\u0434:"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},a))))),r.a.createElement("div",{className:"row mt-3"},n))}}]),t}(n.Component),Qa=Object(S.b)(function(e){return{auth:e.auth,subadmin:e.subadmin,errors:e.errors}})(Object(p.g)(qa)),Wa=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={month:"",year:"",headingMonth:"",headingYear:"",hoverRange:void 0,selectedDays:[]},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.getMonthStats=function(e){e.preventDefault();var t={subadmin:a.props.auth.user.id,type:"month",month:Number(a.state.month),year:Number(a.state.year)};a.props.getMatComHistory(t),a.setState({headingMonth:t.month,headingYear:t.year})},a.getSpecificMonthStats=function(e){var t=Je(e),n=t.month,r=t.year,l={subadmin:a.props.auth.user.id,type:"month",month:n,year:r};a.props.getMatComHistory(l),a.setState({headingMonth:n,headingYear:r})},a.handleDayChange=function(e){var t={type:"week",subadmin:a.props.auth.user.id,days:ot(it(e).from)};a.props.getMatComHistory(t),a.setState({selectedDays:ot(it(e).from)})},a.handleDayEnter=function(e){a.setState({hoverRange:it(e)})},a.handleDayLeave=function(){a.setState({hoverRange:void 0})},a.handleWeekClick=function(e,t,n){var r={type:"week",subadmin:a.props.auth.user.id,days:ot(it(t[0]).from)};a.props.getMatComHistory(r),a.setState({selectedDays:ot(it(t[0]).from)})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e={subadmin:this.props.auth.user.id,type:"month",month:(new Date).getMonth(),year:(new Date).getFullYear()};this.props.getMatComHistory(e),this.props.getAllDisinfectors(),this.setState({headingMonth:e.month,headingYear:e.year})}},{key:"render",value:function(){var e=this,t=Ve(),a=t.monthLabels,n=t.yearLabels.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),l=a.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),c=this.state,s=c.hoverRange,o=c.selectedDays,i=o.length>0,m={hoverRange:s,selectedRange:i&&{from:o[0],to:o[6]},hoverRangeStart:s&&s.from,hoverRangeEnd:s&&s.to,selectedRangeStart:i&&o[0],selectedRangeEnd:i&&o[6]};return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("form",{onSubmit:this.getMonthStats,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u0412\u0430\u0448\u0438 \u041f\u0440\u0438\u0445\u043e\u0434\u044b \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u043f\u043e \u043c\u0435\u0441\u044f\u0446\u0430\u043c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"year"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0413\u043e\u0434:")),r.a.createElement("select",{name:"year",className:"form-control",onChange:this.onChange,required:!0},n)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"month"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041c\u0435\u0441\u044f\u0446:")),r.a.createElement("select",{name:"month",className:"form-control",onChange:this.onChange,required:!0},l)),r.a.createElement("button",{type:"submit",className:"btn btn-success mr-1 mt-1"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"),r.a.createElement("button",{type:"button",className:"btn btn-danger mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("current")}},"\u042d\u0442\u043e\u0442 \u043c\u0435\u0441\u044f\u0446"),r.a.createElement("button",{type:"button",className:"btn btn-primary mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("previous")}},"\u041f\u0440\u043e\u0448\u043b\u044b\u0439 \u043c\u0435\u0441\u044f\u0446"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 ml-auto weekly-stats mt-3"},r.a.createElement("div",{className:"SelectedWeekExample form-bg font-weight-bold"},r.a.createElement("h4",{className:"text-center"},"\u0412\u0430\u0448\u0438 \u041f\u0440\u0438\u0445\u043e\u0434\u044b \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u043f\u043e \u043d\u0435\u0434\u0435\u043b\u044f\u043c"),r.a.createElement(dt.a,{selectedDays:o,showWeekNumbers:!0,showOutsideDays:!0,modifiers:m,firstDayOfWeek:1,onDayClick:this.handleDayChange,onDayMouseEnter:this.handleDayEnter,onDayMouseLeave:this.handleDayLeave,onWeekClick:this.handleWeekClick})))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},"week"===this.props.subadmin.method?r.a.createElement("h3",{className:"text-center pl-3 pr-3"},"\u0412\u0430\u0448 \u041d\u0435\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u041f\u0440\u0438\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0437\u0430 ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[0])," - ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[6])):r.a.createElement("h3",{className:"text-center pl-3 pr-3"},"\u0412\u0430\u0448 \u041c\u0435\u0441\u044f\u0447\u043d\u044b\u0439 \u041f\u0440\u0438\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0437\u0430 ",Ke.a[this.state.headingMonth],", ",this.state.headingYear))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},this.props.subadmin.loadingStats?r.a.createElement(me,null):r.a.createElement(Qa,null))))}}]),t}(n.Component),Pa=Object(S.b)(function(e){return{auth:e.auth,subadmin:e.subadmin,errors:e.errors}},{getMatComHistory:function(e){return function(t){t(ka()),g.a.post("/subadmin/get-material-coming-history",{object:e}).then(function(e){return t({type:"SUBADMIN_MAT_COM_HISTORY",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}},getAllDisinfectors:Ca})(Object(p.g)(Wa)),Za=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={events:a.props.subadmin.addMatEvents},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.events,t=[];at.a.forEach(function(e){t.push({material:e.material,amount:0,unit:e.unit})}),e.forEach(function(e){e.materials.forEach(function(e){t.forEach(function(t){e.material===t.material&&e.unit===t.unit&&(t.amount+=e.amount)})})});var a=(t=ze(t)).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)}),n=e.map(function(e,t){var a=e.materials.map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)});return r.a.createElement("div",{className:"col-lg-4 col-md-6",key:t},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("h4",{className:"text-center"},"\u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440 ",e.disinfector.name),r.a.createElement("li",null,"\u0414\u0430\u0442\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.createdAt)),r.a.createElement("li",null,"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b:"),r.a.createElement("ul",null,a)))))});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-5 col-md-7 m-auto"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h4",{className:"text-center"},"\u0412\u0430\u0448\u0430 \u041e\u0431\u0449\u0430\u044f \u0420\u0430\u0437\u0434\u0430\u0447\u0430 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0437\u0430 \u044d\u0442\u043e\u0442 \u043f\u0435\u0440\u0438\u043e\u0434:"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},a))))),r.a.createElement("div",{className:"row mt-3"},n))}}]),t}(n.Component),Xa=Object(S.b)(function(e){return{auth:e.auth,subadmin:e.subadmin,errors:e.errors}})(Object(p.g)(Za)),Ka=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={month:"",year:"",headingMonth:"",headingYear:"",hoverRange:void 0,selectedDays:[]},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.getMonthStats=function(e){e.preventDefault();var t={subadmin:a.props.auth.user.id,type:"month",month:Number(a.state.month),year:Number(a.state.year)};a.props.getSubMatDistrib(t),a.setState({headingMonth:a.state.month,headingYear:a.state.year})},a.getSpecificMonthStats=function(e){var t=Je(e),n=t.month,r=t.year,l={subadmin:a.props.auth.user.id,type:"month",month:n,year:r};a.props.getSubMatDistrib(l),a.setState({headingMonth:n,headingYear:r})},a.handleDayChange=function(e){var t={type:"week",subadmin:a.props.auth.user.id,days:ot(it(e).from)};a.props.getSubMatDistrib(t),a.setState({selectedDays:ot(it(e).from)})},a.handleDayEnter=function(e){a.setState({hoverRange:it(e)})},a.handleDayLeave=function(){a.setState({hoverRange:void 0})},a.handleWeekClick=function(e,t,n){var r={type:"week",subadmin:a.props.auth.user.id,days:ot(it(t[0]).from)};a.props.getSubMatDistrib(r),a.setState({selectedDays:ot(it(t[0]).from)})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e={subadmin:this.props.auth.user.id,type:"month",month:(new Date).getMonth(),year:(new Date).getFullYear()};this.props.getSubMatDistrib(e),this.props.getAllDisinfectors(),this.setState({headingMonth:e.month,headingYear:e.year})}},{key:"render",value:function(){var e=this,t=Ve(),a=t.monthLabels,n=t.yearLabels.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),l=a.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),c=this.state,s=c.hoverRange,o=c.selectedDays,i=o.length>0,m={hoverRange:s,selectedRange:i&&{from:o[0],to:o[6]},hoverRangeStart:s&&s.from,hoverRangeEnd:s&&s.to,selectedRangeStart:i&&o[0],selectedRangeEnd:i&&o[6]};return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("form",{onSubmit:this.getMonthStats,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u0412\u0430\u0448\u0438 \u0420\u0430\u0437\u0434\u0430\u0447\u0438 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u043f\u043e \u043c\u0435\u0441\u044f\u0446\u0430\u043c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"year"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0413\u043e\u0434:")),r.a.createElement("select",{name:"year",className:"form-control",onChange:this.onChange,required:!0},n)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"month"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041c\u0435\u0441\u044f\u0446:")),r.a.createElement("select",{name:"month",className:"form-control",onChange:this.onChange,required:!0},l)),r.a.createElement("button",{type:"submit",className:"btn btn-success mr-1 mt-1"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"),r.a.createElement("button",{type:"button",className:"btn btn-danger mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("current")}},"\u042d\u0442\u043e\u0442 \u043c\u0435\u0441\u044f\u0446"),r.a.createElement("button",{type:"button",className:"btn btn-primary mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("previous")}},"\u041f\u0440\u043e\u0448\u043b\u044b\u0439 \u043c\u0435\u0441\u044f\u0446"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3 ml-auto weekly-stats"},r.a.createElement("div",{className:"SelectedWeekExample form-bg font-weight-bold"},r.a.createElement("h4",{className:"text-center"},"\u0412\u0430\u0448\u0438 \u0420\u0430\u0437\u0434\u0430\u0447\u0438 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u043f\u043e \u043d\u0435\u0434\u0435\u043b\u044f\u043c"),r.a.createElement(dt.a,{selectedDays:o,showWeekNumbers:!0,showOutsideDays:!0,modifiers:m,firstDayOfWeek:1,onDayClick:this.handleDayChange,onDayMouseEnter:this.handleDayEnter,onDayMouseLeave:this.handleDayLeave,onWeekClick:this.handleWeekClick})))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},"week"===this.props.subadmin.method?r.a.createElement("h3",{className:"text-center pl-3 pr-3"},"\u0412\u0430\u0448\u0430 \u041d\u0435\u0434\u0435\u043b\u044c\u043d\u0430\u044f \u0420\u0430\u0437\u0434\u0430\u0447\u0430 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0437\u0430 ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[0])," - ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[6])):r.a.createElement("h3",{className:"text-center pl-3 pr-3"},"\u0412\u0430\u0448\u0430 \u041c\u0435\u0441\u044f\u0447\u043d\u0430\u044f \u0420\u0430\u0437\u0434\u0430\u0447\u0430 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0437\u0430 ",Ke.a[this.state.headingMonth],", ",this.state.headingYear))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},this.props.subadmin.loadingStats?r.a.createElement(me,null):r.a.createElement(Xa,null))))}}]),t}(n.Component),Va=Object(S.b)(function(e){return{auth:e.auth,subadmin:e.subadmin,errors:e.errors}},{getAllDisinfectors:Ca,getSubMatDistrib:function(e){return function(t){t(ka()),g.a.post("/subadmin/get-material-distrib-history",{object:e}).then(function(e){return t({type:"SUBADMIN_MAT_DISTRIB_HISTORY",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}}})(Object(p.g)(Ka)),Ja=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={addComment:!1,disinfectorComment:a.props.orderObject.disinfectorComment,errors:{}},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.toggleAddComment=function(e){e.preventDefault(),a.setState({addComment:!a.state.addComment})},a.onSubmit=function(e){e.preventDefault();var t={id:a.props.orderObject._id,comment:a.state.disinfectorComment};a.props.addDisinfectorComment(t,a.props.history,a.props.auth.user.occupation),a.setState({addComment:!a.state.addComment})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.orderObject,t=this.state.errors,a=new Date;return r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("div",{className:"card order"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold list-unstyled"},e.prevFailedOrder&&r.a.createElement("h3",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"})),"corporate"===e.clientType?r.a.createElement(r.a.Fragment,null,e.clientId?r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.clientId.name):r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442"),r.a.createElement("li",{className:"text-danger"},"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.client)):"","individual"===e.clientType?r.a.createElement("li",{className:"text-danger"},"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.client):"",r.a.createElement("li",{className:"text-danger"},"\u0422\u0435\u043b. \u043d\u043e\u043c\u0435\u0440 \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.phone),""!==e.phone2?r.a.createElement("li",{className:"text-danger"},"\u0417\u0430\u043f\u0430\u0441\u043d\u043e\u0439 \u043d\u043e\u043c\u0435\u0440: ",e.phone2):"",r.a.createElement("li",{className:"text-danger"},"\u0414\u0430\u0442\u0430 \u0438 \u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.dateFrom)),r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u0440\u0435\u0441: ",e.address),r.a.createElement("li",{className:"text-danger"},"\u0422\u0438\u043f \u0443\u0441\u043b\u0443\u0433\u0438: ",e.typeOfService),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430: ",e.comment?e.comment:"--"),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430: ",this.state.disinfectorComment?this.state.disinfectorComment:"--"),e.userAcceptedOrder?r.a.createElement("li",null,"\u0417\u0430\u043a\u0430\u0437 \u043f\u0440\u0438\u043d\u044f\u043b: ",e.userAcceptedOrder.occupation," ",e.userAcceptedOrder.name):"",e.userCreated?r.a.createElement("li",null,"\u0417\u0430\u043a\u0430\u0437 \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d: ",e.userCreated.occupation," ",e.userCreated.name," ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.createdAt)):""),this.state.addComment?r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(Rt,{name:"disinfectorComment",placeholder:"\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",value:this.state.disinfectorComment,onChange:this.onChange,error:t.disinfectorComment}),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{type:"submit",className:"btn btn-success mr-3"},r.a.createElement("i",{className:"fas fa-plus-circle"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),r.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:this.toggleAddComment},r.a.createElement("i",{className:"fas fa-window-close"})," \u0417\u0430\u043a\u0440\u044b\u0442\u044c"))):r.a.createElement("button",{type:"button",className:"btn btn-success d-block",onClick:this.toggleAddComment},r.a.createElement("i",{className:"fas fa-comment-dots"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"),a.getTime()>new Date(e.dateFrom).getTime()?r.a.createElement(u.b,{to:"/order-complete-form/".concat(e._id),className:"btn btn-primary mt-3"},r.a.createElement("i",{className:"fas fa-file-alt"})," \u0424\u043e\u0440\u043c\u0430 \u041e \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438"):"")))}}]),t}(n.Component),za=Object(S.b)(function(e){return{auth:e.auth,order:e.order,errors:e.errors}},{getOrders:Ie,addDisinfectorComment:Fe,deleteOrder:Ye})(Object(p.g)(Ja)),$a=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r))))._isMounted=!1,a.state={orders:a.props.order.orders},a.addOrder=function(e){a._isMounted&&a.setState(function(t){var a=Object(j.a)(t.orders);return a.push(e),{orders:a.sort(function(e,t){return new Date(e.dateFrom)-new Date(t.dateFrom)})}})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,Be()(Ge.a).on("createOrder",function(t){e.props.auth.user.id===t.disinfectorId&&e.addOrder(t.order)})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.state.orders.sort(function(e,t){return new Date(e.dateFrom)-new Date(t.dateFrom)}),t=null;return e&&(t=r.a.createElement(r.a.Fragment,null,e.map(function(e,t){return r.a.createElement(za,{orderObject:e,index:t,key:t})}))),t}}]),t}(n.Component),en=Object(S.b)(function(e){return{auth:e.auth,order:e.order,errors:e.errors}},{getOrders:Ie,addDisinfectorComment:Fe})(Object(p.g)($a)),tn=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getDisinfectorMaterials(this.props.auth.user.id),this.props.getOrders(this.props.auth.user.id)}},{key:"render",value:function(){var e=ze(this.props.auth.user.materials).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 mt-2"},r.a.createElement("h2",{className:"text-center"},"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430 ",this.props.auth.user.name))),this.props.auth.loadingUser?r.a.createElement(me,null):r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",{className:"text-center"},"\u0412\u0430\u0448\u0438 \u0438\u043c\u0435\u044e\u0449\u0438\u0435\u0441\u044f \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b")),r.a.createElement("div",{className:"col-lg-6 col-md-8 mx-auto mt-3"},r.a.createElement("div",{className:"card order"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},e)))))),r.a.createElement("div",{className:"container-fluid"},this.props.order.loading?r.a.createElement(me,null):r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center mt-3"},"\u0412\u0430\u0448\u0438 \u0417\u0430\u043a\u0430\u0437\u044b")),r.a.createElement(en,null))))}}]),t}(n.Component),an=Object(S.b)(function(e){return{auth:e.auth,order:e.order,errors:e.errors}},{getOrders:Ie,getDisinfectorMaterials:Fa})(Object(p.g)(tn)),nn=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={orders:[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.order.completeOrdersInMonth&&this.props.order.completeOrdersInMonth.length>0&&this.setState({orders:this.props.order.completeOrdersInMonth})}},{key:"render",value:function(){var e=this.state.orders.map(function(e,t){var a=[];e.disinfectors.forEach(function(e){a.push({user:e.user,consumption:e.consumption})});var n=a.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("p",{className:"mb-0"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c: ",e.user.occupation," ",e.user.name),e.consumption.map(function(e,t){return r.a.createElement("p",{key:t,className:"mb-0"},e.material,": ",e.amount.toLocaleString()," ",e.unit)}))});return r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3",key:t},r.a.createElement("div",{className:"card order"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},e.prevFailedOrder&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),e.failed&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),e.operatorDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.operatorConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.operatorCheckedAt),")"),r.a.createElement("li",null,"\u0411\u0430\u043b\u043b (0-5): ",e.score),r.a.createElement("li",null,"\u041e\u0442\u0437\u044b\u0432 \u041a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.clientReview?e.clientReview:"\u041d\u0435\u0442 \u041e\u0442\u0437\u044b\u0432\u0430")):r.a.createElement("li",{className:"text-danger"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.operatorCheckedAt),")")):r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.accountantDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.accountantConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.accountantCheckedAt),")"),r.a.createElement("li",null,"\u0421\u0447\u0435\u0442-\u0424\u0430\u043a\u0442\u0443\u0440\u0430: ",e.invoice),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement("li",{className:"text-danger"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.accountantCheckedAt),")")):r.a.createElement(r.a.Fragment,null,e.adminDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0410\u0434\u043c\u0438\u043d \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.adminConfirmed?r.a.createElement("li",{className:"text-success"},"\u0410\u0434\u043c\u0438\u043d \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.adminCheckedAt),")"):r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u043c\u0438\u043d \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.adminCheckedAt),")")):r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443")),"corporate"===e.clientType?r.a.createElement(r.a.Fragment,null,e.clientId?r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.clientId.name):r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442"),r.a.createElement("li",{className:"text-danger"},"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.client)):"","individual"===e.clientType?r.a.createElement("li",{className:"text-danger"},"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.client):"",r.a.createElement("li",{className:"text-danger"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u041a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.phone),e.phone2?r.a.createElement("li",{className:"text-danger"},"\u0414\u0440\u0443\u0433\u043e\u0439 \u043d\u043e\u043c\u0435\u0440: ",e.phone2):"",r.a.createElement("li",{className:"text-danger"},"\u0414\u0430\u0442\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},e.dateFrom)),r.a.createElement("li",{className:"text-danger"},"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: \u0421 ",r.a.createElement(re.a,{format:"HH:mm"},e.dateFrom)," \u041f\u041e ",r.a.createElement(re.a,{format:"HH:mm"},e.completedAt)),r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u0440\u0435\u0441: ",e.address),r.a.createElement("li",{className:"text-danger"},"\u0422\u0438\u043f \u0443\u0441\u043b\u0443\u0433\u0438: ",e.typeOfService),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430: ",e.comment?e.comment:"--"),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430: ",e.disinfectorComment?e.disinfectorComment:"--"),r.a.createElement("li",null,"\u0420\u0430\u0441\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 (\u0437\u0430\u043a\u0430\u0437 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u043b\u0438 ",e.disinfectors.length," \u0447\u0435\u043b):"),r.a.createElement("ul",{className:"font-bold mb-0"},n),"corporate"===e.clientType?r.a.createElement(r.a.Fragment,null,"cash"===e.paymentMethod?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u041d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u0411\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),r.a.createElement("li",null,"\u041d\u043e\u043c\u0435\u0440 \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430: ",e.contractNumber))):"",e.completed&&"individual"===e.clientType&&e.cost?r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS  (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)"):"",r.a.createElement("li",null,"\u0424\u043e\u0440\u043c\u0430 \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0417\u0430\u043a\u0430\u0437\u0430 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.completedAt))))))});return r.a.createElement("div",{className:"row"},""!==this.props.searchMethod&&0===this.state.orders.length?r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",{className:"text-center"},"\u041d\u0435\u0442 \u0417\u0430\u043f\u0440\u043e\u0441\u043e\u0432")):e)}}]),t}(n.Component),rn=Object(S.b)(function(e){return{auth:e.auth,order:e.order,operator:e.operator,errors:e.errors}})(Object(p.g)(nn)),ln=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={month:"",year:"",day:"",headingMonth:"",headingYear:"",headingDay:"",method:"",hoverRange:void 0,selectedDays:[]},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault();var t={disinfectorId:a.props.auth.user.id,type:"month",month:a.state.month,year:a.state.year};a.props.getCompleteOrdersInMonth(t),a.setState({method:"month",headingMonth:a.state.month,headingYear:a.state.year})},a.getDayStats=function(e){e.preventDefault();var t={disinfectorId:a.props.auth.user.id,type:"day",day:a.state.day};a.props.getCompleteOrdersInMonth(t),a.setState({method:"day",headingDay:a.state.day.split("-").reverse().join("-")})},a.handleDayChange=function(e){var t={disinfectorId:a.props.auth.user.id,type:"week",days:ot(it(e).from)};a.props.getCompleteOrdersInMonth(t),a.setState({method:"week",selectedDays:ot(it(e).from)})},a.handleDayEnter=function(e){a.setState({hoverRange:it(e)})},a.handleDayLeave=function(){a.setState({hoverRange:void 0})},a.handleWeekClick=function(e,t,n){var r={disinfectorId:a.props.auth.user.id,type:"week",days:ot(it(t[0]).from)};a.props.getCompleteOrdersInMonth(r),a.setState({method:"week",selectedDays:ot(it(t[0]).from)})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.order.compOrderMethod;if(e&&this.setState({method:e}),"day"===e){var t=this.props.order.compOrderInput.day.split("-").reverse().join("-");this.setState({headingDay:t})}"week"===e&&this.setState({selectedDays:this.props.order.compOrderInput.days}),"month"===e&&this.setState({headingMonth:this.props.order.compOrderInput.month,headingYear:this.props.order.compOrderInput.year})}},{key:"render",value:function(){var e=this.state,t=e.hoverRange,a=e.selectedDays,n=a.length>0,l={hoverRange:t,selectedRange:n&&{from:a[0],to:a[6]},hoverRangeStart:t&&t.from,hoverRangeEnd:t&&t.to,selectedRangeStart:n&&a[0],selectedRangeEnd:n&&a[6]};return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0412\u0430\u0448\u0438 \u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0417\u0430\u043f\u0440\u043e\u0441\u044b"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("form",{onSubmit:this.getDayStats,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0417\u0430\u043f\u0440\u043e\u0441\u044b \u0437\u0430 \u0434\u0435\u043d\u044c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"day"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0414\u0435\u043d\u044c:")),r.a.createElement("input",{type:"date",name:"day",className:"form-control",onChange:this.onChange,required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 weekly-stats mt-3"},r.a.createElement("div",{className:"SelectedWeekExample form-bg font-weight-bold"},r.a.createElement("h4",{className:"text-center"},"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0417\u0430\u043f\u0440\u043e\u0441\u044b \u0437\u0430 \u043d\u0435\u0434\u0435\u043b\u044e"),r.a.createElement(dt.a,{selectedDays:a,showWeekNumbers:!0,showOutsideDays:!0,modifiers:l,firstDayOfWeek:1,onDayClick:this.handleDayChange,onDayMouseEnter:this.handleDayEnter,onDayMouseLeave:this.handleDayLeave,onWeekClick:this.handleWeekClick})))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},"week"===this.state.method?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0412\u0430\u0448\u0438 \u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0437\u0430 ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[0])," - ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[6])):"","month"===this.state.method?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0412\u0430\u0448\u0430 \u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0437\u0430 ",Ke.a[this.state.headingMonth],", ",this.state.headingYear):"","day"===this.state.method?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0412\u0430\u0448\u0430 \u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0437\u0430 ",this.state.headingDay):"")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},this.props.order.loading?r.a.createElement(me,null):r.a.createElement(rn,{searchMethod:this.state.method}))))}}]),t}(n.Component),cn=Object(S.b)(function(e){return{auth:e.auth,order:e.order,operator:e.operator,errors:e.errors}},{getCompleteOrdersInMonth:function(e){return function(t){t({type:"SET_COMP_ORDER_METHOD_INPUT",payload:e}),t(Re()),g.a.post("/order/get-complete-order-in-month",{object:e}).then(function(e){return t({type:"GET_COMPLETE_ORDERS_IN_MONTH",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}}})(Object(p.g)(ln)),sn=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={orders:a.props.disinfector.stats.orders,acceptedOrders:a.props.disinfector.stats.acceptedOrders,addedMaterials:a.props.disinfector.stats.addedMaterials},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=et(this.state.orders),a=t.totalScore,n=t.totalOrders,l=t.completed,c=t.confirmedOrders,s=t.rejected,o=t.consultAndOsmotrConfirmed,i=t.totalSumForDisinfector,m=t.failed,d=t.povtors,u=[],p=0;at.a.forEach(function(e){var t={material:e.material,amount:0,unit:e.unit};u.push(t)}),this.state.orders.filter(function(e){return e.completed&&!e.failed&&!e.hasOwnProperty("prevFailedOrder")}).forEach(function(t){t.disinfectors.forEach(function(t){t.user._id.toString()===e.props.auth.user.id&&t.consumption.forEach(function(e){u.forEach(function(t){e.material===t.material&&e.unit===t.unit&&(t.amount+=e.amount)})})})});var h=$e({totalScore:a,totalOrders:c.length,failedOrders:m})||0,E=(u=ze(u)).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)});this.state.acceptedOrders.forEach(function(e){e.completed&&!e.failed&&e.operatorConfirmed&&(e.accountantConfirmed||e.adminConfirmed)&&(p+=e.cost)});var f=[];at.a.forEach(function(e){var t={material:e.material,amount:0,unit:e.unit};f.push(t)}),this.state.addedMaterials.length>0&&this.state.addedMaterials.forEach(function(e){e.materials.forEach(function(e){f.forEach(function(t){e.material===t.material&&e.unit===t.unit&&(t.amount+=e.amount)})})});var g=this.state.addedMaterials.map(function(e,t){var a=e.materials.map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)});return r.a.createElement("div",{className:"col-lg-4 col-md-6",key:t},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("li",null,"\u041a\u0442\u043e \u0440\u0430\u0437\u0434\u0430\u043b: ",e.admin.occupation," ",e.admin.name),r.a.createElement("li",null,"\u041a\u043e\u0433\u0434\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.createdAt)),r.a.createElement("li",null,"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b:"),r.a.createElement("ul",null,a)))))}),b=ze(f).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h4",{className:"text-center"},"\u0417\u0430\u043a\u0430\u0437\u044b"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("li",null,"\u0412\u0441\u0435\u0433\u043e \u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043e \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",n),r.a.createElement("li",null,"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",l),r.a.createElement("li",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043e \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",c.length," (\u0438\u0437 \u043d\u0438\u0445 \u041a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u0438 \u0438 \u041e\u0441\u043c\u043e\u0442\u0440\u044b: ",o,")"),r.a.createElement("li",{className:"pt-2"},"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",i.toLocaleString()," UZS"),r.a.createElement("li",{className:"pb-2"},"\u0421\u0440\u0435\u0434\u043d\u0438\u0439 \u0431\u0430\u043b\u043b: ",h.toFixed(2)," (\u0438\u0437 5)"),r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0440\u0433\u043d\u0443\u0442\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432: ",s),r.a.createElement("li",null,"\u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",m),r.a.createElement("li",{className:"pb-2"},"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",d),r.a.createElement("li",null,"\u041f\u0440\u0438\u043d\u044f\u0442\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",this.state.acceptedOrders.length),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u043f\u0440\u0438\u043d\u044f\u0442\u044b\u0445 \u0437\u0430\u043a\u0430\u0437\u043e\u0432: ",p.toLocaleString()," UZS"),r.a.createElement("h6",{className:"mt-2"},"* \u043d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b \u043d\u0435 \u0432\u0445\u043e\u0434\u044f\u0442 \u0432 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b \u0438 \u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443"))))),r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h4",{className:"text-center"},"\u041e\u0431\u0449\u0438\u0439 \u041f\u0440\u0438\u0445\u043e\u0434 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0437\u0430 \u044d\u0442\u043e\u0442 \u043f\u0435\u0440\u0438\u043e\u0434:"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},b)))),r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h4",{className:"text-center"},"\u041e\u0431\u0449\u0438\u0439 \u0420\u0430\u0441\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0437\u0430 \u044d\u0442\u043e\u0442 \u043f\u0435\u0440\u0438\u043e\u0434:"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},E,r.a.createElement("h6",{className:"mt-2"},"* \u0441\u044e\u0434\u0430 \u043d\u0435 \u0432\u0445\u043e\u0434\u044f\u0442 \u043d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b")))))),this.state.addedMaterials.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0412\u0430\u0448\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0437\u0430 \u044d\u0442\u043e\u0442 \u043f\u0435\u0440\u0438\u043e\u0434"))),r.a.createElement("div",{className:"row mt-2"},g)):"")}}]),t}(n.Component),on=Object(S.b)(function(e){return{auth:e.auth,order:e.order,disinfector:e.disinfector,errors:e.errors}})(Object(p.g)(sn)),mn=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={month:"",year:"",day:"",headingMonth:"",headingYear:"",headingDay:"",hoverRange:void 0,selectedDays:[]},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.getMonthStats=function(e){e.preventDefault();var t={id:a.props.auth.user.id,type:"month",month:a.state.month,year:a.state.year};a.props.getDisinfectorStats(t),a.setState({headingMonth:a.state.month,headingYear:a.state.year})},a.getSpecificMonthStats=function(e){var t=Je(e),n=t.month,r=t.year,l={id:a.props.auth.user.id,type:"month",month:n,year:r};a.props.getDisinfectorStats(l),a.setState({headingMonth:n,headingYear:r})},a.getDayStats=function(e){e.preventDefault();var t={id:a.props.auth.user.id,type:"day",day:a.state.day};a.props.getDisinfectorStats(t),a.setState({headingDay:a.state.day.split("-").reverse().join("-")})},a.handleDayChange=function(e){var t={id:a.props.auth.user.id,type:"week",days:ot(it(e).from)};a.props.getDisinfectorStats(t),a.setState({selectedDays:ot(it(e).from)})},a.handleDayEnter=function(e){a.setState({hoverRange:it(e)})},a.handleDayLeave=function(){a.setState({hoverRange:void 0})},a.handleWeekClick=function(e,t,n){var r={id:a.props.auth.user.id,type:"week",days:ot(it(t[0]).from)};a.props.getDisinfectorStats(r),a.setState({selectedDays:ot(it(t[0]).from)})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.clearStatsData()}},{key:"render",value:function(){var e=this,t=Ve(),a=t.monthLabels,n=t.yearLabels.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),l=a.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),c=this.state,s=c.hoverRange,o=c.selectedDays,i=o.length>0,m={hoverRange:s,selectedRange:i&&{from:o[0],to:o[6]},hoverRangeStart:s&&s.from,hoverRangeEnd:s&&s.to,selectedRangeStart:i&&o[0],selectedRangeEnd:i&&o[6]};return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center"},"\u0412\u0430\u0448\u0430 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("form",{onSubmit:this.getMonthStats,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u043c\u0435\u0441\u044f\u0446\u0430\u043c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"year"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0413\u043e\u0434:")),r.a.createElement("select",{name:"year",className:"form-control",onChange:this.onChange,required:!0},n)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"month"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041c\u0435\u0441\u044f\u0446:")),r.a.createElement("select",{name:"month",className:"form-control",onChange:this.onChange,required:!0},l)),r.a.createElement("button",{type:"submit",className:"btn btn-success mr-1 mt-1"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"),r.a.createElement("button",{type:"button",className:"btn btn-danger mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("current")}},"\u042d\u0442\u043e\u0442 \u043c\u0435\u0441\u044f\u0446"),r.a.createElement("button",{type:"button",className:"btn btn-primary mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("previous")}},"\u041f\u0440\u043e\u0448\u043b\u044b\u0439 \u043c\u0435\u0441\u044f\u0446"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("form",{onSubmit:this.getDayStats,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u0434\u043d\u044f\u043c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"day"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0414\u0435\u043d\u044c:")),r.a.createElement("input",{type:"date",name:"day",className:"form-control",onChange:this.onChange,required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 weekly-stats mt-3"},r.a.createElement("div",{className:"SelectedWeekExample form-bg font-weight-bold"},r.a.createElement("h4",{className:"text-center"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u043d\u0435\u0434\u0435\u043b\u044f\u043c"),r.a.createElement(dt.a,{selectedDays:o,showWeekNumbers:!0,showOutsideDays:!0,modifiers:m,firstDayOfWeek:1,onDayClick:this.handleDayChange,onDayMouseEnter:this.handleDayEnter,onDayMouseLeave:this.handleDayLeave,onWeekClick:this.handleWeekClick})))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},"week"===this.props.disinfector.method?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0412\u0430\u0448\u0430 \u041d\u0435\u0434\u0435\u043b\u044c\u043d\u0430\u044f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0437\u0430 ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[0])," - ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[6])):"","month"===this.props.disinfector.method?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0412\u0430\u0448\u0430 \u041c\u0435\u0441\u044f\u0447\u043d\u0430\u044f \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0437\u0430 ",Ke.a[this.state.headingMonth],", ",this.state.headingYear):"","day"===this.props.disinfector.method?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0412\u0430\u0448\u0430 \u0414\u043d\u0435\u0432\u043d\u0430\u044f \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0437\u0430 ",this.state.headingDay):"")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},this.props.disinfector.loadingDisinfStats?r.a.createElement(me,null):r.a.createElement(on,null))))}}]),t}(n.Component),dn=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,order:e.order,disinfector:e.disinfector,errors:e.errors}},{getDisinfectorStats:function(e){return function(t){t(xa()),g.a.post("/stats/disinfector-sees-his-own-stats",{object:e}).then(function(a){return"month"===e.type?t({type:"GET_DISINF_MONTH_STATS",payload:a.data}):"week"===e.type?t({type:"GET_DISINF_WEEK_STATS",payload:a.data}):"day"===e.type?t({type:"GET_DISINF_DAY_STATS",payload:a.data}):void 0}).catch(function(e){return t({type:y,payload:e})})}},clearStatsData:ve})(Object(p.g)(mn)),un=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={loggedDisinf:{disinfectorId:a.props.auth.user.id,consumption:[{material:"",amount:"",unit:""}]},loggedHelpArray:[{}],array:[],disinfectorAmount:1,paymentMethod:"",cost:"",inputContractFormat:"manually",contractNumber:"",guarantee:"",disinfectorComment:a.props.order.orderById.disinfectorComment,allDisinfectors:[]},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.changeContractInputFormat=function(e,t){t.preventDefault(),a.setState({inputContractFormat:e,contractNumber:""})},a.changeDisinfectorAmount=function(e){var t=Number(e.target.value),n={disinfectorId:"",consumption:[{material:"",amount:"",unit:""}],helpArray:[{}]},r=Object(j.a)(a.state.array);if(t>a.state.array.length)for(var l=1;l<=t-a.state.array.length;l++)r.push(n);else if(t<a.state.array.length)for(var c=1;c<=a.state.array.length-t;c++)r.pop();a.setState({array:r,disinfectorAmount:t})},a.changeLoggedSelect=function(e){var t=e.target.name.split("-")[1],n=a.state.loggedDisinf;n.consumption[t].material=e.target.value.split("+")[0],n.consumption[t].unit=e.target.value.split("+")[1],a.setState({loggedDisinf:n})},a.changeLoggedAmount=function(e){var t=e.target.name.split("-")[1],n=a.state.loggedDisinf;n.consumption[t].amount=Number(e.target.value),a.setState({loggedDisinf:n})},a.addMaterialLogged=function(e){e.preventDefault();var t=a.state.loggedHelpArray;t.push({});var n=a.state.loggedDisinf;n.consumption.push({material:"",amount:"",unit:""}),a.setState({loggedHelpArray:t,loggedDisinf:n})},a.deleteMaterialLogged=function(e){e.preventDefault();var t=a.state.loggedHelpArray;t.pop();var n=a.state.loggedDisinf;n.consumption.pop(),a.setState({loggedHelpArray:t,loggedDisinf:n})},a.changeDisinfector=function(e){var t=Number(e.target.name.split("-")[1]),n=Object(j.a)(a.state.array);n[t]=Object(A.a)({},a.state.array[t],{disinfectorId:e.target.value}),a.setState({array:n})},a.changeSelect=function(e){var t=Number(e.target.name.split("-")[1]),n=Number(e.target.name.split("-")[2]),r=e.target.value.split("+")[0],l=e.target.value.split("+")[1],c=Object(j.a)(a.state.array);c[t]=Object(A.a)({},a.state.array[t],{consumption:Object(j.a)(a.state.array[t].consumption)}),c[t].consumption[n]=Object(A.a)({},a.state.array[t].consumption[n],{material:r,unit:l}),a.setState({array:c})},a.changeAmount=function(e){var t=Number(e.target.name.split("-")[1]),n=Number(e.target.name.split("-")[2]),r=Number(e.target.value),l=Object(j.a)(a.state.array);l[t]=Object(A.a)({},a.state.array[t],{consumption:Object(j.a)(a.state.array[t].consumption)}),l[t].consumption[n]=Object(A.a)({},a.state.array[t].consumption[n],{amount:r}),a.setState({array:l})},a.addMatDisinf=function(e,t){t.preventDefault();var n=Object(j.a)(a.state.array);n[e]=Object(A.a)({},a.state.array[e],{consumption:[].concat(Object(j.a)(a.state.array[e].consumption),[{material:"",amount:"",unit:""}]),helpArray:[].concat(Object(j.a)(a.state.array[e].helpArray),[{}])}),a.setState({array:n})},a.deleteMatDisinf=function(e,t){t.preventDefault();var n=Object(j.a)(a.state.array),r=Object(j.a)(n[e].consumption),l=Object(j.a)(n[e].helpArray);r.pop(),l.pop(),n[e]=Object(A.a)({},a.state.array[e],{consumption:r,helpArray:l}),a.setState({array:n})},a.onSubmit=function(e){e.preventDefault();var t=0,n=0,r=0,l=0,c=0;if(a.state.loggedDisinf.consumption.forEach(function(e){""===e.material&&c++,e.amount<=0&&l++,a.props.auth.user.materials.forEach(function(a){e.material===a.material&&e.unit===a.unit&&e.amount>a.amount&&t++})}),a.state.array.forEach(function(e,t){for(var r=t+1;r<a.state.array.length;r++)e.disinfectorId===a.state.array[r].disinfectorId&&n++}),a.state.array.forEach(function(e){a.state.allDisinfectors.forEach(function(t){e.disinfectorId===t._id&&e.consumption.forEach(function(e){e.amount<=0&&l++,""===e.material&&c++,t.materials.forEach(function(t){e.material===t.material&&e.unit===t.unit&&e.amount>t.amount&&r++})})})}),l>0)alert("\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043d\u0443\u043b\u0435\u043c \u0438\u043b\u0438 \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u0447\u0438\u0441\u043b\u043e\u043c");else if(c>0)alert('\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0412\u0441\u0435 \u041f\u043e\u043b\u044f "\u0420\u0430\u0441\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432"');else if(t>0)alert("\u0423 \u0412\u0430\u0441 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432");else if(n>0)alert("\u0412\u044b \u0432\u044b\u0431\u0440\u0430\u043b\u0438 \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u0445 \u0434\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u043e\u0432");else if(r>0)alert("\u0423 \u0434\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u043e\u0432 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432");else{var s;"individual"===a.props.order.orderById.clientType?s="cash":"corporate"===a.props.order.orderById.clientType&&(s=a.state.paymentMethod);var o=!1;!a.props.order.orderById.prevFailedOrder||"individual"!==a.props.order.orderById.clientType&&"cash"!==a.state.paymentMethod||(o=!0);var i=[a.state.loggedDisinf].concat(Object(j.a)(a.state.array)),m={clientType:a.props.order.orderById.clientType,orderId:a.props.match.params.id,paymentMethod:s,cost:o?0:a.state.cost,guarantee:a.state.guarantee,contractNumber:a.state.contractNumber||"",disinfectorComment:a.state.disinfectorComment||"",disinfectors:i};a.props.submitCompleteOrder(m,a.props.history,a.props.auth.user.occupation)}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getOrderById(this.props.match.params.id),this.props.getAllDisinfectorsAndSubadmins(),this.props.getDisinfectorMaterials(this.props.auth.user.id),window.scrollTo({top:0})}},{key:"componentWillReceiveProps",value:function(e){this.setState({allDisinfectors:e.disinfector.disinfectors})}},{key:"render",value:function(){var e=this,t=this.props.order.orderById,a=[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0435\u0449\u0435\u0441\u0442\u0432\u043e --",value:"",unit:""}];at.a.forEach(function(e){a.push({label:e.material,value:e.material,unit:e.unit})});var n=a.map(function(e,t){return r.a.createElement("option",{value:"".concat(e.value,"+").concat(e.unit),key:t},e.label," ",e.unit)}),l=[{label:"-- \u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0434\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u043e\u0432 (\u043a\u0440\u043e\u043c\u0435 \u0412\u0430\u0441) \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u043b\u0438 \u0437\u0430\u043a\u0430\u0437? --",value:""},{label:"\u0417\u0430\u043a\u0430\u0437 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u043b\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0412\u044b",value:0}],c=[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430 -- ",value:""}];this.state.allDisinfectors.forEach(function(t,a){l.push({label:a+1,value:a+1}),t._id!==e.props.auth.user.id&&c.push({label:"".concat(t.occupation," ").concat(t.name),value:t._id})});var s=l.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),o=c.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),i=ze(Object(j.a)(this.props.auth.user.materials)).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount," ",e.unit)}),m=this.state.loggedHelpArray.map(function(t,a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{name:"loggedConsumption-".concat(a),className:"form-control",onChange:e.changeLoggedSelect,required:!0},n)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"loggedQuantity-".concat(a)},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e:"),r.a.createElement("input",{type:"number",step:"0.001",className:"form-control",name:"loggedQuantity-".concat(a),onChange:e.changeLoggedAmount,required:!0})),r.a.createElement("div",{className:"border-bottom-red"}))}),d=this.state.array.map(function(t,a){var l=t.helpArray.map(function(t,l){return r.a.createElement(r.a.Fragment,{key:l},r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{name:"consumption-".concat(a,"-").concat(l),className:"form-control",onChange:e.changeSelect,required:!0},n)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"quantity-".concat(a,"-").concat(l)},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e:"),r.a.createElement("input",{type:"number",step:"0.001",className:"form-control",name:"quantity-".concat(a,"-").concat(l),onChange:e.changeAmount,required:!0})),r.a.createElement("div",{className:"border-bottom-red"}))});return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement("h3",null,"\u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440 ",a+1),r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{name:"dis-".concat(a),className:"form-control",onChange:e.changeDisinfector,required:!0},o)),l,t.helpArray.length<at.a.length?r.a.createElement("button",{className:"btn btn-primary mr-2 mt-2",onClick:e.addMatDisinf.bind(e,a)},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"):"",1===t.helpArray.length?"":r.a.createElement("button",{className:"btn btn-danger mt-2",onClick:e.deleteMatDisinf.bind(e,a)},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"),r.a.createElement("div",{className:"border-bottom"}))}),u="";if(t.returnedBack&&!t.returnHandled){var p=[];t.disinfectors.forEach(function(e){p.push({user:e.user,consumption:e.consumption})});var h=p.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("p",{className:"mb-0"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c: ",e.user.occupation," ",e.user.name),e.consumption.map(function(e,t){return r.a.createElement("p",{key:t,className:"mb-0"},e.material,": ",e.amount.toLocaleString()," ",e.unit)}))});u=r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("h4",null,"\u042d\u0442\u043e \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437"),r.a.createElement("li",null,"\u0412 \u043f\u0440\u043e\u0448\u043b\u044b\u0439 \u0440\u0430\u0437 \u0432\u044b \u0437\u0430\u043f\u043e\u043b\u043d\u044f\u043b\u0438 \u0444\u043e\u0440\u043c\u0443 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f:"),r.a.createElement("li",null,"\u0420\u0430\u0441\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 (\u0437\u0430\u043a\u0430\u0437 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u043b\u0438 ",t.disinfectors.length," \u0447\u0435\u043b):"),r.a.createElement("ul",{className:"font-bold mb-0"},h),r.a.createElement("li",null,"\u0421\u0440\u043e\u043a \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0438 (\u0432 \u043c\u0435\u0441\u044f\u0446\u0430\u0445): ",t.guarantee),"corporate"===t.clientType?r.a.createElement(r.a.Fragment,null,"cash"===t.paymentMethod?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u041d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",t.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(t.cost/t.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u0411\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),r.a.createElement("li",null,"\u041d\u043e\u043c\u0435\u0440 \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430: ",t.contractNumber))):"","individual"===t.clientType?r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",t.cost.toLocaleString()," UZS  (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(t.cost/t.disinfectors.length).toLocaleString()," UZS)"):"",r.a.createElement("li",null,"\u0424\u043e\u0440\u043c\u0430 \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0417\u0430\u043a\u0430\u0437\u0430 \u0431\u044b\u043b\u0430 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.completedAt))))))}var E=[];"corporate"===t.clientType&&t.clientId&&t.clientId.contracts&&(E=Object(j.a)(t.clientId.contracts));var f=E.map(function(e,t){return r.a.createElement("option",{value:e,key:t},e)});return r.a.createElement("div",{className:"container-fluid p-0"},this.props.order.loading?r.a.createElement(me,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row m-0"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center"},"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0437\u0430\u043a\u0430\u0437\u0435")),r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},t.prevFailedOrder&&r.a.createElement("h3",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"})),t.failed&&r.a.createElement("h3",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"})),t.disinfectorId&&r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439: ",t.disinfectorId.occupation," ",t.disinfectorId.name),"corporate"===t.clientType?r.a.createElement(r.a.Fragment,null,t.clientId?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",t.clientId.name),r.a.createElement("li",{className:"text-danger"},"\u0418\u041d\u041d: ",t.clientId.inn||"--"),r.a.createElement("li",{className:"text-danger"},"\u041d\u043e\u043c\u0435\u0440\u0430 \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432: ",oa(E))):r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442"),r.a.createElement("li",{className:"text-danger"},"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",t.client)):"","individual"===t.clientType?r.a.createElement("li",{className:"text-danger"},"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",t.client):"",r.a.createElement("li",{className:"text-danger"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u041a\u043b\u0438\u0435\u043d\u0442\u0430: ",t.phone),""!==t.phone2?r.a.createElement("li",null,"\u0417\u0430\u043f\u0430\u0441\u043d\u043e\u0439 \u0422\u0435\u043b\u0435\u0444\u043e\u043d \u041a\u043b\u0438\u0435\u043d\u0442\u0430: ",t.phone2):"",r.a.createElement("li",{className:"text-danger"},"\u0414\u0430\u0442\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},t.dateFrom)),r.a.createElement("li",{className:"text-danger"},"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: ",r.a.createElement(re.a,{format:"HH:mm"},t.dateFrom)),r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u0440\u0435\u0441: ",t.address))))),r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("li",{className:"text-danger"},"\u0422\u0438\u043f \u0443\u0441\u043b\u0443\u0433\u0438: ",t.typeOfService),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430: ",t.comment?t.comment:"--"),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430: ",t.disinfectorComment?t.disinfectorComment:"--"),t.userAcceptedOrder?r.a.createElement("li",null,"\u0417\u0430\u043a\u0430\u0437 \u043f\u0440\u0438\u043d\u044f\u043b: ",t.userAcceptedOrder.occupation," ",t.userAcceptedOrder.name):"",t.userCreated?r.a.createElement("li",null,"\u0417\u0430\u043a\u0430\u0437 \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d: ",t.userCreated.occupation," ",t.userCreated.name," ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.createdAt)):"")))),t.returnedBack?u:""),r.a.createElement("div",{className:"row m-0"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h4",{className:"text-center"},"\u0412\u0430\u0448\u0438 \u0438\u043c\u0435\u044e\u0449\u0438\u0435\u0441\u044f \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},i))))),r.a.createElement("div",{className:"row m-0"},r.a.createElement("div",{className:"col-lg-6 col-md-8 m-auto"},r.a.createElement("div",{className:"card mt-3 mb-3"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",{className:"text-center"},"\u0424\u043e\u0440\u043c\u0430 \u043e \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 \u0417\u0430\u043a\u0430\u0437\u0430"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{name:"disinfectorAmount",className:"form-control",onChange:this.changeDisinfectorAmount.bind(this),required:!0},s)),r.a.createElement("div",{className:"border-bottom"}),r.a.createElement("h3",null,"\u0412\u0430\u0448 \u0420\u0430\u0441\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432"),m,this.state.loggedHelpArray.length<at.a.length?r.a.createElement("button",{className:"btn btn-primary mr-2 mt-2",onClick:this.addMaterialLogged},r.a.createElement("i",{className:"fas fa-plus"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"):"",1===this.state.loggedHelpArray.length?"":r.a.createElement("button",{className:"btn btn-danger mt-2",onClick:this.deleteMaterialLogged},r.a.createElement("i",{className:"fas fa-trash-alt"})," \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"),r.a.createElement("div",{className:"border-bottom"}),d,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"disinfectorComment"},"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430:"),r.a.createElement("textarea",{className:"form-control",name:"disinfectorComment",placeholder:"\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",onChange:this.onChange,rows:"3",defaultValue:t.disinfectorComment})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"guarantee"},"\u0413\u0430\u0440\u0430\u043d\u0442\u0438\u0439\u043d\u044b\u0439 \u0441\u0440\u043e\u043a (\u0432 \u043c\u0435\u0441\u044f\u0446\u0430\u0445):"),r.a.createElement("input",{type:"number",min:"0",step:"1",className:"form-control",name:"guarantee",onChange:this.onChange,required:!0})),"corporate"===t.clientType?r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"paymentMethod"},"\u0422\u0438\u043f \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"),r.a.createElement("select",{name:"paymentMethod",className:"form-control",onChange:this.onChange,required:!0},r.a.createElement("option",{value:""},"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430 --"),r.a.createElement("option",{value:"cash"},"\u041d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),r.a.createElement("option",{value:"notCash"},"\u0411\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"))):"",t.prevFailedOrder||"individual"!==t.clientType&&"cash"!==this.state.paymentMethod?"":r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"cost"},"\u0421\u0443\u043c\u043c\u0430 \u0417\u0430\u043a\u0430\u0437\u0430: (\u0432 \u0441\u0443\u043c\u0430\u0445)"),r.a.createElement("input",{type:"number",step:"1",className:"form-control",name:"cost",onChange:this.onChange,required:!0})),"corporate"===t.clientType&&"notCash"===this.state.paymentMethod?r.a.createElement(r.a.Fragment,null,"manually"===this.state.inputContractFormat?r.a.createElement("button",{className:"btn btn-primary mt-2",onClick:this.changeContractInputFormat.bind(this,"select")},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u041d\u043e\u043c\u0435\u0440 \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430"):r.a.createElement("button",{className:"btn btn-primary mt-2",onClick:this.changeContractInputFormat.bind(this,"manually")},"\u0412\u0432\u0435\u0441\u0442\u0438 \u041d\u043e\u043c\u0435\u0440 \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0412\u0440\u0443\u0447\u043d\u0443\u044e"),"manually"===this.state.inputContractFormat&&r.a.createElement("div",{className:"form-group mt-3"},r.a.createElement("label",{htmlFor:"contractNumber"},"\u041d\u043e\u043c\u0435\u0440 \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430 (\u044d\u0442\u043e \u043f\u043e\u043b\u0435 \u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435):"),r.a.createElement("input",{type:"text",className:"form-control",name:"contractNumber",onChange:this.onChange})),"select"===this.state.inputContractFormat&&r.a.createElement(r.a.Fragment,null,0===E.length?r.a.createElement("h4",null,"\u0423 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043d\u0435\u0442 \u043d\u043e\u043c\u0435\u0440\u043e\u0432 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430. \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0440\u0443\u0447\u043d\u0443\u044e"):r.a.createElement("div",{className:"form-group mt-3"},r.a.createElement("label",{htmlFor:"contractNumber"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041d\u043e\u043c\u0435\u0440 \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u041a\u043b\u0438\u0435\u043d\u0442\u0430:"),r.a.createElement("select",{name:"contractNumber",className:"form-control",onChange:this.onChange,required:!0},r.a.createElement("option",{value:""},"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430 --"),f)))):"",r.a.createElement("div",{className:"border-bottom"}),r.a.createElement("button",{className:"btn btn-success mt-3"},r.a.createElement("i",{className:"fas fa-envelope-open-text"})," \u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0417\u0430\u043f\u0440\u043e\u0441 \u041e \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438"))))))))}}]),t}(n.Component),pn=Object(S.b)(function(e){return{auth:e.auth,order:e.order,disinfector:e.disinfector,errors:e.errors}},{getOrderById:xe,getDisinfectorMaterials:Fa,getAllDisinfectorsAndSubadmins:function(){return function(e){e(Ta()),g.a.post("/get-users",{object:{method:"role",roles:["disinfector","subadmin"]}}).then(function(t){return e({type:"GET_ALL_DISINFECTORS",payload:t.data})}).catch(function(t){return e({type:y,payload:t})})}},submitCompleteOrder:function(e,t,a){return function(n){g.a.post("/order/submit-complete-order",{order:e}).then(function(){return t.push("/".concat(a))}).catch(function(e){return n({type:y,payload:e.response.data})})}}})(Object(p.g)(un)),hn=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={array:[{}],materials:[{material:"",amount:0,unit:""}],disinfector:""},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.changeSelect=function(e){var t=e.target.name.split("-")[1],n=a.state.materials;n[t].material=e.target.value.split("+")[0],n[t].unit=e.target.value.split("+")[1],a.setState({materials:n})},a.changeAmount=function(e){var t=e.target.name.split("-")[1],n=a.state.materials;n[t].amount=Number(e.target.value),a.setState({materials:n})},a.addMaterial=function(e){e.preventDefault();var t=a.state.array;t.push({});var n=a.state.materials;n.push({material:"",amount:0,unit:""}),a.setState({array:t,materials:n})},a.deleteMaterial=function(e){e.preventDefault();var t=a.state.array;t.pop();var n=a.state.materials;n.pop(),a.setState({array:t,materials:n})},a.onSubmit=function(e){e.preventDefault();var t=0,n=0,r=0;if(a.state.materials.forEach(function(e){""===e.material&&t++,e.amount<=0&&r++,a.props.auth.user.materials.forEach(function(t){e.material===t.material&&e.unit===t.unit&&e.amount>t.amount&&n++})}),t>0)alert('\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u041f\u043e\u043b\u0435 "\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0438 \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"');else if(r>0)alert("\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043d\u0443\u043b\u0435\u043c \u0438\u043b\u0438 \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u0430\u043c \u0447\u0438\u0441\u043b\u043e\u043c");else if(n>0)alert("\u0423 \u0432\u0430\u0441 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432");else{var l={disinfector:a.state.disinfector,admin:a.props.auth.user.id,materials:a.state.materials};a.props.disAddMatToOther(l,a.props.auth.user.occupation,a.props.history),a.props.getAllDisinfectorsAndSubadmins()}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getDisinfectorMaterials(this.props.auth.user.id),this.props.getAllDisinfectorsAndSubadmins(),window.scrollTo({top:0})}},{key:"render",value:function(){var e=this,t=ze(this.props.auth.user.materials).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)}),a=[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f --",value:""}],n=this.props.admin.disinfectors.filter(function(t){return t._id.toString()!==e.props.auth.user.id}).map(function(e,t){a.push({label:"".concat(e.occupation," ").concat(e.name),value:e._id});var n=ze(e.materials).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount," ",e.unit)});return r.a.createElement("div",{className:"col-lg-4 col-md-6",key:t},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("h4",{className:"text-center"},e.occupation," ",e.name),r.a.createElement("p",{className:"mb-0"},"\u0418\u043c\u0435\u0435\u0442\u0441\u044f \u0432 \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432:"),r.a.createElement("ul",null,n)))))}),l=[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0435\u0449\u0435\u0441\u0442\u0432\u043e --",value:"",unit:""}];at.a.forEach(function(e){l.push({label:e.material,value:e.material,unit:e.unit})});var c=l.map(function(e,t){return r.a.createElement("option",{value:"".concat(e.value,"+").concat(e.unit),key:t},e.label," ",e.unit)}),s=this.state.array.map(function(t,a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{name:"consumption-".concat(a),className:"form-control",onChange:e.changeSelect,required:!0},c)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"quantity-".concat(a)},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e:"),r.a.createElement("input",{type:"number",step:"0.001",className:"form-control",name:"quantity-".concat(a),onChange:e.changeAmount,required:!0})),r.a.createElement("div",{className:"border-bottom-red"}))});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container-fluid"},this.props.auth.loadingUser?r.a.createElement(me,null):r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",{className:"text-center"},"\u0412\u0430\u0448\u0438 \u0438\u043c\u0435\u044e\u0449\u0438\u0435\u0441\u044f \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b")),r.a.createElement("div",{className:"col-lg-6 col-md-8 mx-auto"},r.a.createElement("div",{className:"card order"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},t))))),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",{className:"text-center"},"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"))),this.props.admin.loadingDisinfectors?r.a.createElement(me,null):r.a.createElement("div",{className:"row mt-2"},n),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-lg-6 col-md-8 mx-auto"},r.a.createElement("div",{className:"card mt-2"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h2",{className:"text-center"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"disinfector"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:"),this.props.admin.loadingDisinfectors?r.a.createElement("p",null,"\u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u044b \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f..."):r.a.createElement("select",{value:this.state.disinfector,name:"disinfector",className:"form-control",onChange:this.onChange,required:!0},a.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}))),r.a.createElement("label",{htmlFor:"consumption"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0438 \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e:"),s,this.state.array.length<at.a.length?r.a.createElement("button",{className:"btn btn-primary mr-2 mt-2",onClick:this.addMaterial},r.a.createElement("i",{className:"fas fa-plus"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"):"",1===this.state.array.length?"":r.a.createElement("button",{className:"btn btn-danger mt-2",onClick:this.deleteMaterial},r.a.createElement("i",{className:"fas fa-trash-alt"})," \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"),r.a.createElement("div",{className:"border-bottom"}),r.a.createElement("button",{type:"submit",className:"btn btn-success"},r.a.createElement("i",{className:"fas fa-plus-circle"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e"))))))))}}]),t}(n.Component),En=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,order:e.order,disinfector:e.disinfector,errors:e.errors}},{getDisinfectorMaterials:Fa,getAllDisinfectorsAndSubadmins:Ee,disAddMatToOther:function(e,t,a){return function(n){g.a.post("/order/dis-add-mat-to-other-user",{object:e}).then(function(){return a.push("/".concat(t))}).catch(function(e){return n({type:y,payload:e})})}}})(Object(p.g)(hn)),fn=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={comings:a.props.disinfector.matComing},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.comings,t=[];at.a.forEach(function(e){t.push({material:e.material,amount:0,unit:e.unit})}),e.forEach(function(e){e.materials.forEach(function(e){t.forEach(function(t){e.material===t.material&&e.unit===t.unit&&(t.amount+=e.amount)})})});var a=(t=ze(t)).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)}),n=e.map(function(e,t){var a=e.materials.map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)});return r.a.createElement("div",{className:"col-lg-4 col-md-6",key:t},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("li",null,"\u041a\u0442\u043e \u0412\u0430\u043c \u0420\u0430\u0437\u0434\u0430\u043b: ",e.admin.occupation," ",e.admin.name),r.a.createElement("li",null,"\u0414\u0430\u0442\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.createdAt)),r.a.createElement("li",null,"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b:"),r.a.createElement("ul",null,a)))))});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-5 col-md-7 m-auto"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h4",{className:"text-center"},"\u041e\u0431\u0449\u0438\u0439 \u041f\u0440\u0438\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0437\u0430 \u044d\u0442\u043e\u0442 \u043f\u0435\u0440\u0438\u043e\u0434:"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},a))))),r.a.createElement("div",{className:"row mt-3"},n))}}]),t}(n.Component),gn=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,disinfector:e.disinfector,subadmin:e.subadmin,errors:e.errors}},{})(Object(p.g)(fn)),bn=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={month:"",year:"",method:"",headingMonth:"",headingYear:"",hoverRange:void 0,selectedDays:[]},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.getMonthStats=function(e){e.preventDefault();var t={userId:a.props.auth.user.id,type:"month",month:a.state.month,year:a.state.year};a.props.getUserMatComing(t),a.setState({headingMonth:a.state.month,headingYear:a.state.year,method:"month"})},a.getSpecificMonthStats=function(e){var t=Je(e),n=t.month,r=t.year,l={userId:a.props.auth.user.id,type:"month",month:n,year:r};a.props.getUserMatComing(l),a.setState({headingMonth:n,headingYear:r,method:"month"})},a.handleDayChange=function(e){var t={userId:a.props.auth.user.id,type:"week",days:ot(it(e).from)};a.props.getUserMatComing(t),a.setState({selectedDays:ot(it(e).from),method:"week"})},a.handleDayEnter=function(e){a.setState({hoverRange:it(e)})},a.handleDayLeave=function(){a.setState({hoverRange:void 0})},a.handleWeekClick=function(e,t,n){var r={userId:a.props.auth.user.id,type:"week",days:ot(it(t[0]).from)};a.props.getUserMatComing(r),a.setState({selectedDays:ot(it(t[0]).from),method:"week"})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=(new Date).getMonth(),t=(new Date).getFullYear(),a={userId:this.props.auth.user.id,type:"month",month:e,year:t};this.props.getUserMatComing(a),this.setState({headingMonth:e,headingYear:t,method:"month"})}},{key:"render",value:function(){var e=this,t=Ve(),a=t.monthLabels,n=t.yearLabels.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),l=a.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),c=this.state,s=c.hoverRange,o=c.selectedDays,i=o.length>0,m={hoverRange:s,selectedRange:i&&{from:o[0],to:o[6]},hoverRangeStart:s&&s.from,hoverRangeEnd:s&&s.to,selectedRangeStart:i&&o[0],selectedRangeEnd:i&&o[6]};return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("form",{onSubmit:this.getMonthStats,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u041f\u0440\u0438\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u043f\u043e \u043c\u0435\u0441\u044f\u0446\u0430\u043c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"year"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0413\u043e\u0434:")),r.a.createElement("select",{name:"year",className:"form-control",onChange:this.onChange,required:!0},n)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"month"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041c\u0435\u0441\u044f\u0446:")),r.a.createElement("select",{name:"month",className:"form-control",onChange:this.onChange,required:!0},l)),r.a.createElement("button",{type:"submit",className:"btn btn-success mr-1 mt-1"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"),r.a.createElement("button",{type:"button",className:"btn btn-danger mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("current")}},"\u042d\u0442\u043e\u0442 \u043c\u0435\u0441\u044f\u0446"),r.a.createElement("button",{type:"button",className:"btn btn-primary mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("previous")}},"\u041f\u0440\u043e\u0448\u043b\u044b\u0439 \u043c\u0435\u0441\u044f\u0446"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3 ml-auto weekly-stats"},r.a.createElement("div",{className:"SelectedWeekExample form-bg font-weight-bold"},r.a.createElement("h4",{className:"text-center"},"\u041f\u0440\u0438\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u043f\u043e \u043d\u0435\u0434\u0435\u043b\u044f\u043c"),r.a.createElement(dt.a,{selectedDays:o,showWeekNumbers:!0,showOutsideDays:!0,modifiers:m,firstDayOfWeek:1,onDayClick:this.handleDayChange,onDayMouseEnter:this.handleDayEnter,onDayMouseLeave:this.handleDayLeave,onWeekClick:this.handleWeekClick})))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},"week"===this.state.method?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0412\u0430\u0448 \u041d\u0435\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u041f\u0440\u0438\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0437\u0430 ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[0])," - ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[6])):r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0412\u0430\u0448 \u041c\u0435\u0441\u044f\u0447\u043d\u044b\u0439 \u041f\u0440\u0438\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0437\u0430 ",Ke.a[this.state.headingMonth],", ",this.state.headingYear))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},this.props.disinfector.loadingDisinfStats?r.a.createElement(me,null):r.a.createElement(gn,null))))}}]),t}(n.Component),yn=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,disinfector:e.disinfector,subadmin:e.subadmin,errors:e.errors}},{getUserMatComing:function(e){return function(t){t(xa()),g.a.post("/stats/get-user-mat-coming",{object:e}).then(function(e){return t({type:"DISINF_MAT_COMINGS",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}}})(Object(p.g)(bn)),vn=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={distribs:a.props.disinfector.matDistrib},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.distribs,t=[];at.a.forEach(function(e){t.push({material:e.material,amount:0,unit:e.unit})}),e.forEach(function(e){e.materials.forEach(function(e){t.forEach(function(t){e.material===t.material&&e.unit===t.unit&&(t.amount+=e.amount)})})});var a=(t=ze(t)).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)}),n=e.map(function(e,t){var a=e.materials.map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)});return r.a.createElement("div",{className:"col-lg-4 col-md-6",key:t},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("li",null,"\u041a\u043e\u043c\u0443 \u0412\u044b \u0420\u0430\u0437\u0434\u0430\u043b\u0438: ",e.disinfector.occupation," ",e.disinfector.name),r.a.createElement("li",null,"\u0414\u0430\u0442\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.createdAt)),r.a.createElement("li",null,"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b:"),r.a.createElement("ul",null,a)))))});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-5 col-md-7 m-auto"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h4",{className:"text-center"},"\u0412\u0430\u0448\u0430 \u041e\u0431\u0449\u0430\u044f \u0420\u0430\u0437\u0434\u0430\u0447\u0430 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0437\u0430 \u044d\u0442\u043e\u0442 \u043f\u0435\u0440\u0438\u043e\u0434:"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},a))))),r.a.createElement("div",{className:"row mt-3"},n))}}]),t}(n.Component),Nn=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,disinfector:e.disinfector,subadmin:e.subadmin,errors:e.errors}},{})(Object(p.g)(vn)),On=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={month:"",year:"",method:"",headingMonth:"",headingYear:"",hoverRange:void 0,selectedDays:[]},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.getMonthStats=function(e){e.preventDefault();var t={userId:a.props.auth.user.id,type:"month",month:a.state.month,year:a.state.year};a.props.getUserMatDistrib(t),a.setState({headingMonth:a.state.month,headingYear:a.state.year,method:"month"})},a.getSpecificMonthStats=function(e){var t=Je(e),n=t.month,r=t.year,l={userId:a.props.auth.user.id,type:"month",month:n,year:r};a.props.getUserMatDistrib(l),a.setState({headingMonth:n,headingYear:r,method:"month"})},a.handleDayChange=function(e){var t={userId:a.props.auth.user.id,type:"week",days:ot(it(e).from)};a.props.getUserMatDistrib(t),a.setState({selectedDays:ot(it(e).from),method:"week"})},a.handleDayEnter=function(e){a.setState({hoverRange:it(e)})},a.handleDayLeave=function(){a.setState({hoverRange:void 0})},a.handleWeekClick=function(e,t,n){var r={userId:a.props.auth.user.id,type:"week",days:ot(it(t[0]).from)};a.props.getUserMatDistrib(r),a.setState({selectedDays:ot(it(t[0]).from),method:"week"})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=(new Date).getMonth(),t=(new Date).getFullYear(),a={userId:this.props.auth.user.id,type:"month",month:e,year:t};this.props.getUserMatDistrib(a),this.setState({headingMonth:e,headingYear:t,method:"month"})}},{key:"render",value:function(){var e=this,t=Ve(),a=t.monthLabels,n=t.yearLabels.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),l=a.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),c=this.state,s=c.hoverRange,o=c.selectedDays,i=o.length>0,m={hoverRange:s,selectedRange:i&&{from:o[0],to:o[6]},hoverRangeStart:s&&s.from,hoverRangeEnd:s&&s.to,selectedRangeStart:i&&o[0],selectedRangeEnd:i&&o[6]};return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("form",{onSubmit:this.getMonthStats,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u0420\u0430\u0437\u0434\u0430\u0447\u0430 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u043f\u043e \u043c\u0435\u0441\u044f\u0446\u0430\u043c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"year"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0413\u043e\u0434:")),r.a.createElement("select",{name:"year",className:"form-control",onChange:this.onChange,required:!0},n)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"month"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041c\u0435\u0441\u044f\u0446:")),r.a.createElement("select",{name:"month",className:"form-control",onChange:this.onChange,required:!0},l)),r.a.createElement("button",{type:"submit",className:"btn btn-success mr-1 mt-1"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"),r.a.createElement("button",{type:"button",className:"btn btn-danger mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("current")}},"\u042d\u0442\u043e\u0442 \u043c\u0435\u0441\u044f\u0446"),r.a.createElement("button",{type:"button",className:"btn btn-primary mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("previous")}},"\u041f\u0440\u043e\u0448\u043b\u044b\u0439 \u043c\u0435\u0441\u044f\u0446"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3 ml-auto weekly-stats"},r.a.createElement("div",{className:"SelectedWeekExample form-bg font-weight-bold"},r.a.createElement("h4",{className:"text-center"},"\u0420\u0430\u0437\u0434\u0430\u0447\u0430 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u043f\u043e \u043d\u0435\u0434\u0435\u043b\u044f\u043c"),r.a.createElement(dt.a,{selectedDays:o,showWeekNumbers:!0,showOutsideDays:!0,modifiers:m,firstDayOfWeek:1,onDayClick:this.handleDayChange,onDayMouseEnter:this.handleDayEnter,onDayMouseLeave:this.handleDayLeave,onWeekClick:this.handleWeekClick})))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},"week"===this.state.method?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0412\u0430\u0448\u0430 \u041d\u0435\u0434\u0435\u043b\u044c\u043d\u0430\u044f \u0420\u0430\u0437\u0434\u0430\u0447\u0430 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0437\u0430 ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[0])," - ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[6])):r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0412\u0430\u0448\u0430 \u041c\u0435\u0441\u044f\u0447\u043d\u0430\u044f \u0420\u0430\u0437\u0434\u0430\u0447\u0430 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0437\u0430 ",Ke.a[this.state.headingMonth],", ",this.state.headingYear))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},this.props.disinfector.loadingDisinfStats?r.a.createElement(me,null):r.a.createElement(Nn,null))))}}]),t}(n.Component),Sn=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,disinfector:e.disinfector,subadmin:e.subadmin,errors:e.errors}},{getUserMatDistrib:function(e){return function(t){t(xa()),g.a.post("/stats/get-user-mat-distrib",{object:e}).then(function(e){return t({type:"DISINF_MAT_DISTRIBS",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}}})(Object(p.g)(On)),Dn=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={queries:[],loading:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getReturnedQueries(this.props.auth.user.id),this.setState({loading:!0})}},{key:"componentWillReceiveProps",value:function(e){e.disinfector.queries&&this.setState({queries:e.disinfector.queries,loading:!1})}},{key:"render",value:function(){var e=this.state.queries.map(function(e,t){return r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3",key:t},r.a.createElement("div",{className:"card order"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},e.operatorDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.operatorConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.operatorCheckedAt),")"),r.a.createElement("li",null,"\u0411\u0430\u043b\u043b (0-5): ",e.score),r.a.createElement("li",null,"\u041e\u0442\u0437\u044b\u0432 \u041a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.clientReview?e.clientReview:"\u041d\u0435\u0442 \u041e\u0442\u0437\u044b\u0432\u0430")):r.a.createElement("li",{className:"text-danger"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.operatorCheckedAt),")")):r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.accountantDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.accountantConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.accountantCheckedAt),")"),r.a.createElement("li",null,"\u0421\u0447\u0435\u0442-\u0424\u0430\u043a\u0442\u0443\u0440\u0430: ",e.invoice?e.invoice:"--"),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement("li",{className:"text-danger"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.accountantCheckedAt),")")):r.a.createElement(r.a.Fragment,null,e.adminDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0410\u0434\u043c\u0438\u043d \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.adminConfirmed?r.a.createElement("li",{className:"text-success"},"\u0410\u0434\u043c\u0438\u043d \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.adminCheckedAt),")"):r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u043c\u0438\u043d \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.adminCheckedAt),")")):r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443")),"corporate"===e.clientType?r.a.createElement(r.a.Fragment,null,e.clientId?r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.clientId.name):r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442"),r.a.createElement("li",{className:"text-danger"},"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.client)):"","individual"===e.clientType?r.a.createElement("li",{className:"text-danger"},"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.client):"",r.a.createElement("li",{className:"text-danger"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u041a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.phone),e.phone2?r.a.createElement("li",{className:"text-danger"},"\u0414\u0440\u0443\u0433\u043e\u0439 \u043d\u043e\u043c\u0435\u0440: ",e.phone2):"",r.a.createElement("li",{className:"text-danger"},"\u0414\u0430\u0442\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},e.dateFrom)),r.a.createElement("li",{className:"text-danger"},"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: \u0421 ",r.a.createElement(re.a,{format:"HH:mm"},e.dateFrom)," \u041f\u041e ",r.a.createElement(re.a,{format:"HH:mm"},e.completedAt)),r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u0440\u0435\u0441: ",e.address),r.a.createElement("li",{className:"text-danger"},"\u0422\u0438\u043f \u0443\u0441\u043b\u0443\u0433\u0438: ",e.typeOfService),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430: ",e.comment?e.comment:"--"),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430: ",e.disinfectorComment?e.disinfectorComment:"--"),"corporate"===e.clientType?r.a.createElement(r.a.Fragment,null,"cash"===e.paymentMethod?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u041d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u0411\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),r.a.createElement("li",null,"\u041d\u043e\u043c\u0435\u0440 \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430: ",e.contractNumber))):"","individual"===e.clientType?r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS  (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)"):"",r.a.createElement("li",null,"\u0424\u043e\u0440\u043c\u0430 \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0417\u0430\u043a\u0430\u0437\u0430 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.completedAt)),r.a.createElement(u.b,{to:"/order-complete-form/".concat(e._id),className:"btn btn-primary"},r.a.createElement("i",{className:"fab fa-wpforms"})," \u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0444\u043e\u0440\u043c\u0443 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u043d\u043e\u0432\u043e")))))});return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",{className:"text-center pl-3 pr-3"},"\u0412\u0430\u0448\u0438 \u0417\u0430\u043f\u0440\u043e\u0441\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0430\u0434\u043c\u0438\u043d \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b \u043d\u0430\u0437\u0430\u0434 \u0434\u043b\u044f \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0433\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0444\u043e\u0440\u043c\u044b "))),r.a.createElement("div",{className:"row"},this.state.loading?r.a.createElement("div",{className:"col-12"},r.a.createElement(me,null)):r.a.createElement(r.a.Fragment,null,0===this.state.queries.length?r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",{className:"text-center pl-3 pr-3"},"\u041d\u0435\u0442 \u0417\u0430\u043f\u0440\u043e\u0441\u043e\u0432")):e)))}}]),t}(n.Component),Cn=Object(S.b)(function(e){return{auth:e.auth,order:e.order,disinfector:e.disinfector,errors:e.errors}},{getReturnedQueries:function(e){return function(t){g.a.post("/order/get-returned-queries",{id:e}).then(function(e){return t({type:"GET_RETURNED_QUERIES",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}}})(Object(p.g)(Dn)),An=function(e){return function(t){t(kn()),g.a.post("/operator/get-sorted-orders",{date:e}).then(function(a){return t({type:"GET_SORTED_ORDERS",payload:a.data,date:e})}).catch(function(e){return t({type:y,payload:e})})}},Mn=function(e){return function(t){t(wn()),g.a.post("/operator/get-complete-orders",{id:e}).then(function(e){return t({type:"GET_COMPLETE_ORDERS",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}},kn=function(){return{type:"SET_LOADING_SORTED_ORDERS"}},wn=function(){return{type:"SET_LOADING_COMPLETE_ORDERS"}},jn=function(){return{type:"SET_LOADING_OPERATOR_STATS"}},Yn=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r))))._isMounted=!1,a.state={date:new Date,sortedOrders:a.props.operator.sortedOrders},a.addOrderToDOM=function(e){a._isMounted&&a.setState(function(t){var a=Object(j.a)(t.sortedOrders);return a.push(e),{sortedOrders:a}})},a.editOrderOnDOM=function(e){if(a._isMounted){for(var t=Object(j.a)(a.state.sortedOrders),n=0;n<t.length;n++)t[n]._id.toString()===e._id.toString()&&(t[n].disinfectorId=e.disinfectorId,t[n].userCreated=e.userCreated,t[n].userAcceptedOrder=e.userAcceptedOrder,t[n].clientType=e.clientType,t[n].client=e.client,t[n].clientId=e.clientId,t[n].address=e.address,t[n].dateFrom=e.dateFrom,t[n].phone=e.phone,t[n].typeOfService=e.typeOfService,t[n].advertising=e.advertising,t[n].comment=e.comment);a.setState({sortedOrders:t})}},a.removeOrderFromDOM=function(e){if(a._isMounted){var t=Object(j.a)(a.state.sortedOrders);t=t.filter(function(t){return t._id.toString()!==e}),a.setState({sortedOrders:t})}},a.onClick=function(e,t){var n,r,l;n=new Date(t).getMonth()<9?"0".concat(new Date(t).getMonth()+1):"".concat(new Date(t).getMonth()+1),r=new Date(t).getDate()<10?"0".concat(new Date(t).getDate()):new Date(t).getDate();var c="".concat(new Date(t).getFullYear(),"-").concat(n,"-").concat(r);l=e<10?"0".concat(e,":00"):"".concat(e,":00"),a.props.history.push("/create-order",{pathname:"/create-order",state:{hour:l,date:c}})},a.deleteOrder=function(e,t,n,r,l){var c={id:e,clientType:t,clientPhone:n,clientId:r,orderDateFrom:l};a.props.deleteOrder(c,a.props.history,a.props.auth.user.occupation),window.location.reload()},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t=Be()(Ge.a);t.on("createOrder",function(t){new Date(t.order.dateFrom).getDate()===new Date(e.props.date).getDate()&&new Date(t.order.dateFrom).getMonth()===new Date(e.props.date).getMonth()&&new Date(t.order.dateFrom).getFullYear()===new Date(e.props.date).getFullYear()&&e.addOrderToDOM(t.order)}),t.on("editOrder",function(t){e.editOrderOnDOM(t.order)}),t.on("deleteOrder",function(t){new Date(t.orderDateFrom).getDate()===new Date(e.props.date).getDate()&&new Date(t.orderDateFrom).getMonth()===new Date(e.props.date).getMonth()&&new Date(t.orderDateFrom).getFullYear()===new Date(e.props.date).getFullYear()&&e.removeOrderFromDOM(t.id)})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){for(var e=this,t=[],a=0;a<=23;a++)t.push({hour:a,elements:[]});this.state.sortedOrders.forEach(function(e){t[new Date(e.dateFrom).getHours()].elements.push(e)});var n;return t.map(function(t,a){return n=t.elements.map(function(t,a){return r.a.createElement("div",{className:"col-md-".concat(6," pr-0"),key:a},r.a.createElement("div",{className:"card mt-2 mr-2 order order-bg-".concat(t.disinfectorId.color)},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},t.prevFailedOrder&&r.a.createElement("h3",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"})),t.failed&&r.a.createElement("h3",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"})),"corporate"===t.clientType?r.a.createElement(r.a.Fragment,null,t.clientId?r.a.createElement("li",null,"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043a\u043b\u0438\u0435\u043d\u0442: ",t.clientId.name):r.a.createElement("li",null,"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043a\u043b\u0438\u0435\u043d\u0442 ")):"","individual"===t.clientType?r.a.createElement("li",null,"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",t.client):"",r.a.createElement("li",null,"\u0422\u0435\u043b \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",t.phone),r.a.createElement("li",null,"\u0410\u0434\u0440\u0435\u0441: ",t.address),r.a.createElement("li",null,"\u0422\u0438\u043f \u0417\u0430\u043a\u0430\u0437\u0430: ",t.typeOfService)),He(t)?r.a.createElement(r.a.Fragment,null,r.a.createElement(u.b,{to:"/order-full-details/".concat(t._id),className:"btn btn-primary mr-1 mt-2"},r.a.createElement("i",{className:"fas fa-info"})," \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")):r.a.createElement(r.a.Fragment,null,r.a.createElement(u.b,{to:"/order-details/".concat(t._id),className:"btn btn-primary mr-1 mt-2"},r.a.createElement("i",{className:"fas fa-info"})," \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"),r.a.createElement(u.b,{to:"/edit-order/".concat(t._id),className:"btn btn-warning mr-1 mt-2"},r.a.createElement("i",{className:"fas fa-edit"})," \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),e.props.date>(new Date).setHours(0,0,0,0)?r.a.createElement("button",{className:"btn btn-danger mt-2",onClick:function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?")&&("corporate"===t.clientType?e.deleteOrder(t._id,t.clientType,t.phone,t.clientId._id,t.dateFrom):"individual"===t.clientType&&e.deleteOrder(t._id,t.clientType,t.phone,"",t.dateFrom))}},r.a.createElement("i",{className:"fas fa-trash-alt"})," \u0423\u0434\u0430\u043b\u0438\u0442\u044c"):""))))}),r.a.createElement("div",{className:"hours",key:a},r.a.createElement("div",{className:"help row mt-3",id:"hour-".concat(t.hour)},r.a.createElement("button",{to:"/create-order",className:"btn btn-success mr-3",onClick:e.onClick.bind(e,t.hour,e.props.operator.date)},r.a.createElement("i",{className:"fas fa-plus"})),r.a.createElement("h1",{className:"d-inline mb-0"},"".concat(t.hour,":00"))),r.a.createElement("div",{className:"row"},n.length>0?n:""))})}}]),t}(n.Component),In=Object(S.b)(function(e){return{auth:e.auth,order:e.order,operator:e.operator,errors:e.errors}},{deleteOrder:Ye,getSortedOrders:An})(Object(p.g)(Yn)),Fn=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={date:new Date},a.onChange=function(e){a.props.operator.loadingSortedOrders||(a.setState({date:e}),a.props.getSortedOrders(e))},a.onSwiped=function(e){var t=new Date(a.state.date);"LEFT"===e?(t.setTime(t.getTime()+864e5),a.setState({date:t})):"RIGHT"===e&&(t.setTime(t.getTime()-864e5),a.setState({date:t})),a.props.getSortedOrders(a.state.date)},a.today=function(){var e=new Date;a.props.operator.loadingSortedOrders||(a.setState({date:e}),a.props.getSortedOrders(e))},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getSortedOrders(this.state.date)}},{key:"render",value:function(){var e=this,t=this.props.operator.loadingSortedOrders;return r.a.createElement("div",{className:"container-fluid mt-1"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center"},"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430 ",this.props.auth.user.name))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-3 mt-4 calendar"},r.a.createElement("div",{className:"sticky-top"},r.a.createElement(ae.a,{onChange:this.onChange,value:this.state.date}),r.a.createElement("button",{className:"btn btn-dark mt-3",onClick:function(){return e.today()}},r.a.createElement("i",{className:"fas fa-calendar-day"})," \u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0421\u0435\u0433\u043e\u0434\u043d\u044f"))),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("h2",{className:"text-center"},"\u0417\u0430\u044f\u0432\u043a\u0438 \u043d\u0430 ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.date)),t?r.a.createElement(me,null):r.a.createElement(de.a,{trackMouse:!0,preventDefaultTouchmoveEvent:!0,onSwipedLeft:function(){return e.onSwiped("LEFT")},onSwipedRight:function(){return e.onSwiped("RIGHT")},delta:120},r.a.createElement(In,{date:this.state.date})))))}}]),t}(n.Component),xn=Object(S.b)(function(e){return{auth:e.auth,order:e.order,operator:e.operator,errors:e.errors}},{getSortedOrders:An})(Object(p.g)(Fn)),Tn=a(109),Rn=function(e){function t(e){var a,n,r;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.onSelectClientTypeChange=function(e){a.setState({clientId:e.value})},a.onChangeTypes=function(e){var t=Object(j.a)(a.state.typeOfService);t.forEach(function(t){t.type===e.target.value&&(t.selected=e.target.checked)}),a.setState({typeOfService:t})},a.toggleSecondPhone=function(e){e.preventDefault(),a.setState({hasSecondPhone:!a.state.hasSecondPhone})},a.deleteSecondPhone=function(e){e.preventDefault(),a.setState({hasSecondPhone:!1,phone2:""})},a.onSubmit=function(e){e.preventDefault();for(var t=a.state.date.split("-"),n=new Date("".concat(t[1],"-").concat(t[2],"-").concat(t[0]," ").concat(a.state.timeFrom)),r=0,l=0,c=1;c<=12;c++)a.state.phone[c]>="0"&&a.state.phone[c]<="9"&&r++,a.state.phone2[c]>="0"&&a.state.phone2[c]<="9"&&l++;var s="",o=0;if(a.state.typeOfService.forEach(function(e){e.selected&&(1===++o?s+=e.type:s=s+", "+e.type)}),13!==a.state.phone.length||a.state.hasSecondPhone&&13!==a.state.phone2.length)alert("\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c 13 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432. \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 +998XXXXXXXXX");else if("+"!==a.state.phone[0]||a.state.hasSecondPhone&&"+"!==a.state.phone2[0])alert('\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 "+". \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 +998XXXXXXXXX');else if(12!==r||a.state.hasSecondPhone&&12!==l)alert('\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c "+" \u0438 12 \u0446\u0438\u0444\u0440');else if(0===o)alert("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u0437\u0430\u043a\u0430\u0437\u0430");else if("corporate"===a.state.clientType&&""===a.state.clientId)alert("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430");else{a.props.order.allUsers.forEach(function(e,t){e._id!==a.state.disinfectorId||e});var i={disinfectorId:a.state.disinfectorId,client:a.state.client,clientType:a.state.clientType,clientId:a.state.clientId,address:a.state.address,date:a.state.date,dateFrom:n,timeFrom:a.state.timeFrom,phone:a.state.phone,phone2:a.state.phone2,typeOfService:s,advertising:a.state.advertising,comment:a.state.comment,userCreated:a.props.auth.user.id,userAcceptedOrder:a.state.userAcceptedOrder};a.props.createOrder(i,a.props.history,a.props.auth.user.occupation)}},a.props.location.state?(n=a.props.location.state.state.date,r=a.props.location.state.state.hour):(n="",r=""),a.state={disinfectorId:"",userAcceptedOrder:"",client:"",clientType:"",clientId:"",address:"",date:n,timeFrom:r,phone:"",hasSecondPhone:!1,phone2:"",typeOfService:[],advertising:"",comment:"",errors:{}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getCorporateClients(),this.props.getAllUsers(),window.scrollTo({top:0});var e=[];Ht.a.forEach(function(t){e.push({type:t.value,selected:!1})}),this.setState({typeOfService:e})}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this,t=this.state.errors,a=this.props.order.allUsers?this.props.order.allUsers.sort(function(e,t){return e.name-t.name}):[],n=[{label:"-- \u041a\u0442\u043e \u043f\u0440\u0438\u043d\u044f\u043b \u0437\u0430\u043a\u0430\u0437? --",value:0}];a.forEach(function(e){n.push({label:"".concat(e.occupation,", ").concat(e.name),value:e._id})});var l=a.filter(function(e){return"disinfector"===e.occupation||"subadmin"===e.occupation}),c=[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0434\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430 --",value:0}];l.forEach(function(e){return c.push({label:"".concat(e.name,", ").concat(e.occupation),value:e._id})});var s=[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430 --",value:""}];this.props.order.corporateClients.sort(function(e,t){return e.name===t.name?0:e.name<t.name?-1:1}).forEach(function(e){s.push({label:e.name,value:e._id})});var o=[{label:"-- \u041e\u0442\u043a\u0443\u0434\u0430 \u0443\u0437\u043d\u0430\u043b\u0438 \u043e \u043d\u0430\u0441? --",value:0}];Et.a.forEach(function(e){o.push({label:e.label,value:e.value})});var i={control:function(t){return Object(A.a)({},t,{backgroundColor:"dark"===e.props.options.theme?"#666666":"white",color:"dark"===e.props.options.theme?"white":"black"})},option:function(t){return Object(A.a)({},t,{backgroundColor:"dark"===e.props.options.theme?"#212d3b":"white",color:"dark"===e.props.options.theme?"white":"black"})},placeholder:function(t){return Object(A.a)({},t,{color:"dark"===e.props.options.theme?"white":"black"})},singleValue:function(t){return Object(A.a)({},t,{color:"dark"===e.props.options.theme?"white":"black"})}};return r.a.createElement("div",{className:"container create-order mt-4"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h2",{className:"text-center"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0417\u0430\u043a\u0430\u0437"),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},r.a.createElement(Jt,{name:"clientType",value:this.state.clientType,onChange:this.onChange,options:[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u043a\u043b\u0438\u0435\u043d\u0442\u0430 --",value:""},{label:"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439",value:"corporate"},{label:"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439",value:"individual"}],error:t.clientType}),"corporate"===this.state.clientType?r.a.createElement(Tn.a,{className:"select-corporate-client",onChange:this.onSelectClientTypeChange,options:s,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430",styles:i}):"",r.a.createElement(Tt,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0418\u043c\u044f \u041a\u043b\u0438\u0435\u043d\u0442\u0430",type:"text",name:"client",value:this.state.client,onChange:this.onChange,error:t.client}),r.a.createElement(Tt,{label:"\u0410\u0434\u0440\u0435\u0441",type:"text",name:"address",value:this.state.address,onChange:this.onChange,error:t.address}),r.a.createElement(Tt,{label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",type:"phone",name:"phone",value:this.state.phone,onChange:this.onChange,error:t.phone}),this.state.hasSecondPhone?r.a.createElement(r.a.Fragment,null,r.a.createElement(Tt,{label:"\u0417\u0430\u043f\u0430\u0441\u043d\u043e\u0439 \u041d\u043e\u043c\u0435\u0440 \u0422\u0435\u043b\u0435\u0444\u043e\u043d\u0430",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043f\u0430\u0441\u043d\u043e\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",type:"phone",name:"phone2",value:this.state.phone2,onChange:this.onChange}),r.a.createElement("button",{className:"btn btn-danger mb-2",onClick:this.deleteSecondPhone},r.a.createElement("i",{className:"fas fa-minus-circle"})," \u0423\u0431\u0440\u0430\u0442\u044c \u0437\u0430\u043f\u0430\u0441\u043d\u043e\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430")):r.a.createElement("button",{className:"btn btn-success mb-3",onClick:this.toggleSecondPhone},r.a.createElement("i",{className:"fas fa-plus-circle"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0439 \u043d\u043e\u043c\u0435\u0440"),r.a.createElement(Tt,{label:"\u0414\u0430\u0442\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430",name:"date",type:"date",value:this.state.date,onChange:this.onChange,error:t.date}),r.a.createElement(Tt,{label:"\u0412\u0440\u0435\u043c\u044f (\u0447\u0430\u0441\u044b:\u043c\u0438\u043d\u0443\u0442\u044b:AM/PM) C",name:"timeFrom",type:"time",value:this.state.timeFrom,onChange:this.onChange,error:t.timeFrom}),r.a.createElement("div",{className:"border-bottom"}),r.a.createElement("label",{htmlFor:""},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u0437\u0430\u043a\u0430\u0437\u0430 (\u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e):"),Ht.a.map(function(t,a){return r.a.createElement("div",{className:"form-check",key:a},r.a.createElement("label",{className:"form-check-label"},r.a.createElement("input",{type:"checkbox",className:"form-check-input",onChange:e.onChangeTypes,value:t.value}),t.label))}),r.a.createElement("div",{className:"border-bottom"}),r.a.createElement(Jt,{name:"advertising",value:this.state.advertising,onChange:this.onChange,error:t.advertising,options:o}),this.props.order.loading?r.a.createElement("p",null,"\u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u044b \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f..."):r.a.createElement(Jt,{name:"disinfectorId",value:this.state.disinfectorId,onChange:this.onChange,error:t.disinfectorId,options:c}),r.a.createElement(Jt,{name:"userAcceptedOrder",value:this.state.userAcceptedOrder,onChange:this.onChange,options:n,error:t.userAcceptedOrder}),r.a.createElement(Rt,{name:"comment",placeholder:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 (\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043d\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435)",value:this.state.comment,onChange:this.onChange,error:t.comment}),r.a.createElement("button",{type:"submit",className:"btn btn-success"},r.a.createElement("i",{className:"fas fa-plus-circle"})," \u0421\u043e\u0437\u0434\u0430\u0442\u044c")))))))}}]),t}(n.Component),_n=Object(S.b)(function(e){return{auth:e.auth,order:e.order,options:e.options,errors:e.errors}},{getCorporateClients:we,getAllUsers:je,createOrder:function(e,t,a){return function(n){g.a.post("/order/create-order",e).then(function(e){return t.push("/".concat(a))}).catch(function(e){return n({type:y,payload:e.response.data})})}}})(Object(p.g)(Rn)),Hn=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getOrderById(this.props.match.params.id)}},{key:"render",value:function(){var e=this.props.order.orderById;return r.a.createElement("div",{className:"container"},this.props.order.loading?r.a.createElement(me,null):r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center"},"\u0414\u0435\u0442\u0430\u043b\u0438 \u0417\u0430\u043a\u0430\u0437\u0430")),r.a.createElement("div",{className:"col-lg-8 col-md-10 m-auto"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold list-unstyled"},e.prevFailedOrder&&r.a.createElement("h3",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"})),e.failed&&r.a.createElement("h3",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"})),e.disinfectorId&&r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439: ",e.disinfectorId.occupation," ",e.disinfectorId.name),e.operatorDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.operatorConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.operatorCheckedAt),")"),r.a.createElement("li",null,"\u0411\u0430\u043b\u043b (0-5): ",e.score),r.a.createElement("li",null,"\u041e\u0442\u0437\u044b\u0432 \u041a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.clientReview?e.clientReview:"\u041d\u0435\u0442 \u041e\u0442\u0437\u044b\u0432\u0430")):r.a.createElement("li",{className:"text-danger"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.operatorCheckedAt),")")):r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.accountantDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.accountantConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.accountantCheckedAt),")"),r.a.createElement("li",null,"\u0421\u0447\u0435\u0442-\u0424\u0430\u043a\u0442\u0443\u0440\u0430: ",e.invoice?e.invoice:"--"),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement("li",{className:"text-danger"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.accountantCheckedAt),")")):r.a.createElement(r.a.Fragment,null,e.adminDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0410\u0434\u043c\u0438\u043d \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.adminConfirmed?r.a.createElement("li",{className:"text-success"},"\u0410\u0434\u043c\u0438\u043d \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.adminCheckedAt),")"):r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u043c\u0438\u043d \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.adminCheckedAt),")")):r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443")),"corporate"===e.clientType?r.a.createElement(r.a.Fragment,null,e.clientId?r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.clientId.name):r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442"),r.a.createElement("li",{className:"text-danger"},"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.client)):"","individual"===e.clientType?r.a.createElement("li",{className:"text-danger"},"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.client):"",r.a.createElement("li",{className:"text-danger"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.phone),""!==e.phone2?r.a.createElement("li",null,"\u0417\u0430\u043f\u0430\u0441\u043d\u043e\u0439 \u043d\u043e\u043c\u0435\u0440: ",e.phone2):"",r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u0440\u0435\u0441: ",e.address),r.a.createElement("li",{className:"text-danger"},"\u0422\u0438\u043f \u0443\u0441\u043b\u0443\u0433\u0438: ",e.typeOfService),e.dateFrom?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0414\u0430\u0442\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},e.dateFrom)),e.completed?r.a.createElement("li",null,"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: \u0421 ",r.a.createElement(re.a,{format:"HH:mm"},e.dateFrom)," \u041f\u041e ",r.a.createElement(re.a,{format:"HH:mm"},e.completedAt)):r.a.createElement("li",null,"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: ",r.a.createElement(re.a,{format:"HH:mm"},e.dateFrom))):r.a.createElement("li",null,"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: --"),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430: ",e.comment?e.comment:"--"),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430: ",e.disinfectorComment?e.disinfectorComment:"--"),e.userAcceptedOrder&&r.a.createElement("li",null,"\u0417\u0430\u043a\u0430\u0437 \u043f\u0440\u0438\u043d\u044f\u043b: ",e.userAcceptedOrder.occupation," ",e.userAcceptedOrder.name),e.userCreated&&r.a.createElement("li",null,"\u041a\u0442\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u043b \u0437\u0430\u043a\u0430\u0437: ",e.userCreated.occupation," ",e.userCreated.name),r.a.createElement("li",null,"\u0417\u0430\u043a\u0430\u0437 \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.createdAt))))))))}}]),t}(n.Component),Ln=Object(S.b)(function(e){return{auth:e.auth,order:e.order,operator:e.operator,errors:e.errors}},{getOrderById:xe})(Object(p.g)(Hn)),Bn=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={completeOrders:a.props.operator.completeOrders},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.operator.completeOrders&&this.props.operator.completeOrders.length>0&&this.setState({completeOrders:this.props.operator.completeOrders})}},{key:"render",value:function(){var e=this,t=this.state.completeOrders.map(function(e,t){return r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-2",key:t},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},e.prevFailedOrder&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),e.failed&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),e.returnedBack&&r.a.createElement("li",{className:"text-danger"},"\u042d\u0442\u043e \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437"),e.disinfectorId&&r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439: ",e.disinfectorId.occupation," ",e.disinfectorId.name),"corporate"===e.clientType?r.a.createElement(r.a.Fragment,null,e.clientId?r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.clientId.name):r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442"),r.a.createElement("li",{className:"text-danger"},"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.client)):"","individual"===e.clientType?r.a.createElement("li",{className:"text-danger"},"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.client):"",r.a.createElement("li",{className:"text-danger"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.phone),""!==e.phone2?r.a.createElement("li",null,"\u0417\u0430\u043f\u0430\u0441\u043d\u043e\u0439 \u043d\u043e\u043c\u0435\u0440: ",e.phone2):"",r.a.createElement("li",{className:"text-danger"},"\u0414\u0430\u0442\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},e.dateFrom)),r.a.createElement("li",{className:"text-danger"},"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: \u0421 ",r.a.createElement(re.a,{format:"HH:mm"},e.dateFrom)," \u041f\u041e ",r.a.createElement(re.a,{format:"HH:mm"},e.completedAt)),r.a.createElement("li",null,"\u0410\u0434\u0440\u0435\u0441: ",e.address),r.a.createElement("li",null,"\u0422\u0438\u043f \u0443\u0441\u043b\u0443\u0433\u0438: ",e.typeOfService),r.a.createElement("li",null,"\u0421\u0440\u043e\u043a \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0438 (\u0432 \u043c\u0435\u0441\u044f\u0446\u0430\u0445): ",e.guarantee),r.a.createElement("li",null,"\u0424\u043e\u0440\u043c\u0430 \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0417\u0430\u043a\u0430\u0437\u0430 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.completedAt))),r.a.createElement(u.b,{to:"/order-confirm/".concat(e._id),className:"btn btn-dark mt-2"},r.a.createElement("i",{className:"fab fa-wpforms"})," \u0424\u043e\u0440\u043c\u0430 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f"))))});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center"},"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435 \u0417\u0430\u043a\u0430\u0437\u044b")),r.a.createElement("div",{className:"col-12 mt-2"},r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.props.getCompleteOrders(e.props.auth.user.id)}},r.a.createElement("i",{className:"fas fa-redo-alt"})," \u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u044b")),t))}}]),t}(n.Component),Un=Object(S.b)(function(e){return{auth:e.auth,order:e.order,operator:e.operator,errors:e.errors}},{getCompleteOrders:Mn})(Object(p.g)(Bn)),Gn=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.operator.completeOrders&&0!==this.props.operator.completeOrders.length||this.props.getCompleteOrders(this.props.auth.user.id)}},{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid"},this.props.operator.loadingCompleteOrders?r.a.createElement(me,null):r.a.createElement(Un,null))}}]),t}(n.Component),qn=Object(S.b)(function(e){return{auth:e.auth,order:e.order,operator:e.operator,errors:e.errors}},{getCompleteOrders:Mn})(Object(p.g)(Gn)),Qn=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={clientReview:"",score:"",errors:{}},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){if(e.preventDefault(),""===a.state.clientReview)return alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u0442\u0437\u044b\u0432 \u043a\u043b\u0438\u0435\u043d\u0442\u0430");var t={orderId:a.props.operator.orderToConfirm._id,decision:"confirm",clientReview:a.state.clientReview,score:a.state.score};a.props.confirmCompleteOrder(t,a.props.history)},a.reject=function(){var e={orderId:a.props.operator.orderToConfirm._id,decision:"reject",clientReview:"",score:""};a.props.confirmCompleteOrder(e,a.props.history)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getCompleteOrderById(this.props.match.params.id)}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this,t=this.props.operator.orderToConfirm,a=this.state.errors,n=[];t.disinfectors.forEach(function(e){n.push({user:e.user,consumption:e.consumption})});var l=n.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("p",{className:"mb-0"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c: ",e.user.occupation," ",e.user.name),e.consumption.map(function(e,t){return r.a.createElement("p",{key:t,className:"mb-0"},e.material,": ",e.amount.toLocaleString()," ",e.unit)}))});return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-6 col-md-9 mx-auto"},this.props.operator.loadingCompleteOrders?r.a.createElement(me,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"text-center"},"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0439 \u0417\u0430\u043a\u0430\u0437"),r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},t.prevFailedOrder&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),t.failed&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),t.disinfectorId&&r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439: ",t.disinfectorId.occupation," ",t.disinfectorId.name),t.failed&&t.nextOrdersAfterFailArray&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-primary"},"\u041f\u043e\u0432\u0442\u043e\u0440\u043e\u0432 \u0443 \u044d\u0442\u043e\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430: ",t.nextOrdersAfterFailArray.length),t.nextOrdersAfterFailArray.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-primary"},"\u0412\u0440\u0435\u043c\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.nextOrdersAfterFailArray[t.nextOrdersAfterFailArray.length-1].dateFrom)),r.a.createElement("li",{className:"text-primary"},"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0437\u0430\u043a\u0430\u0437: ",t.nextOrdersAfterFailArray[t.nextOrdersAfterFailArray.length-1].disinfectorId.occupation," ",t.nextOrdersAfterFailArray[t.nextOrdersAfterFailArray.length-1].disinfectorId.name))),t.accountantDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),t.accountantConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.accountantCheckedAt),")"),r.a.createElement("li",null,"\u0421\u0447\u0435\u0442-\u0424\u0430\u043a\u0442\u0443\u0440\u0430: ",t.invoice?t.invoice:"--"),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",t.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(t.cost/t.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement("li",{className:"text-danger"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.accountantCheckedAt),")")):r.a.createElement(r.a.Fragment,null,t.adminDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0410\u0434\u043c\u0438\u043d \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),t.adminConfirmed?r.a.createElement("li",{className:"text-success"},"\u0410\u0434\u043c\u0438\u043d \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.adminCheckedAt),")"):r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u043c\u0438\u043d \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.adminCheckedAt),")")):r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443")),"corporate"===t.clientType?r.a.createElement(r.a.Fragment,null,t.clientId?r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",t.clientId.name):r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442"),r.a.createElement("li",{className:"text-danger"},"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",t.client)):"","individual"===t.clientType?r.a.createElement("li",{className:"text-danger"},"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",t.client):"",r.a.createElement("li",{className:"text-danger"},"\u0414\u0430\u0442\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},t.dateFrom)),r.a.createElement("li",{className:"text-danger"},"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: \u0421 ",r.a.createElement(re.a,{format:"HH:mm"},t.dateFrom)," \u041f\u041e ",r.a.createElement(re.a,{format:"HH:mm"},t.completedAt)),r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u0440\u0435\u0441: ",t.address),r.a.createElement("li",{className:"text-danger"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",t.phone),""!==t.phone2?r.a.createElement("li",{className:"text-danger"},"\u0417\u0430\u043f\u0430\u0441\u043d\u043e\u0439 \u043d\u043e\u043c\u0435\u0440: ",t.phone2):"",r.a.createElement("li",{className:"text-danger"},"\u0422\u0438\u043f \u0443\u0441\u043b\u0443\u0433\u0438: ",t.typeOfService),r.a.createElement("li",null,"\u0421\u0440\u043e\u043a \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0438 (\u0432 \u043c\u0435\u0441\u044f\u0446\u0430\u0445): ",t.guarantee),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430: ",t.comment?t.comment:"--"),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430: ",t.disinfectorComment?t.disinfectorComment:"--"),r.a.createElement("li",null,"\u0420\u0430\u0441\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 (\u0437\u0430\u043a\u0430\u0437 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u043b\u0438 ",t.disinfectors.length," \u0447\u0435\u043b):"),r.a.createElement("ul",{className:"font-bold mb-0"},l),"corporate"===t.clientType?r.a.createElement(r.a.Fragment,null,"cash"===t.paymentMethod?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u041d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",t.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(t.cost/t.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u0411\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),r.a.createElement("li",null,"\u041d\u043e\u043c\u0435\u0440 \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430: ",t.contractNumber||""))):"","individual"===t.clientType?r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",t.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(t.cost/t.disinfectors.length).toLocaleString()," UZS)"):"",t.userAcceptedOrder?r.a.createElement("li",null,"\u0417\u0430\u043a\u0430\u0437 \u043f\u0440\u0438\u043d\u044f\u043b: ",t.userAcceptedOrder.occupation," ",t.userAcceptedOrder.name):"",t.userCreated?r.a.createElement("li",null,"\u0417\u0430\u043a\u0430\u0437 \u0434\u043e\u0431\u0430\u0432\u0438\u043b: ",t.userCreated.occupation," ",t.userCreated.name):"",r.a.createElement("li",null,"\u0424\u043e\u0440\u043c\u0430 \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0417\u0430\u043a\u0430\u0437\u0430 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.completedAt))),r.a.createElement("div",{className:"btn-group mt-3"},r.a.createElement("button",{className:"btn btn-danger mr-2",onClick:function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437?")&&e.reject()}},r.a.createElement("i",{className:"fas fa-ban"})," \u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0417\u0430\u043a\u0430\u0437\u0430")),r.a.createElement(da,{order:t,shouldLoadOrder:!0}))))),r.a.createElement("div",{className:"col-lg-6 col-md-9 mx-auto"},r.a.createElement("div",{className:"card mt-3 mb-3"},r.a.createElement("div",{className:"card-body p-2"},r.a.createElement("h3",{className:"text-center"},"\u0424\u043e\u0440\u043c\u0430 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f \u0417\u0430\u043a\u0430\u0437\u0430"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(Tt,{label:"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0439 \u0411\u0430\u043b\u043b \u0437\u0430 \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0417\u0430\u043a\u0430\u0437\u0430 (0-5):",type:"number",name:"score",min:"0",max:"5",value:this.state.score,onChange:this.onChange,error:a.score,required:!0}),r.a.createElement(Rt,{name:"clientReview",placeholder:"\u041e\u0442\u0437\u044b\u0432 \u041a\u043b\u0438\u0435\u043d\u0442\u0430",value:this.state.clientReview,onChange:this.onChange,error:a.clientReview}),r.a.createElement("button",{className:"btn btn-success btn-block"},r.a.createElement("i",{className:"fas fa-check-square"})," \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0417\u0430\u043a\u0430\u0437\u0430")))))))}}]),t}(n.Component),Wn=Object(S.b)(function(e){return{auth:e.auth,order:e.order,operator:e.operator,errors:e.errors}},{getCompleteOrderById:function(e){return function(t){t(wn()),g.a.post("/operator/get-complete-order-by-id/".concat(e)).then(function(e){return t({type:"GET_COMPLETE_ORDER_BY_ID",payload:e.data})}).catch(function(e){return t({type:y,payload:e.response.data})})}},confirmCompleteOrder:function(e,t){return function(a){a({type:"DELETE_QUERY_FROM_STATE",payload:e.orderId}),g.a.post("/operator/confirm-complete-order",{object:e}).then(function(){return t.push("/operator/order-queries")}).catch(function(e){return a({type:y,payload:e})})}}})(Object(p.g)(Qn)),Pn=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={repeatOrders:[],day:"",headingDay:"",method:"",hoverRange:void 0,selectedDays:[]},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.getDayRepeats=function(e){e.preventDefault();var t={operatorId:a.props.auth.user.id,type:"day",day:a.state.day};a.props.getRepeatOrders(t),a.setState({method:"day",headingDay:a.state.day.split("-").reverse().join("-")})},a.noNeed=function(e){a.props.repeatOrderNotNeeded(e,a.props.history,a.props.auth.user.occupation)},a.handleDayChange=function(e){var t={operatorId:a.props.auth.user.id,type:"week",days:ot(it(e).from)};a.props.getRepeatOrders(t),a.setState({method:"week",selectedDays:ot(it(e).from)})},a.handleDayEnter=function(e){a.setState({hoverRange:it(e)})},a.handleDayLeave=function(){a.setState({hoverRange:void 0})},a.handleWeekClick=function(e,t,n){var r={operatorId:a.props.auth.user.id,type:"week",days:ot(it(t[0]).from)};a.props.getRepeatOrders(r),a.setState({method:"week",selectedDays:ot(it(t[0]).from)})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({repeatOrders:e.operator.repeatOrders})}},{key:"render",value:function(){var e=this,t=this.state,a=t.hoverRange,n=t.selectedDays,l=n.length>0,c={hoverRange:a,selectedRange:l&&{from:n[0],to:n[6]},hoverRangeStart:a&&a.from,hoverRangeEnd:a&&a.to,selectedRangeStart:l&&n[0],selectedRangeEnd:l&&n[6]},s=this.state.repeatOrders.map(function(t,a){var n=[];t.previousOrder.disinfectors.forEach(function(e){n.push({user:e.user,consumption:e.consumption})});var l=n.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("p",{className:"mb-0"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c: ",e.user.occupation," ",e.user.name),e.consumption.map(function(e,t){return r.a.createElement("p",{key:t,className:"mb-0"},e.material,": ",e.amount.toLocaleString()," ",e.unit)}))});return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},t.disinfectorId&&r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439: ",t.disinfectorId.occupation," ",t.disinfectorId.name),"corporate"===t.clientType?r.a.createElement(r.a.Fragment,null,t.clientId?r.a.createElement("li",null,"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",t.clientId.name):r.a.createElement("li",null,"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442"),r.a.createElement("li",null,"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",t.client)):"","individual"===t.clientType?r.a.createElement("li",null,"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",t.client):"",r.a.createElement("li",null,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d: ",t.phone),t.phone2&&""!==t.phone2?r.a.createElement("li",null,"\u0417\u0430\u043f\u0430\u0441\u043d\u043e\u0439 \u043d\u043e\u043c\u0435\u0440: ",t.phone2):"",r.a.createElement("li",null,"\u0410\u0434\u0440\u0435\u0441: ",t.address),r.a.createElement("li",null,"\u0422\u0438\u043f \u0443\u0441\u043b\u0443\u0433\u0438: ",t.typeOfService),r.a.createElement("li",null,"\u0414\u0430\u0442\u0430 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},t.previousOrder.dateFrom)),r.a.createElement("li",null,"\u0421\u0440\u043e\u043a \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0438 (\u0432 \u043c\u0435\u0441\u044f\u0446\u0430\u0445): ",t.previousOrder.guarantee),r.a.createElement("li",null,"\u0421\u0440\u043e\u043a \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0438 \u0438\u0441\u0442\u0435\u043a\u0430\u0435\u0442: ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},t.timeOfRepeat))),r.a.createElement("button",{type:"button",className:"btn btn-primary mt-2","data-toggle":"modal","data-target":"#info".concat(a)},"\u041f\u043e\u043b\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u043c \u0437\u0430\u043a\u0430\u0437\u0435"),r.a.createElement(u.b,{to:"/create-repeat-order-form/".concat(t._id),className:"btn btn-success mt-2"},"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u043d\u0443\u0436\u043d\u0430"),r.a.createElement("button",{className:"btn btn-danger mt-2",onClick:function(){if(window.confirm("\u0412\u044b  \u0443\u0432\u0435\u0440\u0435\u043d\u044b?"))return e.noNeed(t._id)}},"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u043d\u0435 \u043d\u0443\u0436\u043d\u0430")))),r.a.createElement("div",{className:"modal fade",id:"info".concat(a)},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-body"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},t.disinfectorId&&r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439: ",t.disinfectorId.occupation," ",t.disinfectorId.name),"corporate"===t.clientType?r.a.createElement(r.a.Fragment,null,t.clientId?r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",t.clientId.name):r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442"),r.a.createElement("li",{className:"text-danger"},"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",t.client),r.a.createElement("li",null,"\u041d\u043e\u043c\u0435\u0440 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: ",t.previousOrder.contractNumber)):"","individual"===t.clientType?r.a.createElement("li",{className:"text-danger"},"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",t.client):"",r.a.createElement("li",{className:"text-danger"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d: ",t.phone),t.phone2&&""!==t.phone2?r.a.createElement("li",{className:"text-danger"},"\u0417\u0430\u043f\u0430\u0441\u043d\u043e\u0439 \u043d\u043e\u043c\u0435\u0440: ",t.phone2):"",r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u0440\u0435\u0441: ",t.address),r.a.createElement("li",{className:"text-danger"},"\u0414\u0430\u0442\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},t.previousOrder.dateFrom)),r.a.createElement("li",{className:"text-danger"},"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: \u0421 ",r.a.createElement(re.a,{format:"HH:mm"},t.previousOrder.dateFrom)," \u041f\u041e ",r.a.createElement(re.a,{format:"HH:mm"},t.previousOrder.completedAt)),r.a.createElement("li",{className:"text-danger"},"\u0422\u0438\u043f \u0443\u0441\u043b\u0443\u0433\u0438: ",t.typeOfService),r.a.createElement("li",null,"\u041e\u0442\u043a\u0443\u0434\u0430 \u0443\u0437\u043d\u0430\u043b\u0438: ",t.advertising),r.a.createElement("li",null,"\u0421\u0440\u043e\u043a \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0438 (\u0432 \u043c\u0435\u0441\u044f\u0446\u0430\u0445): ",t.previousOrder.guarantee),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430: ",t.previousOrder.comment?t.previousOrder.comment:"--"),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430: ",t.previousOrder.disinfectorComment?t.previousOrder.disinfectorComment:"--"),t.userAcceptedOrder?r.a.createElement("li",null,"\u0417\u0430\u043a\u0430\u0437 \u043f\u0440\u0438\u043d\u044f\u043b: ",t.userAcceptedOrder.occupation," ",t.userAcceptedOrder.name):"",t.userCreated?r.a.createElement("li",null,"\u0417\u0430\u043a\u0430\u0437 \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d: ",t.userCreated.occupation," ",t.userCreated.name," (\u0432\u0440\u0435\u043c\u044f: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.createdAt),")"):"",r.a.createElement("li",null,"\u0420\u0430\u0441\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432:"),r.a.createElement("ul",{className:"font-bold mb-0"},l),t.previousOrder.operatorDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443 (\u0432\u0440\u0435\u043c\u044f: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.previousOrder.operatorCheckedAt),")"),t.previousOrder.operatorConfirmed?r.a.createElement("li",{className:"text-success"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b \u0437\u0430\u044f\u043a\u0443"):r.a.createElement("li",{className:"text-danger"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u043e\u0442\u0432\u0435\u0440\u0433 \u0437\u0430\u044f\u043a\u0443"),r.a.createElement("li",null,"\u0411\u0430\u043b\u043b: ",t.previousOrder.score),r.a.createElement("li",null,"\u041e\u0442\u0437\u044b\u0432 \u041a\u043b\u0438\u0435\u043d\u0442\u0430: ",t.previousOrder.clientReview)):r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),t.previousOrder.accountantDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),t.previousOrder.accountantConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.previousOrder.accountantCheckedAt),")"),r.a.createElement("li",null,"\u0421\u0447\u0435\u0442-\u0424\u0430\u043a\u0442\u0443\u0440\u0430: ",t.previousOrder.invoice?t.previousOrder.invoice:"--"),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",t.previousOrder.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(t.previousOrder.cost/t.previousOrder.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement("li",{className:"text-danger"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.previousOrder.accountantCheckedAt),")")):r.a.createElement(r.a.Fragment,null,t.previousOrder.adminDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0410\u0434\u043c\u0438\u043d \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),t.previousOrder.adminConfirmed?r.a.createElement("li",{className:"text-success"},"\u0410\u0434\u043c\u0438\u043d \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.previousOrder.adminCheckedAt),")"):r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u043c\u0438\u043d \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.previousOrder.adminCheckedAt),")")):r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443")))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal"},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"))))))});return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center"},"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u043f\u0440\u043e\u0434\u0430\u0436\u0438"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6 weekly-stats mt-3"},r.a.createElement("div",{className:"SelectedWeekExample form-bg font-weight-bold"},r.a.createElement("h4",{className:"text-center"},"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u043f\u0440\u043e\u0434\u0430\u0436\u0438 \u043f\u043e \u043d\u0435\u0434\u0435\u043b\u044f\u043c"),r.a.createElement(dt.a,{selectedDays:n,showWeekNumbers:!0,showOutsideDays:!0,modifiers:c,firstDayOfWeek:1,onDayClick:this.handleDayChange,onDayMouseEnter:this.handleDayEnter,onDayMouseLeave:this.handleDayLeave,onWeekClick:this.handleWeekClick}))),r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("form",{onSubmit:this.getDayRepeats,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u043f\u0440\u043e\u0434\u0430\u0436\u0438 \u043f\u043e \u0434\u043d\u044f\u043c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"day"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0414\u0435\u043d\u044c:")),r.a.createElement("input",{type:"date",name:"day",className:"form-control",onChange:this.onChange,required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},"week"===this.state.method?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u041d\u0435\u0434\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u043f\u0440\u043e\u0434\u0430\u0436\u0438 \u0437\u0430 ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[0])," - ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[6])):"","day"===this.state.method?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0414\u043d\u0435\u0432\u043d\u044b\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u043f\u0440\u043e\u0434\u0430\u0436\u0438 \u0437\u0430 ",this.state.headingDay):"")),this.props.operator.loadingSortedOrders?r.a.createElement(me,null):r.a.createElement("div",{className:"row"},s))}}]),t}(n.Component),Zn=Object(S.b)(function(e){return{auth:e.auth,order:e.order,operator:e.operator,errors:e.errors}},{getRepeatOrders:function(e){return function(t){t(kn()),t({type:"SET_REPEAT_ORDER_SEARCH_VARS",payload:{method:e.type,headingDay:e.day||"",selectedDays:e.days||[]}}),g.a.post("/operator/get-repeat-orders",{object:e}).then(function(e){return t({type:"GET_REPEAT_ORDERS",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}},repeatOrderNotNeeded:function(e,t,a){return function(n){g.a.post("/operator/repeat-order-not-needed",{id:e}).then(function(){return t.push("/".concat(a))}).catch(function(e){return n({type:y,payload:e})})}}})(Object(p.g)(Pn)),Xn=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={disinfectorId:"",userAcceptedOrder:"",client:"",clientType:"",clientId:"",address:"",date:"",timeFrom:"",phone:"",hasSecondPhone:!1,phone2:"",typeOfService:[],advertising:"",comment:""},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.onChangeTypes=function(e){var t=Object(j.a)(a.state.typeOfService);t.forEach(function(t){t.type===e.target.value&&(t.selected=e.target.checked)}),a.setState({typeOfService:t})},a.toggleSecondPhone=function(e){e.preventDefault(),a.setState({hasSecondPhone:!a.state.hasSecondPhone})},a.deleteSecondPhone=function(e){e.preventDefault(),a.setState({hasSecondPhone:!1,phone2:""})},a.onSubmit=function(e){e.preventDefault();for(var t=a.state.date.split("-"),n=new Date("".concat(t[1],"-").concat(t[2],"-").concat(t[0]," ").concat(a.state.timeFrom)),r=0,l=0,c=1;c<=12;c++)a.state.phone[c]>="0"&&a.state.phone[c]<="9"&&r++,a.state.phone2[c]>="0"&&a.state.phone2[c]<="9"&&l++;var s="",o=0;if(a.state.typeOfService.forEach(function(e){e.selected&&(1===++o?s+=e.type:s=s+", "+e.type)}),13!==a.state.phone.length||a.state.hasSecondPhone&&13!==a.state.phone2.length)alert("\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c 13 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432. \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 +998XXXXXXXXX");else if("+"!==a.state.phone[0]||a.state.hasSecondPhone&&"+"!==a.state.phone2[0])alert('\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 "+". \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 +998XXXXXXXXX');else if(12!==r||a.state.hasSecondPhone&&12!==l)alert('\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c "+" \u0438 12 \u0446\u0438\u0444\u0440');else if(0===o)alert("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u0437\u0430\u043a\u0430\u0437\u0430");else{var i={id:a.props.match.params.orderId,disinfectorId:a.state.disinfectorId,clientType:a.state.clientType,client:a.state.client,clientId:a.state.clientId,address:a.state.address,date:a.state.date,dateFrom:n,timeFrom:a.state.timeFrom,phone:a.state.phone,phone2:a.state.phone2,typeOfService:s,advertising:a.state.advertising,comment:a.state.comment,userCreated:a.props.auth.user.id,userAcceptedOrder:a.state.userAcceptedOrder};a.props.createRepeatOrder(i,a.props.history,a.props.auth.user.occupation)}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getRepeatOrderForm(this.props.match.params.orderId),this.props.getAllUsers(),window.scrollTo({top:0});var e=[];Ht.a.forEach(function(t){e.push({type:t.value,selected:!1})}),this.setState({typeOfService:e})}},{key:"componentWillReceiveProps",value:function(e){if(e.order.repeatOrder){var t=e.order.repeatOrder;t.phone2&&""!==t.phone2?this.setState({hasSecondPhone:!0,phone2:t.phone2}):this.setState({hasSecondPhone:!1});var a=[];Ht.a.forEach(function(e){a.push({type:e.value,selected:!1})});var n=[];t.typeOfService&&t.typeOfService.length>0&&(n=t.typeOfService.split(","),a.forEach(function(e){n.forEach(function(t){e.type===t.trim()&&(e.selected=!0)})})),this.setState({disinfectorId:t.disinfectorId._id?t.disinfectorId._id:"",clientType:t.clientType?t.clientType:"",client:t.client?t.client:"",clientId:t.clientId?t.clientId._id:"",address:t.address?t.address:"",phone:t.phone?t.phone:"",typeOfService:a,advertising:t.advertising?t.advertising:"",userAcceptedOrder:t.userAcceptedOrder?t.userAcceptedOrder._id:""})}}},{key:"render",value:function(){var e=this,t=this.props.order.allUsers?this.props.order.allUsers.sort(function(e,t){return e.name-t.name}):[],a=[{label:"-- \u041a\u0442\u043e \u043f\u0440\u0438\u043d\u044f\u043b \u0437\u0430\u043a\u0430\u0437? --",value:""}];t.forEach(function(e){a.push({label:"".concat(e.occupation,", ").concat(e.name),value:e._id})});var n=t.filter(function(e){return"disinfector"===e.occupation||"subadmin"===e.occupation}),l=[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0434\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430 --",value:""}];n.forEach(function(e){return l.push({label:"".concat(e.name,", ").concat(e.occupation),value:e._id})});var c=[{label:"-- \u041e\u0442\u043a\u0443\u0434\u0430 \u0443\u0437\u043d\u0430\u043b\u0438 \u043e \u043d\u0430\u0441? --",value:""}];Et.a.forEach(function(e){c.push({label:e.label,value:e.value})});var s=this.state.typeOfService.map(function(t,a){return r.a.createElement("div",{className:"form-check",key:a},r.a.createElement("label",{className:"form-check-label"},t.selected?r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"checkbox",defaultChecked:"checked",className:"form-check-input",onChange:e.onChangeTypes,value:t.type}),t.type):r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"checkbox",className:"form-check-input",onChange:e.onChangeTypes,value:t.type}),t.type)))});return r.a.createElement(r.a.Fragment,null,this.props.order.loadingRepeatOrder?r.a.createElement(me,null):r.a.createElement("div",{className:"container mt-4"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h2",{className:"display-5 text-center"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0417\u0430\u043a\u0430\u0437"),r.a.createElement("form",{onSubmit:this.onSubmit},"corporate"===this.state.clientType?r.a.createElement("h5",null,"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",this.props.order.repeatOrder.clientId.name):"","individual"===this.state.clientType?r.a.createElement("h5",null,"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442"):"",r.a.createElement(Tt,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0418\u043c\u044f \u041a\u043b\u0438\u0435\u043d\u0442\u0430",type:"text",name:"client",value:this.state.client,onChange:this.onChange,required:!0}),r.a.createElement(Tt,{label:"\u0410\u0434\u0440\u0435\u0441",type:"text",name:"address",value:this.state.address,onChange:this.onChange,required:!0}),r.a.createElement(Tt,{label:"\u0414\u0430\u0442\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430",name:"date",type:"date",onChange:this.onChange,required:!0}),r.a.createElement(Tt,{label:"\u0412\u0440\u0435\u043c\u044f (\u0447\u0430\u0441\u044b:\u043c\u0438\u043d\u0443\u0442\u044b:AM/PM) C",name:"timeFrom",type:"time",onChange:this.onChange,required:!0}),r.a.createElement(Tt,{label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",type:"phone",name:"phone",value:this.state.phone,onChange:this.onChange,required:!0}),this.state.hasSecondPhone?r.a.createElement(r.a.Fragment,null,r.a.createElement(Tt,{label:"\u0417\u0430\u043f\u0430\u0441\u043d\u043e\u0439 \u041d\u043e\u043c\u0435\u0440 \u0422\u0435\u043b\u0435\u0444\u043e\u043d\u0430",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043f\u0430\u0441\u043d\u043e\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",type:"phone",name:"phone2",value:this.state.phone2,onChange:this.onChange,required:!0}),r.a.createElement("button",{className:"btn btn-danger mb-2",onClick:this.deleteSecondPhone},r.a.createElement("i",{className:"fas fa-minus-circle"})," \u0423\u0431\u0440\u0430\u0442\u044c \u0437\u0430\u043f\u0430\u0441\u043d\u043e\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430")):r.a.createElement("button",{className:"btn btn-success mb-3",onClick:this.toggleSecondPhone},r.a.createElement("i",{className:"fas fa-plus-circle"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0439 \u043d\u043e\u043c\u0435\u0440"),r.a.createElement("div",{className:"border-bottom"}),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:""},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u0437\u0430\u043a\u0430\u0437\u0430 (\u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e):"),s),r.a.createElement("div",{className:"border-bottom"}),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"advertising"},"\u041e\u0442\u043a\u0443\u0434\u0430 \u0443\u0437\u043d\u0430\u043b\u0438:"),r.a.createElement("select",{className:"form-control",value:this.state.advertising,name:"advertising",onChange:this.onChange,required:!0},c.map(function(e,t){return r.a.createElement("option",{key:t,value:e.value},e.label)}))),this.props.order.loading?r.a.createElement("p",null,"\u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u044b \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f..."):r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"disinfectorId"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430:"),r.a.createElement("select",{className:"form-control",value:this.state.disinfectorId,name:"disinfectorId",onChange:this.onChange,required:!0},l.map(function(e,t){return r.a.createElement("option",{key:t,value:e.value},e.label)}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"userAcceptedOrder"},"\u041a\u0442\u043e \u043f\u0440\u0438\u043d\u044f\u043b \u0417\u0430\u043a\u0430\u0437:"),r.a.createElement("select",{className:"form-control",value:this.state.userAcceptedOrder,name:"userAcceptedOrder",onChange:this.onChange,required:!0},a.map(function(e,t){return r.a.createElement("option",{key:t,value:e.value},e.label)}))),r.a.createElement(Rt,{name:"comment",placeholder:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 (\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043d\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435)",value:this.state.comment,onChange:this.onChange,required:!0}),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fas fa-plus-circle"})," \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0417\u0430\u043a\u0430\u0437"))))))))}}]),t}(n.Component),Kn=Object(S.b)(function(e){return{auth:e.auth,operator:e.operator,order:e.order,errors:e.errors}},{getAllUsers:je,getRepeatOrderForm:function(e){return function(t){t(_e()),g.a.post("/operator/repeat-order-form",{id:e}).then(function(e){return t({type:"GET_REPEAT_ORDER_FORM",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}},createRepeatOrder:function(e,t,a){return function(n){g.a.post("/order/create-repeat-order",{order:e}).then(function(){return t.push("/".concat(a))}).catch(function(e){return n({type:y,payload:e.response.data})})}}})(Object(p.g)(Xn)),Vn=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={orders:a.props.operator.stats.sortedOrders},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=et(this.state.orders),t=e.totalSum,a=e.totalScore,n=e.totalOrders,l=e.completed,c=e.confirmedOrders,s=e.rejected,o=e.consultAndOsmotrConfirmed,i=e.failed,m=e.povtors,d=e.corporate,u=e.corporatePercent,p=e.corpSum,h=e.corpSumPercent,E=e.indiv,f=e.indivPercent,g=e.indivSum,b=e.indivSumPercent,y=this.state.orders.filter(function(e){return e.completed&&!e.failed&&!e.hasOwnProperty("prevFailedOrder")}),v=nt(y),N=$e({totalScore:a,totalOrders:c.length,failedOrders:i})||0,O=(v=ze(v)).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)});return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h4",{className:"text-center"},"\u0417\u0430\u043a\u0430\u0437\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432\u044b \u043f\u0440\u0438\u043d\u044f\u043b\u0438:"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("li",null,"\u041f\u0440\u0438\u043d\u044f\u0442\u044b\u0435 \u0417\u0430\u043a\u0430\u0437\u044b: ",n),r.a.createElement("li",null,"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",l),r.a.createElement("li",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043e \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",c.length," (\u0438\u0437 \u043d\u0438\u0445 \u041a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u0438 \u0438 \u041e\u0441\u043c\u043e\u0442\u0440\u044b: ",o,")"),r.a.createElement("li",{className:"pt-2"},"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",t.toLocaleString()," UZS"),r.a.createElement("li",{className:"pb-2"},"\u0421\u0440\u0435\u0434\u043d\u0438\u0439 \u0431\u0430\u043b\u043b: ",N.toFixed(2)," (\u0438\u0437 5)"),r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0440\u0433\u043d\u0443\u0442\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",s),r.a.createElement("li",null,"\u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",i),r.a.createElement("li",null,"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",m),r.a.createElement("h6",{className:"mt-2"},"* \u043d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b \u043d\u0435 \u0432\u0445\u043e\u0434\u044f\u0442 \u0432 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b \u0438 \u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443"))))),r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("h4",{className:"text-center"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u044b"),r.a.createElement("li",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",d," (",u," %)"),r.a.createElement("li",null,"\u041d\u0430 \u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443: ",p.toLocaleString()," UZS  (",h," %)"),r.a.createElement("h4",{className:"text-center"},"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u044b"),r.a.createElement("li",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",E," (",f," %)"),r.a.createElement("li",null,"\u041d\u0430 \u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443: ",g.toLocaleString()," UZS (",b," %)"))))),r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h4",{className:"text-center"},"\u041e\u0431\u0449\u0438\u0439 \u0420\u0430\u0441\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0417\u0430\u043a\u0430\u0437\u043e\u0432:"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},O,r.a.createElement("h6",{className:"mt-2"},"* \u0441\u044e\u0434\u0430 \u043d\u0435 \u0432\u0445\u043e\u0434\u044f\u0442 \u043d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b"))))))}}]),t}(n.Component),Jn=Object(S.b)(function(e){return{auth:e.auth,operator:e.operator,errors:e.errors}})(Object(p.g)(Vn)),zn=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={month:"",year:"",day:"",headingMonth:"",headingYear:"",headingDay:"",hoverRange:void 0,selectedDays:[]},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.getMonthStats=function(e){e.preventDefault();var t={operatorId:a.props.auth.user.id,type:"month",month:a.state.month,year:a.state.year};a.props.getStatsForOperator(t),a.setState({headingMonth:a.state.month,headingYear:a.state.year})},a.getSpecificMonthStats=function(e){var t=Je(e),n=t.month,r=t.year,l={operatorId:a.props.auth.user.id,type:"month",month:n,year:r};a.props.getStatsForOperator(l),a.setState({headingMonth:n,headingYear:r})},a.getDayStats=function(e){e.preventDefault();var t={operatorId:a.props.auth.user.id,type:"day",day:a.state.day};a.props.getStatsForOperator(t),a.setState({headingDay:a.state.day.split("-").reverse().join("-")})},a.handleDayChange=function(e){var t={operatorId:a.props.auth.user.id,type:"week",days:ot(it(e).from)};a.props.getStatsForOperator(t),a.setState({selectedDays:ot(it(e).from)})},a.handleDayEnter=function(e){a.setState({hoverRange:it(e)})},a.handleDayLeave=function(){a.setState({hoverRange:void 0})},a.handleWeekClick=function(e,t,n){var r={operatorId:a.props.auth.user.id,type:"week",days:ot(it(t[0]).from)};a.props.getStatsForOperator(r),a.setState({selectedDays:ot(it(t[0]).from)})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=Ve(),a=t.monthLabels,n=t.yearLabels.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),l=a.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),c=this.state,s=c.hoverRange,o=c.selectedDays,i=o.length>0,m={hoverRange:s,selectedRange:i&&{from:o[0],to:o[6]},hoverRangeStart:s&&s.from,hoverRangeEnd:s&&s.to,selectedRangeStart:i&&o[0],selectedRangeEnd:i&&o[6]};return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("form",{onSubmit:this.getMonthStats,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u043c\u0435\u0441\u044f\u0446\u0430\u043c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"year"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0413\u043e\u0434:")),r.a.createElement("select",{name:"year",className:"form-control",onChange:this.onChange,required:!0},n)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"month"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041c\u0435\u0441\u044f\u0446:")),r.a.createElement("select",{name:"month",className:"form-control",onChange:this.onChange,required:!0},l)),r.a.createElement("button",{type:"submit",className:"btn btn-success mr-1 mt-1"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"),r.a.createElement("button",{type:"button",className:"btn btn-danger mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("current")}},"\u042d\u0442\u043e\u0442 \u043c\u0435\u0441\u044f\u0446"),r.a.createElement("button",{type:"button",className:"btn btn-primary mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("previous")}},"\u041f\u0440\u043e\u0448\u043b\u044b\u0439 \u043c\u0435\u0441\u044f\u0446"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("form",{onSubmit:this.getDayStats,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u0434\u043d\u044f\u043c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"day"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0414\u0435\u043d\u044c:")),r.a.createElement("input",{type:"date",name:"day",className:"form-control",onChange:this.onChange,required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 weekly-stats mt-3"},r.a.createElement("div",{className:"SelectedWeekExample form-bg font-weight-bold"},r.a.createElement("h4",{className:"text-center"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u043d\u0435\u0434\u0435\u043b\u044f\u043c"),r.a.createElement(dt.a,{selectedDays:o,showWeekNumbers:!0,showOutsideDays:!0,modifiers:m,firstDayOfWeek:1,onDayClick:this.handleDayChange,onDayMouseEnter:this.handleDayEnter,onDayMouseLeave:this.handleDayLeave,onWeekClick:this.handleWeekClick})))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},"week"===this.props.operator.stats.method?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0412\u0430\u0448\u0430 \u041d\u0435\u0434\u0435\u043b\u044c\u043d\u0430\u044f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0437\u0430 ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[0])," - ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[6])):"","month"===this.props.operator.stats.method?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0412\u0430\u0448\u0430 \u041c\u0435\u0441\u044f\u0447\u043d\u0430\u044f \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0437\u0430 ",Ke.a[this.state.headingMonth],", ",this.state.headingYear):"","day"===this.props.operator.stats.method?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0412\u0430\u0448\u0430 \u0414\u043d\u0435\u0432\u043d\u0430\u044f \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0437\u0430 ",this.state.headingDay):"")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},this.props.operator.loadingStats?r.a.createElement(me,null):r.a.createElement(Jn,null))))}}]),t}(n.Component),$n=Object(S.b)(function(e){return{auth:e.auth,order:e.order,operator:e.operator,errors:e.errors}},{getStatsForOperator:function(e){return function(t){t(jn()),g.a.post("/operator/get-operator-stats",{object:e}).then(function(e){return t({type:"GOT_STATS_FOR_OPERATOR",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}}})(Object(p.g)(zn)),er=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Accountant Page"))}}]),t}(n.Component),tr=function(e){return{type:"DELETE_QUERY_FROM_STATE",payload:e}},ar=function(e){return{type:"SET_TIME_PERIOD",payload:e}},nr=function(){return{type:"LOADING_ACC_QUERIES"}},rr=function(){return{type:"SET_LOADING_ACC_STATS"}},lr=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={queries:[],month:"",year:"",day:"",headingMonth:"",headingYear:"",headingDay:"",type:"",hoverRange:void 0,selectedDays:[]},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.getMonthStats=function(e){e.preventDefault();var t={type:"month",month:Number(a.state.month),year:Number(a.state.year)};a.props.getAccountantQueries(t),a.setState({type:"month",headingMonth:a.state.month,headingYear:a.state.year})},a.getSpecificMonthStats=function(e){var t=Je(e),n=t.month,r=t.year,l={type:"month",month:n,year:r};a.props.getAccountantQueries(l),a.setState({type:"month",headingMonth:n,headingYear:r})},a.getWeekStats=function(e){var t={type:"week",days:e};a.props.getAccountantQueries(t),a.setState({type:"week"})},a.getDayStats=function(e){e.preventDefault();var t={type:"day",day:a.state.day};a.props.getAccountantQueries(t),a.setState({type:t.type,headingDay:a.state.day.split("-").reverse().join("-")})},a.handleDayChange=function(e){a.getWeekStats(ot(it(e).from)),a.setState({selectedDays:ot(it(e).from),type:"week"})},a.handleDayEnter=function(e){a.setState({hoverRange:it(e)})},a.handleDayLeave=function(){a.setState({hoverRange:void 0})},a.handleWeekClick=function(e,t,n){a.getWeekStats(ot(it(t[0]).from)),a.setState({selectedDays:ot(it(t[0]).from),type:"week"})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.accountant.queries&&this.props.accountant.queries.length>0&&this.setState({queries:this.props.accountant.queries});var e=this.props.accountant.queryVars.method;if(e&&this.setState({type:e}),"day"===e){var t=this.props.accountant.queryVars.day.split("-").reverse().join("-");this.setState({headingDay:t})}"week"===e&&this.setState({selectedDays:this.props.accountant.queryVars.days}),"month"===e&&this.setState({headingMonth:this.props.accountant.queryVars.month,headingYear:this.props.accountant.queryVars.year})}},{key:"componentWillReceiveProps",value:function(e){e.accountant.queries&&this.setState({queries:e.accountant.queries})}},{key:"render",value:function(){var e=this,t=Ve(),a=t.monthLabels,n=t.yearLabels.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),l=a.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),c=this.state,s=c.hoverRange,o=c.selectedDays,i=o.length>0,m={hoverRange:s,selectedRange:i&&{from:o[0],to:o[6]},hoverRangeStart:s&&s.from,hoverRangeEnd:s&&s.to,selectedRangeStart:i&&o[0],selectedRangeEnd:i&&o[6]},d=this.state.queries,p=d.map(function(e,t){return r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-2",key:t},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},e.prevFailedOrder&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),e.failed&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),e.returnedBack&&r.a.createElement("li",{className:"text-danger"},"\u042d\u0442\u043e \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437"),e.disinfectorId&&r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439: ",e.disinfectorId.occupation," ",e.disinfectorId.name),e.operatorDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.operatorConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.operatorCheckedAt),")"),r.a.createElement("li",null,"\u0411\u0430\u043b\u043b (0-5): ",e.score),r.a.createElement("li",null,"\u041e\u0442\u0437\u044b\u0432 \u041a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.clientReview?e.clientReview:"\u041d\u0435\u0442 \u041e\u0442\u0437\u044b\u0432\u0430")):r.a.createElement("li",{className:"text-danger"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.operatorCheckedAt),")")):r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),"corporate"===e.clientType?r.a.createElement(r.a.Fragment,null,e.clientId?r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.clientId.name):r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442"),r.a.createElement("li",{className:"text-danger"},"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.client)):"","individual"===e.clientType?r.a.createElement("li",{className:"text-danger"},"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.client):"",r.a.createElement("li",{className:"text-danger"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u041a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.phone),r.a.createElement("li",{className:"text-danger"},"\u0414\u0430\u0442\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},e.dateFrom)),r.a.createElement("li",{className:"text-danger"},"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: \u0421 ",r.a.createElement(re.a,{format:"HH:mm"},e.dateFrom)," \u041f\u041e ",r.a.createElement(re.a,{format:"HH:mm"},e.completedAt)),e.phone2?r.a.createElement("li",{className:"text-danger"},"\u0414\u0440\u0443\u0433\u043e\u0439 \u043d\u043e\u043c\u0435\u0440: ",e.phone2):"",r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u0440\u0435\u0441: ",e.address),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430: ",e.comment?e.comment:"--"),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430: ",e.disinfectorComment?e.disinfectorComment:"--"),r.a.createElement("li",null,"\u0424\u043e\u0440\u043c\u0430 \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0417\u0430\u043a\u0430\u0437\u0430 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.completedAt))),r.a.createElement(u.b,{to:"/accountant/order-confirm/".concat(e._id),className:"btn btn-dark"},r.a.createElement("i",{className:"fab fa-wpforms"})," \u0424\u043e\u0440\u043c\u0430 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f"))))});return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("form",{onSubmit:this.getMonthStats,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u0417\u0430\u043f\u0440\u043e\u0441\u044b \u043f\u043e \u043c\u0435\u0441\u044f\u0446\u0430\u043c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"year"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0413\u043e\u0434:")),r.a.createElement("select",{name:"year",className:"form-control",onChange:this.onChange,required:!0},n)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"month"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041c\u0435\u0441\u044f\u0446:")),r.a.createElement("select",{name:"month",className:"form-control",onChange:this.onChange,required:!0},l)),r.a.createElement("button",{type:"submit",className:"btn btn-success mr-1 mt-1"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"),r.a.createElement("button",{type:"button",className:"btn btn-danger mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("current")}},"\u042d\u0442\u043e\u0442 \u043c\u0435\u0441\u044f\u0446"),r.a.createElement("button",{type:"button",className:"btn btn-primary mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("previous")}},"\u041f\u0440\u043e\u0448\u043b\u044b\u0439 \u043c\u0435\u0441\u044f\u0446"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("form",{onSubmit:this.getDayStats,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u0417\u0430\u043f\u0440\u043e\u0441\u044b \u043f\u043e \u0434\u043d\u044f\u043c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"day"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0414\u0435\u043d\u044c:")),r.a.createElement("input",{type:"date",name:"day",className:"form-control",onChange:this.onChange,required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 weekly-stats mt-3"},r.a.createElement("div",{className:"SelectedWeekExample form-bg font-weight-bold"},r.a.createElement("h4",{className:"text-center"},"\u0417\u0430\u043f\u0440\u043e\u0441\u044b \u043f\u043e \u043d\u0435\u0434\u0435\u043b\u044f\u043c"),r.a.createElement(dt.a,{selectedDays:o,showWeekNumbers:!0,showOutsideDays:!0,modifiers:m,firstDayOfWeek:1,onDayClick:this.handleDayChange,onDayMouseEnter:this.handleDayEnter,onDayMouseLeave:this.handleDayLeave,onWeekClick:this.handleWeekClick})))),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-12"},"week"===this.state.type?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0417\u0430\u043f\u0440\u043e\u0441\u044b \u0437\u0430 \u043d\u0435\u0434\u0435\u043b\u044e ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[0])," - ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[6])):"","month"===this.state.type?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0417\u0430\u043f\u0440\u043e\u0441\u044b \u0437\u0430 \u043c\u0435\u0441\u044f\u0446 ",Ke.a[this.state.headingMonth],", ",this.state.headingYear):"","day"===this.state.type?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0417\u0430\u043f\u0440\u043e\u0441\u044b \u0437\u0430 \u0434\u0435\u043d\u044c ",this.state.headingDay):"")),r.a.createElement("div",{className:"row m-0"},r.a.createElement("div",{className:"col-12 p-0"},this.props.accountant.loadingQueries?r.a.createElement(me,null):r.a.createElement("div",{className:"row mt-3"},this.state.type?r.a.createElement(r.a.Fragment,null,0===d.length?r.a.createElement("h2",{className:"m-auto"},"\u0417\u0430\u043f\u0440\u043e\u0441\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"):p):""))))}}]),t}(n.Component),cr=Object(S.b)(function(e){return{auth:e.auth,accountant:e.accountant,errors:e.errors}},{getAccountantQueries:function(e){return function(t){t(ar(e)),t(nr()),g.a.post("/accountant/get-queries",{object:e}).then(function(e){return t({type:"GET_ACC_QUERIES",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}}})(Object(p.g)(lr)),sr=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={query:{disinfectorId:{},userCreated:{},clientId:{contracts:[]},userAcceptedOrder:{},disinfectors:[],prevFailedOrder:{},nextOrdersAfterFailArray:[],nextOrderAfterFail:{}},invoice:"",cost:""},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.confirmQueryFromCorporateClient=function(e){if(e.preventDefault(),Number(a.state.cost)<=0)alert("\u0421\u0443\u043c\u043c\u0430 \u0437\u0430\u043a\u0430\u0437\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043d\u0443\u043b\u0435\u043c \u0438\u043b\u0438 \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u0447\u0438\u0441\u043b\u043e\u043c");else{var t={decision:"confirm",clientType:a.state.query.clientType,paymentMethod:a.state.query.paymentMethod,orderId:a.state.query._id,invoice:a.state.invoice,cost:Number(a.state.cost),disinfectors:a.state.query.disinfectors};a.props.accountantConfirmQuery(t,a.props.history)}},a.confirmQueryFromIndividualClient=function(){var e={clientType:a.state.query.clientType,paymentMethod:a.state.query.paymentMethod,orderId:a.state.query._id,decision:"confirm"};a.props.accountantConfirmQuery(e,a.props.history)},a.reject=function(){var e={decision:"reject",clientType:a.state.query.clientType,paymentMethod:a.state.query.paymentMethod,orderId:a.state.query._id,disinfectors:a.state.query.disinfectors};a.props.accountantConfirmQuery(e,a.props.history)},a.returnBack=function(){var e={decision:"back",clientType:a.state.query.clientType,paymentMethod:a.state.query.paymentMethod,orderId:a.state.query._id,disinfectors:a.state.query.disinfectors};a.props.accountantConfirmQuery(e,a.props.history)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getCompleteOrderById(this.props.match.params.id)}},{key:"componentWillReceiveProps",value:function(e){e.accountant.queryById&&this.setState({query:e.accountant.queryById})}},{key:"render",value:function(){var e=this,t=this.state.query,a=[];t.disinfectors&&t.disinfectors.forEach(function(e){a.push({user:e.user,consumption:e.consumption})});var n=a.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("p",{className:"mb-0"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c: ",e.user.occupation," ",e.user.name),e.consumption.map(function(e,t){return r.a.createElement("p",{key:t,className:"mb-0"},e.material,": ",e.amount.toLocaleString()," ",e.unit)}))});return console.log("order",t),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row m-0"},r.a.createElement("div",{className:"col-12 p-0"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-6 col-md-7"},this.props.accountant.loadingQueries?r.a.createElement(me,null):r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},t.prevFailedOrder&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),t.failed&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),t.disinfectorId&&r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439: ",t.disinfectorId.occupation," ",t.disinfectorId.name),t.failed&&t.nextOrdersAfterFailArray&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-primary"},"\u041f\u043e\u0432\u0442\u043e\u0440\u043e\u0432 \u0443 \u044d\u0442\u043e\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430: ",t.nextOrdersAfterFailArray.length),t.nextOrdersAfterFailArray.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-primary"},"\u0412\u0440\u0435\u043c\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.nextOrdersAfterFailArray[t.nextOrdersAfterFailArray.length-1].dateFrom)),r.a.createElement("li",{className:"text-primary"},"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0437\u0430\u043a\u0430\u0437: ",t.nextOrdersAfterFailArray[t.nextOrdersAfterFailArray.length-1].disinfectorId.occupation," ",t.nextOrdersAfterFailArray[t.nextOrdersAfterFailArray.length-1].disinfectorId.name))),t.operatorDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),t.operatorConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.operatorCheckedAt),")"),r.a.createElement("li",null,"\u0411\u0430\u043b\u043b (0-5): ",t.score),r.a.createElement("li",null,"\u041e\u0442\u0437\u044b\u0432 \u041a\u043b\u0438\u0435\u043d\u0442\u0430: ",t.clientReview?t.clientReview:"\u041d\u0435\u0442 \u041e\u0442\u0437\u044b\u0432\u0430")):r.a.createElement("li",{className:"text-danger"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.operatorCheckedAt),")")):r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),"corporate"===t.clientType?r.a.createElement(r.a.Fragment,null,t.clientId?r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",t.clientId.name):r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442"),r.a.createElement("li",{className:"text-danger"},"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",t.client)):"","individual"===t.clientType?r.a.createElement("li",{className:"text-danger"},"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",t.client):"",r.a.createElement("li",{className:"text-danger"},"\u0414\u0430\u0442\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},t.dateFrom)),r.a.createElement("li",{className:"text-danger"},"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: \u0421 ",r.a.createElement(re.a,{format:"HH:mm"},t.dateFrom)," \u041f\u041e ",r.a.createElement(re.a,{format:"HH:mm"},t.completedAt)),r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u0440\u0435\u0441: ",t.address),r.a.createElement("li",null,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",t.phone),""!==t.phone2?r.a.createElement("li",null,"\u0417\u0430\u043f\u0430\u0441\u043d\u043e\u0439 \u043d\u043e\u043c\u0435\u0440: ",t.phone2):"",r.a.createElement("li",null,"\u0422\u0438\u043f \u0443\u0441\u043b\u0443\u0433\u0438: ",t.typeOfService),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430: ",t.comment?t.comment:"--"),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430: ",t.disinfectorComment?t.disinfectorComment:"--"),r.a.createElement("li",null,"\u0421\u0440\u043e\u043a \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0438 (\u0432 \u043c\u0435\u0441\u044f\u0446\u0430\u0445): ",t.guarantee),r.a.createElement("li",null,"\u0420\u0430\u0441\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 (\u0437\u0430\u043a\u0430\u0437 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u043b\u0438 ",t.disinfectors.length," \u0447\u0435\u043b):"),r.a.createElement("ul",{className:"font-bold mb-0"},n),"corporate"===t.clientType?r.a.createElement(r.a.Fragment,null,"cash"===t.paymentMethod?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u041d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),t.cost&&r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",t.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(t.cost/t.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u0411\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),r.a.createElement("li",null,"\u041d\u043e\u043c\u0435\u0440 \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430: ",t.contractNumber||"--"))):"","individual"===t.clientType?r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",t.cost.toLocaleString()," \u0421\u0443\u043c (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(t.cost/t.disinfectors.length).toFixed(2).toLocaleString()," \u0421\u0443\u043c)"):"",t.userAcceptedOrder?r.a.createElement("li",null,"\u0417\u0430\u043a\u0430\u0437 \u043f\u0440\u0438\u043d\u044f\u043b: ",t.userAcceptedOrder.occupation," ",t.userAcceptedOrder.name):"",t.userCreated?r.a.createElement("li",null,"\u0417\u0430\u043a\u0430\u0437 \u0434\u043e\u0431\u0430\u0432\u0438\u043b: ",t.userCreated.occupation," ",t.userCreated.name):"",r.a.createElement("li",null,"\u0424\u043e\u0440\u043c\u0430 \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0417\u0430\u043a\u0430\u0437\u0430 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.completedAt))),"individual"===t.clientType||"cash"===t.paymentMethod?r.a.createElement("div",{className:"btn-group mt-3"},r.a.createElement("button",{className:"btn btn-success mr-2",onClick:function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437?")&&e.confirmQueryFromIndividualClient()}},r.a.createElement("i",{className:"fas fa-check-square"})," \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c")):"",r.a.createElement("div",{className:"btn-group mt-3"},r.a.createElement("button",{className:"btn btn-danger mr-2",onClick:function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437?")&&e.reject()}},r.a.createElement("i",{className:"fas fa-ban"})," \u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0417\u0430\u043a\u0430\u0437\u0430")),r.a.createElement("div",{className:"btn-group mt-3"},r.a.createElement("button",{className:"btn btn-dark mr-2",onClick:function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437 \u043e\u0431\u0440\u0430\u0442\u043d\u043e \u0434\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0443?")&&e.returnBack()}},r.a.createElement("i",{className:"fas fa-undo"})," \u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u041e\u0431\u0440\u0430\u0442\u043d\u043e")),r.a.createElement(da,{order:t,shouldLoadOrder:!0})))),"corporate"===t.clientType&&"cash"!==t.paymentMethod&&r.a.createElement("div",{className:"col-lg-6 col-md-5 mx-auto"},r.a.createElement("div",{className:"card mt-3 mb-3"},r.a.createElement("div",{className:"card-body p-2"},r.a.createElement("h3",{className:"text-center"},"\u0424\u043e\u0440\u043c\u0430 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f \u0417\u0430\u043a\u0430\u0437\u0430"),r.a.createElement("form",{onSubmit:this.confirmQueryFromCorporateClient},r.a.createElement(Tt,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0421\u0447\u0435\u0442-\u0424\u0430\u043a\u0442\u0443\u0440\u0443:",type:"text",name:"invoice",value:this.state.invoice,onChange:this.onChange,required:!0}),r.a.createElement(Tt,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0443\u043c\u043c\u0443 \u0437\u0430\u043a\u0430\u0437\u0430 (\u0432 \u0441\u0443\u043c\u0430\u0445):",type:"number",step:"1",name:"cost",value:this.state.cost,onChange:this.onChange,required:!0}),r.a.createElement("button",{className:"btn btn-success btn-block"},r.a.createElement("i",{className:"fas fa-check-square"})," \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0417\u0430\u043a\u0430\u0437\u0430")))))))))}}]),t}(n.Component),or=Object(S.b)(function(e){return{auth:e.auth,accountant:e.accountant,errors:e.errors}},{getCompleteOrderById:function(e){return function(t){t(nr()),g.a.post("/accountant/get-query-by-id",{id:e}).then(function(e){return t({type:"GET_ACC_QUERY_BY_ID",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}},accountantConfirmQuery:function(e,t){return function(a){a(tr(e.orderId)),g.a.post("/accountant/confirm-query",{object:e}).then(function(){return t.push("/accountant/queries")}).catch(function(e){return a({type:y,payload:e})})}}})(Object(p.g)(sr)),ir=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={orders:a.props.accountant.stats.orders},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=et(this.state.orders),t=e.totalSum,a=e.totalScore,n=e.totalOrders,l=e.completed,c=e.confirmedOrders,s=e.rejected,o=e.consultAndOsmotrConfirmed,i=e.failed,m=e.povtors,d=this.state.orders.filter(function(e){return e.completed&&!e.failed&&!e.hasOwnProperty("prevFailedOrder")}),u=nt(d),p=(u=ze(u)).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)});return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h4",{className:"text-center"},"\u0417\u0430\u043a\u0430\u0437\u044b \u043a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("li",null,"\u0412\u0441\u0435\u0433\u043e \u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043e \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",n),r.a.createElement("li",null,"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",l),r.a.createElement("li",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043e \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",c.length," (\u0438\u0437 \u043d\u0438\u0445 \u041a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u0438 \u0438 \u041e\u0441\u043c\u043e\u0442\u0440\u044b: ",o,")"),r.a.createElement("li",{className:"pt-2"},"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",t.toLocaleString()," UZS"),r.a.createElement("li",{className:"pb-2"},"\u0421\u0440\u0435\u0434\u043d\u0438\u0439 \u0431\u0430\u043b\u043b: ",(a/c.length).toFixed(2)," (\u0438\u0437 5)"),r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0440\u0433\u043d\u0443\u0442\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",s),r.a.createElement("li",null,"\u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",i),r.a.createElement("li",null,"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b: ",m),r.a.createElement("h6",{className:"mt-2"},"* \u043d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b \u043d\u0435 \u0432\u0445\u043e\u0434\u044f\u0442 \u0432 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b \u0438 \u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443"))))),r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h4",{className:"text-center"},"\u041e\u0431\u0449\u0438\u0439 \u0420\u0430\u0441\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u042d\u0442\u0438\u0445 \u0417\u0430\u043a\u0430\u0437\u043e\u0432"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},p,r.a.createElement("h6",{className:"mt-2"},"* \u0441\u044e\u0434\u0430 \u043d\u0435 \u0432\u0445\u043e\u0434\u044f\u0442 \u043d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b"))))))}}]),t}(n.Component),mr=Object(S.b)(function(e){return{auth:e.auth,accountant:e.accountant,errors:e.errors}})(Object(p.g)(ir)),dr=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={month:"",year:"",day:"",headingMonth:"",headingYear:"",headingDay:"",hoverRange:void 0,selectedDays:[]},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.getMonthStats=function(e){e.preventDefault();var t={accountantId:a.props.auth.user.id,type:"month",month:a.state.month,year:a.state.year};a.props.getAccStats(t),a.setState({headingMonth:a.state.month,headingYear:a.state.year})},a.getSpecificMonthStats=function(e){var t=Je(e),n=t.month,r=t.year,l={accountantId:a.props.auth.user.id,type:"month",month:n,year:r};a.props.getAccStats(l),a.setState({headingMonth:n,headingYear:r})},a.getDayStats=function(e){e.preventDefault();var t={accountantId:a.props.auth.user.id,type:"day",day:a.state.day};a.props.getAccStats(t),a.setState({headingDay:a.state.day.split("-").reverse().join("-")})},a.handleDayChange=function(e){var t={accountantId:a.props.auth.user.id,type:"week",days:ot(it(e).from)};a.props.getAccStats(t),a.setState({selectedDays:ot(it(e).from)})},a.handleDayEnter=function(e){a.setState({hoverRange:it(e)})},a.handleDayLeave=function(){a.setState({hoverRange:void 0})},a.handleWeekClick=function(e,t,n){var r={accountantId:a.props.auth.user.id,type:"week",days:ot(it(t[0]).from)};a.props.getAccStats(r),a.setState({selectedDays:ot(it(t[0]).from)})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.props.clearStats()}},{key:"render",value:function(){var e=this,t=Ve(),a=t.monthLabels,n=t.yearLabels.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),l=a.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),c=this.state,s=c.hoverRange,o=c.selectedDays,i=o.length>0,m={hoverRange:s,selectedRange:i&&{from:o[0],to:o[6]},hoverRangeStart:s&&s.from,hoverRangeEnd:s&&s.to,selectedRangeStart:i&&o[0],selectedRangeEnd:i&&o[6]};return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("form",{onSubmit:this.getMonthStats,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u043c\u0435\u0441\u044f\u0446\u0430\u043c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"year"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0413\u043e\u0434:")),r.a.createElement("select",{name:"year",className:"form-control",onChange:this.onChange,required:!0},n)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"month"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041c\u0435\u0441\u044f\u0446:")),r.a.createElement("select",{name:"month",className:"form-control",onChange:this.onChange,required:!0},l)),r.a.createElement("button",{type:"submit",className:"btn btn-success mr-1 mt-1"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"),r.a.createElement("button",{type:"button",className:"btn btn-danger mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("current")}},"\u042d\u0442\u043e\u0442 \u043c\u0435\u0441\u044f\u0446"),r.a.createElement("button",{type:"button",className:"btn btn-primary mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("previous")}},"\u041f\u0440\u043e\u0448\u043b\u044b\u0439 \u043c\u0435\u0441\u044f\u0446"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("form",{onSubmit:this.getDayStats,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u0434\u043d\u044f\u043c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"day"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0414\u0435\u043d\u044c:")),r.a.createElement("input",{type:"date",name:"day",className:"form-control",onChange:this.onChange,required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3 weekly-stats"},r.a.createElement("div",{className:"SelectedWeekExample form-bg font-weight-bold"},r.a.createElement("h4",{className:"text-center"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u043d\u0435\u0434\u0435\u043b\u044f\u043c"),r.a.createElement(dt.a,{selectedDays:o,showWeekNumbers:!0,showOutsideDays:!0,modifiers:m,firstDayOfWeek:1,onDayClick:this.handleDayChange,onDayMouseEnter:this.handleDayEnter,onDayMouseLeave:this.handleDayLeave,onWeekClick:this.handleWeekClick})))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},"week"===this.props.accountant.stats.method?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u041d\u0435\u0434\u0435\u043b\u044c\u043d\u0430\u044f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0437\u0430 ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[0])," - ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[6])):"","month"===this.props.accountant.stats.method?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u041c\u0435\u0441\u044f\u0447\u043d\u0430\u044f \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0437\u0430 ",Ke.a[this.state.headingMonth],", ",this.state.headingYear):"","day"===this.props.accountant.stats.method?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u0414\u043d\u0435\u0432\u043d\u0430\u044f \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0437\u0430 ",this.state.headingDay):"")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},this.props.accountant.loadingStats?r.a.createElement(me,null):r.a.createElement(mr,null))))}}]),t}(n.Component),ur=Object(S.b)(function(e){return{auth:e.auth,accountant:e.accountant,errors:e.errors}},{getAccStats:function(e){return function(t){t(rr()),g.a.post("/accountant/get-stats",{object:e}).then(function(e){return t({type:"GET_ACC_STATS",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}},clearStats:function(){return{type:"ACC_CLEAR_STATS"}}})(Object(p.g)(dr)),pr=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getOrderById(this.props.match.params.id)}},{key:"render",value:function(){var e=this.props.order.orderById,t=[];e.disinfectors.forEach(function(e){t.push({user:e.user,consumption:e.consumption})});var a=t.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("p",{className:"mb-0"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c: ",e.user.occupation," ",e.user.name),e.consumption.map(function(e,t){return r.a.createElement("p",{key:t,className:"mb-0"},e.material,": ",e.amount.toLocaleString()," ",e.unit)}))});return r.a.createElement("div",{className:"container"},this.props.order.loading?r.a.createElement(me,null):r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center"},"\u0414\u0435\u0442\u0430\u043b\u0438 \u0417\u0430\u043a\u0430\u0437\u0430")),r.a.createElement("div",{className:"col-lg-8 col-md-10 m-auto"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},e.prevFailedOrder&&r.a.createElement("h3",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"})),e.failed&&r.a.createElement("h3",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"})),e.disinfectorId&&r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439: ",e.disinfectorId.occupation," ",e.disinfectorId.name),e.operatorDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.operatorConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.operatorCheckedAt),")"),r.a.createElement("li",null,"\u0411\u0430\u043b\u043b (0-5): ",e.score),r.a.createElement("li",null,"\u041e\u0442\u0437\u044b\u0432 \u041a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.clientReview?e.clientReview:"\u041d\u0435\u0442 \u041e\u0442\u0437\u044b\u0432\u0430")):r.a.createElement("li",{className:"text-danger"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.operatorCheckedAt),")")):r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.accountantDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.accountantConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.accountantCheckedAt),")"),r.a.createElement("li",null,"\u0421\u0447\u0435\u0442-\u0424\u0430\u043a\u0442\u0443\u0440\u0430: ",e.invoice?e.invoice:"--"),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement("li",{className:"text-danger"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.accountantCheckedAt),")")):r.a.createElement(r.a.Fragment,null,e.adminDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0410\u0434\u043c\u0438\u043d \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.adminConfirmed?r.a.createElement("li",{className:"text-success"},"\u0410\u0434\u043c\u0438\u043d \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.adminCheckedAt),")"):r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u043c\u0438\u043d \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.adminCheckedAt),")")):r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443")),"corporate"===e.clientType?r.a.createElement(r.a.Fragment,null,e.clientId?r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.clientId.name):r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442"),r.a.createElement("li",{className:"text-danger"},"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.client)):"","individual"===e.clientType?r.a.createElement("li",{className:"text-danger"},"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.client):"",r.a.createElement("li",{className:"text-danger"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u041a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.phone),e.phone2?r.a.createElement("li",null,"\u0414\u0440\u0443\u0433\u043e\u0439 \u043d\u043e\u043c\u0435\u0440: ",e.phone2):"",r.a.createElement("li",{className:"text-danger"},"\u0414\u0430\u0442\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},e.dateFrom)),r.a.createElement("li",{className:"text-danger"},"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: \u0421 ",r.a.createElement(re.a,{format:"HH:mm"},e.dateFrom)," \u041f\u041e ",r.a.createElement(re.a,{format:"HH:mm"},e.completedAt)),r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u0440\u0435\u0441: ",e.address),r.a.createElement("li",{className:"text-danger"},"\u0422\u0438\u043f \u0443\u0441\u043b\u0443\u0433\u0438: ",e.typeOfService),r.a.createElement("li",null,"\u0421\u0440\u043e\u043a \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0438 (\u0432 \u043c\u0435\u0441\u044f\u0446\u0430\u0445): ",e.guarantee),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430: ",e.comment?e.comment:"--"),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430: ",e.disinfectorComment?e.disinfectorComment:"--"),r.a.createElement("li",null,"\u0420\u0430\u0441\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 (\u0437\u0430\u043a\u0430\u0437 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u043b\u0438 ",e.disinfectors.length," \u0447\u0435\u043b):"),r.a.createElement("ul",{className:"font-bold mb-0"},a),"corporate"===e.clientType?r.a.createElement(r.a.Fragment,null,"cash"===e.paymentMethod?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u041d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),e.cost&&r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u0411\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),r.a.createElement("li",null,"\u041d\u043e\u043c\u0435\u0440 \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430: ",e.contractNumber))):"","individual"===e.clientType&&e.cost?r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)"):"",e.userAcceptedOrder?r.a.createElement("li",null,"\u0417\u0430\u043a\u0430\u0437 \u043f\u0440\u0438\u043d\u044f\u043b: ",e.userAcceptedOrder.occupation," ",e.userAcceptedOrder.name):"",e.userCreated?r.a.createElement("li",null,"\u0417\u0430\u043a\u0430\u0437 \u0434\u043e\u0431\u0430\u0432\u0438\u043b: ",e.userCreated.occupation," ",e.userCreated.name," (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.createdAt),")"):"",r.a.createElement("li",null,"\u0424\u043e\u0440\u043c\u0430 \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0417\u0430\u043a\u0430\u0437\u0430 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.completedAt))))))))}}]),t}(n.Component),hr=Object(S.b)(function(e){return{auth:e.auth,order:e.order,errors:e.errors}},{getOrderById:xe})(Object(p.g)(pr)),Er=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).deleteOrderFunc=function(e){var t="";"corporate"===e.clientType&&e.clientId&&(t=e.clientId._id);var n={id:e._id,clientType:e.clientType,clientPhone:e.phone,clientId:t,orderDateFrom:e.dateFrom};a.props.deleteOrder(n,a.props.history,"not-completed-orders")},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getNotCompOrders()}},{key:"render",value:function(){var e=this,t=this.props.operator.sortedOrders.sort(function(e,t){return new Date(e.dateFrom)-new Date(t.dateFrom)}).map(function(t,a){return r.a.createElement("div",{className:"col-lg-4 col-md-6 col-sm-6 mt-2",key:a},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold list-unstyled mb-0"},t.disinfectorId&&r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439: ",t.disinfectorId.occupation," ",t.disinfectorId.name),r.a.createElement("li",null,"\u0414\u0430\u0442\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.dateFrom)),"corporate"===t.clientType?r.a.createElement(r.a.Fragment,null,t.clientId?r.a.createElement("li",null,"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",t.clientId.name):r.a.createElement("li",null,"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442"),r.a.createElement("li",null,"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",t.client)):"","individual"===t.clientType?r.a.createElement("li",null,"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",t.client):"",r.a.createElement("li",null,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",t.phone),""!==t.phone2?r.a.createElement("li",null,"\u0417\u0430\u043f\u0430\u0441\u043d\u043e\u0439 \u043d\u043e\u043c\u0435\u0440: ",t.phone2):"",r.a.createElement("li",null,"\u0410\u0434\u0440\u0435\u0441: ",t.address),r.a.createElement("li",null,"\u0422\u0438\u043f \u0437\u0430\u043a\u0430\u0437\u0430: ",t.typeOfService),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{className:"btn btn-danger mt-1",onClick:function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?")&&e.deleteOrderFunc(t)}},r.a.createElement("i",{className:"fas fa-trash-alt"})," \u0423\u0434\u0430\u043b\u0438\u0442\u044c"))))))});return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row m-0"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center"},"\u041d\u0435\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b"))),this.props.operator.loadingSortedOrders?r.a.createElement(me,null):r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row"},t))))}}]),t}(n.Component),fr=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,operator:e.operator,errors:e.errors}},{getNotCompOrders:function(){return function(e){e(kn()),g.a.post("/operator/get-not-comp-orders").then(function(t){return e({type:"GET_NOT_COMPLETED_ORDERS",payload:t.data})}).catch(function(t){return e({type:y,payload:t})})}},deleteOrder:Ye})(Object(p.g)(Er)),gr=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={phone:"",address:"",contractNumber:"",method:"",headingText:"",orders:[]},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.searchByAddress=function(e){e.preventDefault(),a.setState({method:"address",headingText:a.state.address});var t={method:"address",payload:a.state.address};a.props.searchOrders(t)},a.searchByPhone=function(e){e.preventDefault(),a.setState({method:"phone",headingText:a.state.phone});var t={method:"phone",payload:a.state.phone};a.props.searchOrders(t)},a.searchByContract=function(e){e.preventDefault(),a.setState({method:"contract",headingText:a.state.contractNumber});var t={method:"contract",payload:a.state.contractNumber};a.props.searchOrders(t)},a.adminConfirm=function(e,t,n){var r={orderId:e,response:t,disinfectors:n};a.props.adminConfirmsOrderQuery(r,a.props.history)},a.deleteOrder=function(e,t,n,r,l){var c={id:e,clientType:t,clientPhone:n,clientId:r,orderDateFrom:l};a.props.deleteOrder(c,a.props.history,a.props.auth.user.occupation),window.location.reload()},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.order.orders&&this.props.order.orders.length>0&&this.setState({orders:this.props.order.orders,method:this.props.order.searchOrderMethod,headingText:this.props.order.searchOrderInput})}},{key:"componentWillReceiveProps",value:function(e){this.setState({orders:e.order.orders})}},{key:"render",value:function(){var e=this;console.log("orders",this.state.orders);var t=this.state.orders.map(function(t,a){var n=[];return t.disinfectors.forEach(function(e){n.push({user:e.user,consumption:e.consumption})}),r.a.createElement("div",{className:"col-lg-4 col-md-6",key:a},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},t.prevFailedOrder&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),t.failed&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),t.disinfectorId&&r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439: ",t.disinfectorId.occupation," ",t.disinfectorId.name),!t.completed&&r.a.createElement("li",null,"\u0417\u0430\u043a\u0430\u0437 \u0435\u0449\u0435 \u041d\u0435 \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"),t.completed&&t.operatorDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),t.operatorConfirmed?r.a.createElement("li",{className:"text-success"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b \u0437\u0430\u044f\u043a\u0443 (\u0432\u0440\u0435\u043c\u044f: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.operatorCheckedAt),")"):r.a.createElement("li",{className:"text-danger"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u043e\u0442\u0432\u0435\u0440\u0433 \u0437\u0430\u044f\u043a\u0443 (\u0432\u0440\u0435\u043c\u044f: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.operatorCheckedAt),")"),r.a.createElement("li",null,"\u0411\u0430\u043b\u043b: ",t.score),r.a.createElement("li",null,"\u041e\u0442\u0437\u044b\u0432 \u041a\u043b\u0438\u0435\u043d\u0442\u0430: ",t.clientReview)):r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),t.accountantDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),t.accountantConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.accountantCheckedAt),")"),r.a.createElement("li",null,"\u0421\u0447\u0435\u0442-\u0424\u0430\u043a\u0442\u0443\u0440\u0430: ",t.invoice?t.invoice:"--"),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",t.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(t.cost/t.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement("li",{className:"text-danger"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.accountantCheckedAt),")")):r.a.createElement(r.a.Fragment,null,t.adminDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0410\u0434\u043c\u0438\u043d \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),t.adminConfirmed?r.a.createElement("li",{className:"text-success"},"\u0410\u0434\u043c\u0438\u043d \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.adminCheckedAt),")"):r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u043c\u0438\u043d \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},t.adminCheckedAt),")")):r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443")),"corporate"===t.clientType?r.a.createElement(r.a.Fragment,null,t.clientId?r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",t.clientId.name):r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442"),r.a.createElement("li",{className:"text-danger"},"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",t.client)):"","individual"===t.clientType?r.a.createElement("li",{className:"text-danger"},"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",t.client):"",r.a.createElement("li",{className:"text-danger"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d: ",t.phone),t.phone2&&""!==t.phone2?r.a.createElement("li",{className:"text-danger"},"\u0417\u0430\u043f\u0430\u0441\u043d\u043e\u0439 \u043d\u043e\u043c\u0435\u0440: ",t.phone2):"",r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u0440\u0435\u0441: ",t.address),r.a.createElement("li",{className:"text-danger"},"\u0422\u0438\u043f \u0443\u0441\u043b\u0443\u0433\u0438: ",t.typeOfService),t.dateFrom?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0414\u0430\u0442\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},t.dateFrom)),t.completed?r.a.createElement("li",null,"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: \u0421 ",r.a.createElement(re.a,{format:"HH:mm"},t.dateFrom)," \u041f\u041e ",r.a.createElement(re.a,{format:"HH:mm"},t.completedAt)):r.a.createElement("li",null,"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: ",r.a.createElement(re.a,{format:"HH:mm"},t.dateFrom))):r.a.createElement("li",null,"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: --"),"corporate"===t.clientType?r.a.createElement("li",null,"\u041d\u043e\u043c\u0435\u0440 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: ",t.contractNumber?t.contractNumber:"--"):"",r.a.createElement("li",null,"\u0421\u0440\u043e\u043a \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0438 (\u0432 \u043c\u0435\u0441\u044f\u0446\u0430\u0445): ",t.guarantee),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438: ",t.comment?t.comment:"--"),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430: ",t.disinfectorComment?t.disinfectorComment:"--"),t.completed?r.a.createElement(u.b,{to:"/order-full-details/".concat(t._id),className:"btn btn-primary mt-3 mr-2"},r.a.createElement("i",{className:"fas fa-info"})," \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"):r.a.createElement(u.b,{to:"/order-details/".concat(t._id),className:"btn btn-primary mt-3 mr-2"},r.a.createElement("i",{className:"fas fa-info"})," \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"),"accountant"!==e.props.auth.user.occupation||!t.completed||t.accountantDecided||t.adminDecided?"":r.a.createElement(u.b,{to:"/accountant/order-confirm/".concat(t._id),className:"btn btn-dark mt-3 mr-2"},r.a.createElement("i",{className:"fab fa-wpforms"})," \u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f"),"operator"===e.props.auth.user.occupation&&t.completed&&!t.operatorDecided?r.a.createElement(u.b,{to:"/order-confirm/".concat(t._id),className:"btn btn-dark mt-3 mr-2"},r.a.createElement("i",{className:"fab fa-wpforms"})," \u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f"):"",r.a.createElement(da,{order:t,shouldLoadOrder:!0})))))});return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center"},"\u041f\u043e\u0438\u0441\u043a \u0437\u0430\u043a\u0430\u0437\u043e\u0432"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-2"},r.a.createElement("form",{onSubmit:this.searchByAddress,className:"form-bg p-1"},r.a.createElement("h4",{className:"text-center mb-0"},"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 ",r.a.createElement("i",{className:"fas fa-map-marker"})),r.a.createElement(Tt,{type:"text",placeholder:"\u0410\u0434\u0440\u0435\u0441",name:"address",value:this.state.address,onChange:this.onChange,required:!0}),r.a.createElement("button",{type:"submit",className:"btn btn-success"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-2"},r.a.createElement("form",{onSubmit:this.searchByPhone,className:"form-bg p-1"},r.a.createElement("h4",{className:"text-center mb-0"},"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u043e\u043c\u0435\u0440\u0443 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 ",r.a.createElement("i",{className:"fas fa-phone"})),r.a.createElement(Tt,{type:"text",placeholder:"\u041d\u043e\u043c\u0435\u0440 \u0422\u0435\u043b\u0435\u0444\u043e\u043d\u0430",name:"phone",value:this.state.phone,onChange:this.onChange,required:!0}),r.a.createElement("button",{type:"submit",className:"btn btn-dark"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-2"},r.a.createElement("form",{onSubmit:this.searchByContract,className:"form-bg p-1"},r.a.createElement("h4",{className:"text-center mb-0"},"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u043e\u043c\u0435\u0440\u0443 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 ",r.a.createElement("i",{className:"fas fa-file-alt"})),r.a.createElement(Tt,{type:"text",placeholder:"\u041d\u043e\u043c\u0435\u0440 \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430",name:"contractNumber",value:this.state.contractNumber,onChange:this.onChange,required:!0}),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c")))),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-12"},"phone"===this.state.method&&r.a.createElement("h2",{className:"text-center"},'\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043f\u043e \u043d\u043e\u043c\u0435\u0440\u0443 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 "',this.state.headingText,'"'),"address"===this.state.method&&r.a.createElement("h2",{className:"text-center"},'\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 "',this.state.headingText,'"'),"contract"===this.state.method&&r.a.createElement("h2",{className:"text-center"},'\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043f\u043e \u043d\u043e\u043c\u0435\u0440\u0443 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 "',this.state.headingText,'"'))),this.props.order.loading?r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-12"},r.a.createElement(me,null))):r.a.createElement("div",{className:"row mt-3"},this.state.headingText.length>0&&0===this.props.order.orders.length?r.a.createElement("h2",{className:"m-auto"},"\u0417\u0430\u043a\u0430\u0437\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"):t))}}]),t}(n.Component),br=Object(S.b)(function(e){return{auth:e.auth,admin:e.admin,accountant:e.accountant,operator:e.operator,order:e.order,errors:e.errors}},{searchOrders:function(e){return function(t){t(Re()),t(Te(e)),g.a.post("/order/search-orders",{object:e}).then(function(e){return t({type:"SEARCH_ORDERS",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}},adminConfirmsOrderQuery:he,deleteOrder:Ye})(Object(p.g)(gr)),yr=function(){return function(e){e(Dr());g.a.post("/get-users",{object:{method:"all",roles:[]}}).then(function(t){return e({type:"GET_ALL_USERS",payload:t})}).catch(function(t){return e({type:y,payload:t})})}},vr=function(e){return function(t){t(Cr()),g.a.post("/chat/get-all-chats-of-user",{userId:e}).then(function(e){return t({type:"GET_ALL_CHATS",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}},Nr=function(e,t){return function(t){g.a.post("/chat/createChat",e).then(function(e){return t({type:"NEW_CHAT_CREATED",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}},Or=function(e){return function(t){t(Ar()),g.a.get("/chat/".concat(e)).then(function(e){return t({type:"GET_CURRENT_CHAT",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}},Sr=function(e,t){return function(a){g.a.post("/chat/delete-message",{chatId:e,messageId:t}).then(function(e){return a({type:"DELETE_MESSAGE",payload:e.data})}).catch(function(e){return a({type:y,payload:e})})}},Dr=function(){return{type:"SET_LOADING_USERS"}},Cr=function(){return{type:"SET_LOADING_CHATS"}},Ar=function(){return{type:"SET_LOADING_CURRENT_CHAT"}},Mr=function(){return{type:"SET_LOADING_ANONS"}},kr=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r))))._isMounted=!1,a.state={notHaveChatWith:a.props.chat.notHaveChatWith.filter(function(e){return e._id!==a.props.auth.user.id})},a.removeUserFromDOM=function(e){a._isMounted&&a.setState(function(t){return{notHaveChatWith:Object(j.a)(t.notHaveChatWith).filter(function(t){return t._id!==e._id.toString()})}})},a.onSubmit=function(e){e.preventDefault();var t={user1:a.props.auth.user.id,user2:e.target.children[0].defaultValue};a.props.createChat(t,a.props.history)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,Be()(Ge.a).on("createChat",function(t){e.props.auth.user.id===t.user1._id.toString()&&e.removeUserFromDOM(t.user2),e.props.auth.user.id===t.user2._id.toString()&&e.removeUserFromDOM(t.user1)})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state.notHaveChatWith.map(function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.occupation),r.a.createElement("td",null,r.a.createElement("form",{onSubmit:e.onSubmit},r.a.createElement("input",{type:"hidden",name:"userId",value:t._id}),r.a.createElement("button",{type:"submit",className:"btn btn-success"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0427\u0430\u0442"))))});return r.a.createElement(r.a.Fragment,null,this.state.notHaveChatWith.length>0?r.a.createElement("table",{className:"table table-striped table-hover"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u0418\u043c\u044f"),r.a.createElement("th",null,"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c"),r.a.createElement("th",null,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0427\u0430\u0442"))),r.a.createElement("tbody",null,t)):r.a.createElement("h2",null,"\u0423 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c \u0447\u0430\u0442\u044b \u0441\u043e \u0432\u0441\u0435\u043c\u0438 \u044e\u0437\u0435\u0440\u0430\u043c\u0438"))}}]),t}(n.Component),wr=Object(S.b)(function(e){return{auth:e.auth,order:e.order,chat:e.chat,errors:e.errors}},{getAllUsers:yr,createChat:Nr,getAllChatsOfUser:vr})(Object(p.g)(kr)),jr=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r))))._isMounted=!1,a.state={hasChatWith:a.props.chat.hasChatWith,myChats:a.props.chat.chats},a.addChatToDOM=function(e){a._isMounted&&a.setState(function(t){var a=Object(j.a)(t.myChats);return a.push(e),{myChats:a}})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,Be()(Ge.a).on("createChat",function(t){var a=e.props.auth.user.id;if(a===t.user1._id.toString()||a===t.user2._id.toString()){var n=t.chat;n.user1=t.user1,n.user2=t.user2,e.addChatToDOM(n)}})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state.myChats.map(function(t,a){return r.a.createElement("tr",{key:a},t.user1._id.toString()===e.props.auth.user.id?r.a.createElement(r.a.Fragment,null,r.a.createElement("td",null,t.user2.name),r.a.createElement("td",null,t.user2.occupation)):r.a.createElement(r.a.Fragment,null,r.a.createElement("td",null,t.user1.name),r.a.createElement("td",null,t.user1.occupation)),r.a.createElement("td",null,r.a.createElement(u.b,{to:"/chat/"+t._id,className:"btn btn-primary"},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u041a \u0427\u0430\u0442\u0443")))});return r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:"table table-striped table-hover table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u0418\u043c\u044f"),r.a.createElement("th",null,"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c"),r.a.createElement("th",null,"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0427\u0430\u0442"))),r.a.createElement("tbody",null,t)))}}]),t}(n.Component),Yr=Object(S.b)(function(e){return{auth:e.auth,order:e.order,chat:e.chat,errors:e.errors}},{getAllUsers:yr,createChat:Nr,getAllChatsOfUser:vr})(Object(p.g)(jr)),Ir=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getAllChatsOfUser(this.props.auth.user.id)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},this.props.chat.loadingChats?r.a.createElement(me,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:" text-center mt-3"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0427\u0430\u0442"),r.a.createElement("div",{className:"row"},r.a.createElement(wr,null)),r.a.createElement("h2",{className:"text-center mt-4"},"\u0412\u0430\u0448\u0438 \u0438\u043c\u0435\u044e\u0449\u0438\u0435\u0441\u044f \u0447\u0430\u0442\u044b"),r.a.createElement("div",{className:"row"},r.a.createElement(Yr,null)))))}}]),t}(n.Component),Fr=Object(S.b)(function(e){return{auth:e.auth,order:e.order,chat:e.chat,errors:e.errors}},{getAllUsers:yr,getAllChatsOfUser:vr})(Object(p.g)(Ir)),xr=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={content:""},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault();var t={chatId:a.props.chat.currentChat._id,fromId:a.props.auth.user.id,fromName:a.props.auth.user.name,body:a.state.content};a.props.createMessage(t),document.getElementById("create-message-input").value="",a.setState({content:""})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"create-message"},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",className:"form-control",id:"create-message-input",placeholder:"Type Message Here ...",name:"content",required:!0,onChange:this.onChange}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{type:"submit",className:"btn btn-success"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))))}}]),t}(n.Component),Tr=Object(S.b)(function(e){return{auth:e.auth,order:e.order,chat:e.chat,errors:e.errors}},{createMessage:function(e){return function(t){g.a.post("/chat/create-message",{object:e}).then(function(e){t({type:"CREATE_MESSAGE",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}}})(Object(p.g)(xr)),Rr=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r))))._isMounted=!1,a.state={messages:a.props.chat.currentChat.messages,showEdit:!1,editmessageid:"",editmessagebody:""},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.deleteClick=function(e){var t=a.props.match.params.chatId,n=e.target.value;a.props.deleteMessage(t,n)},a.editClick=function(e,t,n){if(a._isMounted)return a.setState({showEdit:!a.state.showEdit,editmessageid:e,editmessagebody:t})},a.onEditMessage=function(e){e.preventDefault();var t={chatId:a.props.match.params.chatId,messageId:a.state.editmessageid,updatedBody:a.state.editmessagebody};a.props.editMessage(t),a._isMounted&&a.setState({showEdit:!a.state.showEdit,editmessageid:"",editmessagebody:""})},a.updateDOMOnEditMessage=function(e,t){if(a._isMounted){for(var n=Object(j.a)(a.state.messages),r=0;r<n.length;r++)n[r]._id.toString()===e&&(n[r].body=t);a.setState({messages:n})}},a.addMessageToDOM=function(e){a._isMounted&&(a.setState(function(t){var a=Object(j.a)(t.messages);return a.push(e),{messages:a}}),window.scrollTo(0,document.getElementById("container-messages").scrollHeight))},a.deleteMessageFromDOM=function(e){a._isMounted&&a.setState(function(t){return{messages:Object(j.a)(t.messages).filter(function(t){return t._id!==e})}})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,window.scrollTo(0,document.getElementById("row-with-messages").scrollHeight),document.getElementById("navbar").classList.add("fixed-top");var t=Be()(Ge.a);t.on("createMessageInChat".concat(this.props.match.params.chatId),function(t){e.addMessageToDOM(t.message)}),t.on("editMessageInChat".concat(this.props.match.params.chatId),function(t){e.updateDOMOnEditMessage(t.messageId,t.updatedBody)}),t.on("deleteMessageInChat".concat(this.props.match.params.chatId),function(t){e.deleteMessageFromDOM(t.messageId)})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,document.getElementById("navbar").classList.remove("fixed-top")}},{key:"render",value:function(){var e=this,t=this.props.chat.currentChat,a=this.props.auth.user.id,n=this.state.messages.map(function(t,n){return r.a.createElement("div",{className:t.fromId===a?"my-message col-lg-6 col-md-8 col-10 ml-auto":"his-message col-lg-6 col-md-8 col-10",key:n},r.a.createElement("div",{className:"message-author"},r.a.createElement("p",{className:"mb-0"},t.fromName),t.fromId===a?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn btn-danger btn-sm pt-0 pb-0 ml-1 delete-message",onClick:e.deleteClick,value:t._id},"Delete"),r.a.createElement("button",{className:"btn btn-dark btn-sm pt-0 pb-0 edit-message",onClick:e.editClick.bind(e,t._id,t.body)},"Edit")):null),r.a.createElement("div",{className:"message-content"},r.a.createElement("p",{className:"mb-0"},t.body)),r.a.createElement("div",{className:"message-date"},r.a.createElement("p",{className:"mb-0"},st()(t.writtenAt).calendar())))});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center"},"\u0427\u0430\u0442 \u043c\u0435\u0436\u0434\u0443 ",t.user1.name," \u0438 ",t.user2.name))),r.a.createElement("div",{className:"row",id:"row-with-messages"},r.a.createElement("div",{className:"col-12"},n)),r.a.createElement("div",{className:"container-fluid message-form"},r.a.createElement("div",{className:"container pl-0 pr-0 mt-2 mb-3"},this.state.showEdit?r.a.createElement("div",{className:"edit-message"},r.a.createElement("form",{onSubmit:this.onEditMessage},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",className:"form-control",id:"edit-message-input",name:"editmessagebody",placeholder:"Type Message Here ...",defaultValue:this.state.editmessagebody,required:!0,onChange:this.onChange}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{type:"submit",className:"btn btn-warning"},"Edit"))))):r.a.createElement(Tr,null))))}}]),t}(n.Component),_r=Object(S.b)(function(e){return{auth:e.auth,order:e.order,chat:e.chat,errors:e.errors}},{getCurrentChat:Or,editMessage:function(e){return function(t){g.a.post("/chat/edit-message",{object:e}).then(function(e){return t({type:"EDIT_MESSAGE",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}},deleteMessage:Sr})(Object(p.g)(Rr)),Hr=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getCurrentChat(this.props.match.params.chatId)}},{key:"render",value:function(){var e=this.props.chat.loadingCurrentChat;return r.a.createElement("div",{className:"container-fluid",id:"container-messages"},e?r.a.createElement(me,null):r.a.createElement(_r,null))}}]),t}(n.Component),Lr=Object(S.b)(function(e){return{auth:e.auth,order:e.order,chat:e.chat,errors:e.errors}},{getCurrentChat:Or,deleteMessage:Sr})(Object(p.g)(Hr)),Br=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r))))._isMounted=!1,a.state={anons:a.props.chat.anons},a.addAnonsToDOM=function(e){a._isMounted&&a.setState(function(t){var a=Object(j.a)(t.anons);return a.push(e),{anons:a}})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,Be()(Ge.a).on("createAnons",function(t){e.addAnonsToDOM(t.anons)})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.state.anons.map(function(e,t){return r.a.createElement("div",{className:"anons mt-2",key:t},r.a.createElement("div",{className:"anons-author"},r.a.createElement("p",{className:"mb-0"},e.adminId.name)),r.a.createElement("div",{className:"anons-content"},r.a.createElement("p",{className:"mb-0"},e.body)),r.a.createElement("div",{className:"anons-date"},r.a.createElement("p",{className:"mb-0"},st()(e.writtenAt).calendar())))});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("h2",{className:"m-auto"},"\u041e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u044f \u0410\u0434\u043c\u0438\u043d\u0430")),r.a.createElement("div",{className:"row announcements mt-2"},r.a.createElement("div",{className:"col-md-8 m-auto"},e)))}}]),t}(n.Component),Ur=Object(S.b)(function(e){return{auth:e.auth,chat:e.chat,errors:e.errors}})(Object(p.g)(Br)),Gr=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={anons:""},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.createAd=function(e){e.preventDefault();var t={adminId:a.props.auth.user.id,body:a.state.anons};a.props.addAnons(t,a.props.history),a.setState({anons:""}),document.getElementById("close-modal").click()},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getAllAnons()}},{key:"render",value:function(){var e=this.props.chat.loadingAnons;return r.a.createElement(r.a.Fragment,null,"admin"===this.props.auth.user.occupation?r.a.createElement("div",{className:"container mt-2"},r.a.createElement("div",{className:"row m-0"},r.a.createElement("div",{className:"ads"},r.a.createElement("button",{type:"button",className:"btn btn-primary","data-toggle":"modal","data-target":"#createAnons"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u041e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435"),r.a.createElement("div",{className:"modal fade",id:"createAnons"},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h4",{className:"modal-title"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u041e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435"),r.a.createElement("button",{type:"button",className:"close",id:"close-modal","data-dismiss":"modal"},"\xd7")),r.a.createElement("form",{onSubmit:this.createAd},r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{className:"form-control",rows:"5",name:"anons",defaultValue:this.state.anons,placeholder:"\u041f\u0438\u0448\u0438\u0442\u0435 \u0412\u0430\u0448\u0435 \u041e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435 ...",required:!0,onChange:this.onChange}))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"submit",className:"btn btn-success"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))))))))):"",r.a.createElement("div",{className:"container"},e?r.a.createElement(me,null):r.a.createElement(Ur,null)))}}]),t}(n.Component),qr=Object(S.b)(function(e){return{auth:e.auth,chat:e.chat,errors:e.errors}},{getAllAnons:function(){return function(e){e(Mr()),g.a.post("/chat/get-all-anons").then(function(t){return e({type:"GET_ANONS",payload:t.data})}).catch(function(t){return e({type:y,payload:t})})}},addAnons:function(e,t){return function(t){g.a.post("/chat/create-announcement",{object:e}).then(function(e){return t({type:"ADD_ANONS",payload:e.data})}).catch(function(e){return t({type:y,payload:e})})}}})(Object(p.g)(Gr)),Qr=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).onChange=function(t){return e.setState(Object(Ze.a)({},t.target.name,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={name:e.state.name,email:e.state.email,phone:e.state.phone,occupation:e.state.occupation,color:e.state.color,password:e.state.password,password2:e.state.password2};e.props.registerUser(a,e.props.history)},e.state={name:"",email:"",phone:"",occupation:"",color:"",password:"",password2:"",errors:{}},e}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"container register mt-4"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h2",{className:"text-center"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0410\u043a\u043a\u0430\u0443\u043d\u0442"),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},r.a.createElement(Tt,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0418\u043c\u044f",type:"text",name:"name",value:this.state.name,onChange:this.onChange,error:e.name}),r.a.createElement(Tt,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 E-mail",name:"email",type:"email",value:this.state.email,onChange:this.onChange,error:e.email}),r.a.createElement(Tt,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",type:"phone",name:"phone",value:this.state.phone,onChange:this.onChange,error:e.phone}),r.a.createElement(Jt,{name:"occupation",value:this.state.occupation,onChange:this.onChange,error:e.occupation,options:[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f --",value:0},{label:"\u0410\u0434\u043c\u0438\u043d",value:"admin"},{label:"\u0421\u0443\u0431\u0430\u0434\u043c\u0438\u043d",value:"subadmin"},{label:"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440",value:"operator"},{label:"\u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440",value:"disinfector"},{label:"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440",value:"accountant"}]}),"disinfector"===this.state.occupation||"subadmin"===this.state.occupation?r.a.createElement(Jt,{name:"color",value:this.state.color,onChange:this.onChange,error:e.color,options:[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0446\u0432\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f (\u0434\u043b\u044f \u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044f) --",value:0},{label:"\u041a\u0440\u0430\u0441\u043d\u044b\u0439",value:"red"},{label:"\u0417\u0435\u043b\u0435\u043d\u044b\u0439",value:"green"},{label:"\u0421\u0438\u043d\u0438\u0439",value:"blue"},{label:"\u041e\u0440\u0430\u043d\u0436\u0435\u0432\u044b\u0439",value:"orange"},{label:"\u0416\u0435\u043b\u0442\u044b\u0439",value:"yellow"},{label:"\u0424\u0438\u043e\u043b\u0435\u0442\u043e\u0432\u044b\u0439",value:"violet"},{label:"\u041a\u043e\u0440\u0438\u0447\u043d\u0435\u0432\u044b\u0439",value:"brown"},{label:"\u0417\u043e\u043b\u043e\u0442\u043e\u0439",value:"gold"},{label:"\u0416\u0435\u043b\u0442\u043e-\u0437\u0435\u043b\u0435\u043d\u044b\u0439",value:"greenyellow"},{label:"\u0418\u043d\u0434\u0438\u0433\u043e",value:"indigo"},{label:"\u0421\u0432\u0435\u0442\u043b\u043e-\u0421\u0438\u043d\u0438\u0439",value:"lightsteelblue"},{label:"\u041e\u0440\u0445\u0438\u0434\u0435\u044f",value:"orchid"},{label:"\u0426\u0432\u0435\u0442 \u043c\u043e\u0440\u0441\u043a\u043e\u0439 \u0432\u043e\u043b\u043d\u044b",value:"seagreen"},{label:"\u0411\u0438\u0440\u044e\u0437\u043e\u0432\u044b\u0439",value:"turquoise"},{label:"\u0424\u043e\u0440\u0430",value:"bisque"},{label:"\u0421\u0438\u044f\u043d",value:"cyan"},{label:"DarkGoldenRod",value:"darkgoldenrod"}]}):"",r.a.createElement(Tt,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u041f\u0430\u0440\u043e\u043b\u044c",type:"password",name:"password",value:this.state.password,onChange:this.onChange,error:e.password}),r.a.createElement(Tt,{label:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u041f\u0430\u0440\u043e\u043b\u044c",type:"password",name:"password2",value:this.state.password2,onChange:this.onChange,error:e.password2}),r.a.createElement("button",{type:"submit",className:"btn btn-success btn-block mt-4"},r.a.createElement("i",{className:"fas fa-user-plus"})," \u0421\u043e\u0437\u0434\u0430\u0442\u044c")))))))}}]),t}(n.Component),Wr=Object(S.b)(function(e){return{auth:e.auth,errors:e.errors}},{registerUser:function(e,t){return function(a){g.a.post("/register",e).then(function(e){return t.push("/admin")}).catch(function(e){return a({type:y,payload:e.response.data})})}}})(Object(p.g)(Qr)),Pr=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).onChange=function(t){return e.setState(Object(Ze.a)({},t.target.name,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};e.props.loginUser(a,e.props.history)},e.state={email:"",password:"",errors:{}},e}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/".concat(this.props.auth.user.occupation))}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"container mt-3"},r.a.createElement("div",{className:"row p-0 m-0"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h1",{className:"text-center pb-4 pt-3"},r.a.createElement("span",{className:"text-primary"},r.a.createElement("i",{className:"fas fa-lock"})," Login")),r.a.createElement("form",{onSubmit:this.onSubmit,noValidate:!0},r.a.createElement(Tt,{label:"E-mail",type:"email",name:"email",value:this.state.email,onChange:this.onChange,error:e.email}),r.a.createElement(Tt,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",placeholder:"Password",name:"password",value:this.state.password,onChange:this.onChange,error:e.password}),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fas fa-sign-in-alt"})," Login")))))))}}]),t}(n.Component),Zr=Object(S.b)(function(e){return{auth:e.auth,errors:e.errors}},{loginUser:function(e,t){return function(a){g.a.post("/login",e).then(function(e){var n=e.data.token;localStorage.setItem("jwtToken",n),b(n);var r=E()(n);a(v(r)),t.push("/".concat(e.data.user.occupation))}).catch(function(e){return a({type:y,payload:e.response.data})})}}})(Object(p.g)(Pr)),Xr=a(37),Kr=a.n(Xr),Vr=a(59),Jr=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={date:"",timeFrom:"",disinfectorId:"",typeOfService:[],comment:"",errors:{}},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.onChangeTypes=function(e){var t=Object(j.a)(a.state.typeOfService);t.forEach(function(t){t.type===e.target.value&&(t.selected=e.target.checked)}),a.setState({typeOfService:t})},a.onSubmit=function(e){e.preventDefault();var t=a.state.date.split("-"),n=new Date("".concat(t[1],"-").concat(t[2],"-").concat(t[0]," ").concat(a.state.timeFrom)),r="",l=0;if(a.state.typeOfService.forEach(function(e){e.selected&&(1===++l?r+=e.type:r=r+","+e.type)}),0===l)alert("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u0437\u0430\u043a\u0430\u0437\u0430");else{var c={userOccupation:a.props.auth.user.occupation,failedOrder:a.props.fail.failedOrder,newOrder:{disinfectorId:a.state.disinfectorId,date:a.state.date,dateFrom:n,timeFrom:a.state.timeFrom,typeOfService:r,comment:a.state.comment,userCreated:a.props.auth.user.id}};a.props.createOrderAfterFail(c,a.props.history,a.props.auth.user.occupation)}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getAllUsers(),window.scrollTo({top:0}),this.props.location.state&&!this.props.location.state.state.shouldLoadOrder?this.props.setFailedOrder(this.props.location.state.state.order):this.props.getFailOrderById(this.props.match.params.id)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=[];if(Ht.a.forEach(function(e){t.push({type:e.value,selected:!1})}),e.fail.failedOrder){var a=[];e.fail.failedOrder.typeOfService&&(a=e.fail.failedOrder.typeOfService.split(",")),t.forEach(function(e){a.forEach(function(t){e.type===t.trim()&&(e.selected=!0)})}),this.setState({comment:e.fail.failedOrder.comment,typeOfService:t})}}},{key:"render",value:function(){var e=this,t=this.state.errors,a=this.props.fail.failedOrder,n=[];a.disinfectors.forEach(function(e){n.push({user:e.user,consumption:e.consumption})});var l=n.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("p",{className:"mb-0"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c: ",e.user.occupation," ",e.user.name),e.consumption.map(function(e,t){return r.a.createElement("p",{key:t,className:"mb-0"},e.material,": ",e.amount.toLocaleString()," ",e.unit)}))}),c=(this.props.order.loading?[]:this.props.order.allUsers).filter(function(e){return"disinfector"===e.occupation||"subadmin"===e.occupation}),s=[{label:"-- \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0434\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430 --",value:""}];c.forEach(function(e){return s.push({label:"".concat(e.name,", ").concat(e.occupation),value:e._id})});var o=this.state.typeOfService.map(function(t,a){return r.a.createElement("div",{className:"form-check",key:a},r.a.createElement("label",{className:"form-check-label"},t.selected?r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"checkbox",defaultChecked:"checked",className:"form-check-input",onChange:e.onChangeTypes,value:t.type}),t.type):r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"checkbox",className:"form-check-input",onChange:e.onChangeTypes,value:t.type}),t.type)))});return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center"},"\u041a\u043b\u0438\u0435\u043d\u0442 \u043d\u0435\u0434\u043e\u0432\u043e\u043b\u0435\u043d. \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0437\u0430\u043a\u0430\u0437"))),this.props.fail.loading?r.a.createElement(me,null):r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-md-6 col-sm-10 mt-3"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},a.prevFailedOrder&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),a.failed&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),a.disinfectorId?r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439: ",a.disinfectorId.occupation," ",a.disinfectorId.name):"",a.failed&&a.nextOrdersAfterFailArray&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-primary"},"\u041f\u043e\u0432\u0442\u043e\u0440\u043e\u0432 \u0443 \u044d\u0442\u043e\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430: ",a.nextOrdersAfterFailArray.length),a.nextOrdersAfterFailArray.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-primary"},"\u0412\u0440\u0435\u043c\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},a.nextOrdersAfterFailArray[a.nextOrdersAfterFailArray.length-1].dateFrom)),r.a.createElement("li",{className:"text-primary"},"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0437\u0430\u043a\u0430\u0437: ",a.nextOrdersAfterFailArray[a.nextOrdersAfterFailArray.length-1].disinfectorId.occupation," ",a.nextOrdersAfterFailArray[a.nextOrdersAfterFailArray.length-1].disinfectorId.name))),a.prevFailedOrder&&a.prevFailedOrder.disinfectorId&&r.a.createElement("li",{className:"text-primary"},"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0439 \u043d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},a.prevFailedOrder.dateFrom)," (",a.prevFailedOrder.disinfectorId.occupation," ",a.prevFailedOrder.disinfectorId.name,")"),a.completed?r.a.createElement("li",null,"\u0417\u0430\u043a\u0430\u0437 \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"):r.a.createElement("li",null,"\u0417\u0430\u043a\u0430\u0437 \u0435\u0449\u0435 \u041d\u0435 \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"),a.completed&&a.operatorDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),a.operatorConfirmed?r.a.createElement("li",{className:"text-success"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b \u0437\u0430\u044f\u043a\u0443 (\u0432\u0440\u0435\u043c\u044f: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},a.operatorCheckedAt),")"):r.a.createElement("li",{className:"text-danger"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u043e\u0442\u0432\u0435\u0440\u0433 \u0437\u0430\u044f\u043a\u0443 (\u0432\u0440\u0435\u043c\u044f: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},a.operatorCheckedAt),")"),r.a.createElement("li",null,"\u0411\u0430\u043b\u043b: ",a.score),r.a.createElement("li",null,"\u041e\u0442\u0437\u044b\u0432 \u041a\u043b\u0438\u0435\u043d\u0442\u0430: ",a.clientReview)):r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),a.accountantDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),a.accountantConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},a.accountantCheckedAt),")"),r.a.createElement("li",null,"\u0421\u0447\u0435\u0442-\u0424\u0430\u043a\u0442\u0443\u0440\u0430: ",a.invoice),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",a.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(a.cost/a.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement("li",{className:"text-danger"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},a.accountantCheckedAt),")")):r.a.createElement(r.a.Fragment,null,a.adminDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0410\u0434\u043c\u0438\u043d \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),a.adminConfirmed?r.a.createElement("li",{className:"text-success"},"\u0410\u0434\u043c\u0438\u043d \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},a.adminCheckedAt),")"):r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u043c\u0438\u043d \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},a.adminCheckedAt),")")):r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443")),"corporate"===a.clientType?r.a.createElement(r.a.Fragment,null,a.clientId?r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",a.clientId.name):r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442"),r.a.createElement("li",{className:"text-danger"},"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",a.client)):"","individual"===a.clientType?r.a.createElement("li",{className:"text-danger"},"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",a.client):"",r.a.createElement("li",{className:"text-danger"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u041a\u043b\u0438\u0435\u043d\u0442\u0430: ",a.phone),a.phone2?r.a.createElement("li",null,"\u0414\u0440\u0443\u0433\u043e\u0439 \u043d\u043e\u043c\u0435\u0440: ",a.phone2):"",r.a.createElement("li",{className:"text-danger"},"\u0414\u0430\u0442\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},a.dateFrom)),r.a.createElement("li",{className:"text-danger"},"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: \u0421 ",r.a.createElement(re.a,{format:"HH:mm"},a.dateFrom)," \u041f\u041e ",r.a.createElement(re.a,{format:"HH:mm"},a.completedAt)),r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u0440\u0435\u0441: ",a.address),r.a.createElement("li",{className:"text-danger"},"\u0422\u0438\u043f \u0443\u0441\u043b\u0443\u0433\u0438: ",a.typeOfService),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430: ",a.comment?a.comment:"--"),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430: ",a.disinfectorComment?a.disinfectorComment:"--"),r.a.createElement("li",null,"\u0421\u0440\u043e\u043a \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0438 (\u0432 \u043c\u0435\u0441\u044f\u0446\u0430\u0445): ",a.guarantee),r.a.createElement("li",null,"\u0420\u0430\u0441\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 (\u0437\u0430\u043a\u0430\u0437 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u043b\u0438 ",a.disinfectors.length," \u0447\u0435\u043b):"),r.a.createElement("ul",{className:"font-bold mb-0"},l),"corporate"===a.clientType?r.a.createElement(r.a.Fragment,null,"cash"===a.paymentMethod?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u041d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),a.cost&&r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",a.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(a.cost/a.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u0411\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),r.a.createElement("li",null,"\u041d\u043e\u043c\u0435\u0440 \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430: ",a.contractNumber||"--"))):"","individual"===a.clientType?r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",a.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(a.cost/a.disinfectors.length).toLocaleString()," UZS)"):"",r.a.createElement("li",null,"\u0424\u043e\u0440\u043c\u0430 \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0417\u0430\u043a\u0430\u0437\u0430 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},a.completedAt)))))),r.a.createElement("div",{className:"col-md-6 col-sm-10 mt-3"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body py-1"},r.a.createElement("h3",{className:"text-center mt-3"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u041d\u043e\u0432\u044b\u0439 \u0417\u0430\u043a\u0430\u0437"),r.a.createElement("form",{onSubmit:this.onSubmit},this.props.order.loading?r.a.createElement("p",null,"\u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u044b \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f..."):r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"disinfectorId"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430:"),r.a.createElement("select",{className:"form-control",name:"disinfectorId",value:this.state.disinfectorId,onChange:this.onChange,required:!0},s.map(function(e,t){return r.a.createElement("option",{key:t,value:e.value},e.label)}))),r.a.createElement(Tt,{label:"\u0414\u0430\u0442\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430",name:"date",type:"date",value:this.state.date,onChange:this.onChange,error:t.date,required:!0}),r.a.createElement(Tt,{label:"\u0412\u0440\u0435\u043c\u044f (\u0447\u0430\u0441\u044b:\u043c\u0438\u043d\u0443\u0442\u044b:AM/PM)",name:"timeFrom",type:"time",value:this.state.timeFrom,onChange:this.onChange,error:t.timeFrom,required:!0}),r.a.createElement("div",{className:"border-bottom"}),r.a.createElement("label",{htmlFor:"typeOfService"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u0437\u0430\u043a\u0430\u0437\u0430 (\u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e):"),o,r.a.createElement("div",{className:"border-bottom"}),r.a.createElement("label",{htmlFor:"comment"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 (\u044d\u0442\u043e \u043f\u043e\u043b\u0435 \u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435):"),r.a.createElement(Rt,{name:"comment",placeholder:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 (\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043d\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435)",value:this.state.comment,onChange:this.onChange,error:t.comment}),r.a.createElement("button",{type:"submit",className:"btn btn-success"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))))))}}]),t}(n.Component),zr=Object(S.b)(function(e){return{auth:e.auth,order:e.order,admin:e.admin,fail:e.fail,errors:e.errors}},{getAllUsers:je,getFailOrderById:function(e){return function(){var t=Object(Vr.a)(Kr.a.mark(function t(a){var n;return Kr.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"SET_LOADING_FAILED_ORDER"}),t.prev=1,t.next=4,g.a.post("/order/get-order-by-id",{id:e});case 4:n=t.sent,a({type:"SET_FAILED_ORDER",payload:n.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:y,payload:t.t0.response.data});case 11:case"end":return t.stop()}},t,null,[[1,8]])}));return function(e){return t.apply(this,arguments)}}()},setFailedOrder:function(e){return function(t){t({type:"SET_FAILED_ORDER",payload:e})}},createOrderAfterFail:function(e,t,a){return function(){var n=Object(Vr.a)(Kr.a.mark(function n(r){return Kr.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r({type:"DELETE_QUERY_FROM_STATE",payload:e.failedOrder._id}),g.a.post("/fail/create-new-after-fail",{object:e}).then(function(){var e="";return e="admin"===a||"accountant"===a?"/".concat(a):"/".concat(a,"/order-queries"),t.push(e)}).catch(function(e){return r({type:y,payload:e})});case 2:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()}})(Object(p.g)(Jr)),$r=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={fails:[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.fail.fails&&this.props.fail.fails.length>0&&this.setState({fails:this.props.fail.fails})}},{key:"render",value:function(){var e=nt(this.state.fails),t=(e=ze(e)).map(function(e,t){return r.a.createElement("li",{key:t},e.material,": ",e.amount.toLocaleString()," ",e.unit)}),a=0,n=0,l=this.state.fails.map(function(e,t){e.failed&&a++,e.hasOwnProperty("prevFailedOrder")&&n++;var l=[];e.disinfectors.forEach(function(e){l.push({user:e.user,consumption:e.consumption})});var c=l.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("p",{className:"mb-0"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c: ",e.user.occupation," ",e.user.name),e.consumption.map(function(e,t){return r.a.createElement("p",{key:t,className:"mb-0"},e.material,": ",e.amount.toLocaleString()," ",e.unit)}))});return r.a.createElement("div",{className:"col-lg-4 col-md-6",key:t},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},e.prevFailedOrder&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),e.failed&&r.a.createElement("li",null,r.a.createElement("h4",null,r.a.createElement("i",{className:"fas fas fa-exclamation"})," \u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 ",r.a.createElement("i",{className:"fas fas fa-exclamation"}))),e.disinfectorId&&r.a.createElement("li",null,"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439: ",e.disinfectorId.occupation," ",e.disinfectorId.name),e.failed&&e.nextOrdersAfterFailArray&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-primary"},"\u041f\u043e\u0432\u0442\u043e\u0440\u043e\u0432 \u0443 \u044d\u0442\u043e\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430: ",e.nextOrdersAfterFailArray.length),e.nextOrdersAfterFailArray.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-primary"},"\u0412\u0440\u0435\u043c\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.nextOrdersAfterFailArray[e.nextOrdersAfterFailArray.length-1].dateFrom)),r.a.createElement("li",{className:"text-primary"},"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0437\u0430\u043a\u0430\u0437: ",e.nextOrdersAfterFailArray[e.nextOrdersAfterFailArray.length-1].disinfectorId.occupation," ",e.nextOrdersAfterFailArray[e.nextOrdersAfterFailArray.length-1].disinfectorId.name))),e.prevFailedOrder&&e.prevFailedOrder.disinfectorId&&r.a.createElement("li",{className:"text-primary"},"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0439 \u043d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437: ",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.prevFailedOrder.dateFrom)," (",e.prevFailedOrder.disinfectorId.occupation," ",e.prevFailedOrder.disinfectorId.name,")"),e.operatorDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.operatorConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.operatorCheckedAt),")"),r.a.createElement("li",null,"\u0411\u0430\u043b\u043b (0-5): ",e.score)):r.a.createElement("li",{className:"text-danger"},"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.operatorCheckedAt),")")):r.a.createElement("li",null,"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.accountantDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.accountantConfirmed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"text-success"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.accountantCheckedAt),")"),r.a.createElement("li",null,"\u0421\u0447\u0435\u0442-\u0424\u0430\u043a\u0442\u0443\u0440\u0430: ",e.invoice?e.invoice:"--"),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement("li",{className:"text-danger"},"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.accountantCheckedAt),")")):r.a.createElement(r.a.Fragment,null,e.adminDecided?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0410\u0434\u043c\u0438\u043d \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443"),e.adminConfirmed?r.a.createElement("li",{className:"text-success"},"\u0410\u0434\u043c\u0438\u043d \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.adminCheckedAt),")"):r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u043c\u0438\u043d \u041e\u0442\u043a\u043b\u043e\u043d\u0438\u043b (",r.a.createElement(re.a,{format:"DD/MM/YYYY HH:mm"},e.adminCheckedAt),")")):r.a.createElement("li",null,"\u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440 \u0435\u0449\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043b \u0437\u0430\u044f\u0432\u043a\u0443")),"corporate"===e.clientType?r.a.createElement(r.a.Fragment,null,e.clientId?r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.clientId.name):r.a.createElement("li",{className:"text-danger"},"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u041a\u043b\u0438\u0435\u043d\u0442"),r.a.createElement("li",{className:"text-danger"},"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.client)):"","individual"===e.clientType?r.a.createElement("li",{className:"text-danger"},"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u041a\u043b\u0438\u0435\u043d\u0442: ",e.client):"",r.a.createElement("li",{className:"text-danger"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",e.phone),r.a.createElement("li",{className:"text-danger"},"\u0414\u0430\u0442\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},e.dateFrom)),r.a.createElement("li",{className:"text-danger"},"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: \u0421 ",r.a.createElement(re.a,{format:"HH:mm"},e.dateFrom)," \u041f\u041e ",r.a.createElement(re.a,{format:"HH:mm"},e.completedAt)),r.a.createElement("li",{className:"text-danger"},"\u0410\u0434\u0440\u0435\u0441: ",e.address),r.a.createElement("li",{className:"text-danger"},"\u0422\u0438\u043f \u0443\u0441\u043b\u0443\u0433\u0438: ",e.typeOfService),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430: ",e.comment?e.comment:"--"),r.a.createElement("li",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0442\u043e\u0440\u0430: ",e.disinfectorComment?e.disinfectorComment:"--"),r.a.createElement("li",null,"\u0421\u0440\u043e\u043a \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0438 (\u0432 \u043c\u0435\u0441\u044f\u0446\u0430\u0445): ",e.guarantee),r.a.createElement("li",null,"\u0420\u0430\u0441\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 (\u0437\u0430\u043a\u0430\u0437 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u043b\u0438 ",e.disinfectors.length," \u0447\u0435\u043b):"),r.a.createElement("ul",{className:"font-bold mb-0"},c),"corporate"===e.clientType?r.a.createElement(r.a.Fragment,null,"cash"===e.paymentMethod?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u041d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)")):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"\u0422\u0438\u043f \u041f\u043b\u0430\u0442\u0435\u0436\u0430: \u0411\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"),r.a.createElement("li",null,"\u041d\u043e\u043c\u0435\u0440 \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430: ",e.contractNumber||"--"))):"","individual"===e.clientType?r.a.createElement("li",null,"\u041e\u0431\u0449\u0430\u044f \u0421\u0443\u043c\u043c\u0430: ",e.cost.toLocaleString()," UZS (\u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u043f\u043e ",(e.cost/e.disinfectors.length).toLocaleString()," UZS)"):"",r.a.createElement(da,{order:e,shouldLoadOrder:!0})))))});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},r.a.createElement("li",null,"\u0412\u0441\u0435\u0433\u043e \u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0445 \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",a),r.a.createElement("li",null,"\u0412\u0441\u0435\u0433\u043e \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0445 \u0417\u0430\u043a\u0430\u0437\u043e\u0432: ",n))))),r.a.createElement("div",{className:"col-lg-4 col-md-6"},r.a.createElement("div",{className:"card order mt-2"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h4",{className:"text-center"},"\u041e\u0431\u0449\u0438\u0439 \u0420\u0430\u0441\u0445\u043e\u0434 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u043d\u0430 \u044d\u0442\u0438\u0445 \u0437\u0430\u043a\u0430\u0437\u0430\u0445"),r.a.createElement("ul",{className:"font-bold mb-0 list-unstyled"},t))))),this.state.fails.length>0&&r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0438 \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0417\u0430\u043a\u0430\u0437\u044b")),l))}}]),t}(n.Component),el=Object(S.b)(function(e){return{auth:e.auth,order:e.order,admin:e.admin,fail:e.fail,errors:e.errors}})(Object(p.g)($r)),tl=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={month:"",year:"",day:"",headingMonth:"",headingYear:"",headingDay:"",hoverRange:void 0,selectedDays:[]},a.onChange=function(e){return a.setState(Object(Ze.a)({},e.target.name,e.target.value))},a.failedOrdersMonth=function(e){e.preventDefault();var t=Number(a.state.month),n=Number(a.state.year),r={userOccupation:a.props.auth.user.occupation,userId:a.props.auth.user.id,type:"month",month:t,year:n};a.props.getFailedOrders(r),a.setState({headingMonth:t,headingYear:n})},a.getSpecificMonthStats=function(e){var t=Je(e),n=t.month,r=t.year,l={userOccupation:a.props.auth.user.occupation,userId:a.props.auth.user.id,type:"month",month:n,year:r};a.props.getFailedOrders(l),a.setState({headingMonth:n,headingYear:r})},a.failedOrdersDay=function(e){e.preventDefault();var t={userOccupation:a.props.auth.user.occupation,userId:a.props.auth.user.id,type:"day",day:a.state.day};a.props.getFailedOrders(t),a.setState({headingDay:a.state.day.split("-").reverse().join("-")})},a.handleDayChange=function(e){var t={userOccupation:a.props.auth.user.occupation,userId:a.props.auth.user.id,type:"week",days:ot(it(e).from)};a.props.getFailedOrders(t),a.setState({selectedDays:ot(it(e).from)})},a.handleDayEnter=function(e){a.setState({hoverRange:it(e)})},a.handleDayLeave=function(){a.setState({hoverRange:void 0})},a.handleWeekClick=function(e,t,n){var r={userOccupation:a.props.auth.user.occupation,userId:a.props.auth.user.id,type:"week",days:ot(it(t[0]).from)};a.props.getFailedOrders(r),a.setState({selectedDays:ot(it(t[0]).from)})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.fail.searchVars.method;if(e&&this.setState({type:e}),"day"===e){var t=this.props.fail.searchVars.day.split("-").reverse().join("-");this.setState({headingDay:t})}"week"===e&&this.setState({selectedDays:this.props.fail.searchVars.days}),"month"===e&&this.setState({headingMonth:this.props.fail.searchVars.month,headingYear:this.props.fail.searchVars.year})}},{key:"render",value:function(){var e=this,t=Ve(),a=t.monthLabels,n=t.yearLabels.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),l=a.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}),c=this.state,s=c.hoverRange,o=c.selectedDays,i=o.length>0,m={hoverRange:s,selectedRange:i&&{from:o[0],to:o[6]},hoverRangeStart:s&&s.from,hoverRangeEnd:s&&s.to,selectedRangeStart:i&&o[0],selectedRangeEnd:i&&o[6]};return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center"},"\u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0438 \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("form",{onSubmit:this.failedOrdersMonth,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0438 \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b \u043f\u043e \u043c\u0435\u0441\u044f\u0446\u0430\u043c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"year"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0413\u043e\u0434:")),r.a.createElement("select",{name:"year",className:"form-control",onChange:this.onChange,required:!0},n)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"month"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u041c\u0435\u0441\u044f\u0446:")),r.a.createElement("select",{name:"month",className:"form-control",onChange:this.onChange,required:!0},l)),r.a.createElement("button",{type:"submit",className:"btn btn-success mr-1 mt-1"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"),r.a.createElement("button",{type:"button",className:"btn btn-danger mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("current")}},"\u042d\u0442\u043e\u0442 \u043c\u0435\u0441\u044f\u0446"),r.a.createElement("button",{type:"button",className:"btn btn-primary mr-1 mt-1",onClick:function(){return e.getSpecificMonthStats("previous")}},"\u041f\u0440\u043e\u0448\u043b\u044b\u0439 \u043c\u0435\u0441\u044f\u0446"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 mt-3"},r.a.createElement("form",{onSubmit:this.failedOrdersDay,className:"form-bg p-2"},r.a.createElement("h4",{className:"text-center"},"\u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0438 \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b \u043f\u043e \u0434\u043d\u044f\u043c"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"day"},r.a.createElement("strong",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0414\u0435\u043d\u044c:")),r.a.createElement("input",{type:"date",name:"day",className:"form-control",onChange:this.onChange,required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fas fa-search"})," \u0418\u0441\u043a\u0430\u0442\u044c"))),r.a.createElement("div",{className:"col-lg-4 col-md-6 weekly-stats mt-3"},r.a.createElement("div",{className:"SelectedWeekExample form-bg font-weight-bold"},r.a.createElement("h4",{className:"text-center"},"\u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0438 \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b \u043f\u043e \u043d\u0435\u0434\u0435\u043b\u044f\u043c"),r.a.createElement(dt.a,{selectedDays:o,showWeekNumbers:!0,showOutsideDays:!0,modifiers:m,firstDayOfWeek:1,onDayClick:this.handleDayChange,onDayMouseEnter:this.handleDayEnter,onDayMouseLeave:this.handleDayLeave,onWeekClick:this.handleWeekClick})))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-12"},"week"===this.props.fail.searchVars.method?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0438 \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b \u0437\u0430 ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[0])," - ",r.a.createElement(re.a,{format:"DD/MM/YYYY"},this.state.selectedDays[6])):"","month"===this.props.fail.searchVars.method?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044be \u0438 \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b \u0437\u0430 ",Ke.a[this.state.headingMonth],", ",this.state.headingYear):"","day"===this.props.fail.searchVars.method?r.a.createElement("h2",{className:"text-center pl-3 pr-3"},"\u041d\u0435\u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0438 \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b \u0437\u0430 ",this.state.headingDay):"")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},this.props.fail.loading?r.a.createElement(me,null):r.a.createElement(el,null))))}}]),t}(n.Component),al=Object(S.b)(function(e){return{auth:e.auth,order:e.order,admin:e.admin,fail:e.fail,errors:e.errors}},{getFailedOrders:function(e){return function(){var t=Object(Vr.a)(Kr.a.mark(function t(a){var n;return Kr.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"SET_LOADING_FAILED_ORDER"}),a({type:"SET_FAIL_SEARCH_VARS",payload:e}),t.prev=2,t.next=5,g.a.post("/fail/get-failed-orders",{object:e});case 5:n=t.sent,a({type:"GET_FAILED_ORDERS",payload:n.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),a({type:y,payload:t.t0.response.data});case 12:case"end":return t.stop()}},t,null,[[2,9]])}));return function(e){return t.apply(this,arguments)}}()}})(Object(p.g)(tl));a(211),a(212);if(localStorage.jwtToken){b(localStorage.jwtToken);var nl=E()(localStorage.jwtToken);G.dispatch(v(nl));var rl=Date.now()/1e3;nl.exp<rl&&(G.dispatch(N()),G.dispatch({type:"CLEAR_CURRENT_PROFILE"}),window.location.href="/login")}var ll=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={theme:localStorage.getItem("proTeamTheme")||"light"},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;G.subscribe(function(){e.setState({theme:G.getState().options.theme})})}},{key:"render",value:function(){return"dark"===this.state.theme?document.body.style.background="#212d3b":document.body.style.background="white",r.a.createElement(S.a,{store:G},r.a.createElement(u.a,null,r.a.createElement("div",{className:"App ".concat(this.state.theme)},r.a.createElement(z,null),r.a.createElement(p.b,{exact:!0,path:"/login",component:Zr}),r.a.createElement(p.d,null,r.a.createElement(Q,{exact:!0,path:"/"})),r.a.createElement(p.d,null,r.a.createElement(W,{exact:!0,path:"/anons",component:qr})),r.a.createElement(p.d,null,r.a.createElement(W,{exact:!0,path:"/not-completed-orders",component:fr})),r.a.createElement(p.d,null,r.a.createElement(W,{exact:!0,path:"/order-full-details/:id",component:hr})),r.a.createElement(p.d,null,r.a.createElement(P,{exact:!0,path:"/admin",component:Pe})),r.a.createElement(p.d,null,r.a.createElement(P,{exact:!0,path:"/register",component:Wr})),r.a.createElement(p.d,null,r.a.createElement(W,{exact:!0,path:"/admin/stats",component:pt})),r.a.createElement(p.d,null,r.a.createElement(W,{exact:!0,path:"/admin/adv-stats",component:gt})),r.a.createElement(p.d,null,r.a.createElement(W,{exact:!0,path:"/admin/disinf-stats",component:Nt})),r.a.createElement(p.d,null,r.a.createElement(W,{exact:!0,path:"/admin/operator-stats",component:Ct})),r.a.createElement(p.d,null,r.a.createElement(P,{exact:!0,path:"/admin/order-queries",component:wt})),r.a.createElement(p.d,null,r.a.createElement(P,{exact:!0,path:"/admin/materials",component:Yt})),r.a.createElement(p.d,null,r.a.createElement(P,{exact:!0,path:"/admin/material-coming",component:Gt})),r.a.createElement(p.d,null,r.a.createElement(P,{exact:!0,path:"/admin/material-coming-history",component:Pt})),r.a.createElement(p.d,null,r.a.createElement(P,{exact:!0,path:"/admin/material-history",component:Vt})),r.a.createElement(p.d,null,r.a.createElement(W,{exact:!0,path:"/edit-order/:orderId",component:Bt})),r.a.createElement(p.d,null,r.a.createElement(P,{exact:!0,path:"/admin/users",component:na})),r.a.createElement(p.d,null,r.a.createElement(P,{exact:!0,path:"/admin/edit-user/:userId",component:la})),r.a.createElement(p.d,null,r.a.createElement(W,{exact:!0,path:"/add-client",component:$t})),r.a.createElement(p.d,null,r.a.createElement(W,{exact:!0,path:"/edit-client/:id",component:ta})),r.a.createElement(p.d,null,r.a.createElement(W,{exact:!0,path:"/clients",component:sa})),r.a.createElement(p.d,null,r.a.createElement(W,{exact:!0,path:"/client/:clientId",component:Ea})),r.a.createElement(p.d,null,r.a.createElement(P,{exact:!0,path:"/admin/new/mat",component:Sa})),r.a.createElement(p.d,null,r.a.createElement(P,{exact:!0,path:"/admin/set-disinfector-materials/:id",component:ga})),r.a.createElement(p.d,null,r.a.createElement(P,{exact:!0,path:"/admin/set-current-materials",component:ya})),r.a.createElement(p.d,null,r.a.createElement(Z,{exact:!0,path:"/subadmin",component:Ia})),r.a.createElement(p.d,null,r.a.createElement(Z,{exact:!0,path:"/subadmin/orders",component:Ba})),r.a.createElement(p.d,null,r.a.createElement(Z,{exact:!0,path:"/subadmin/queries",component:cn})),r.a.createElement(p.d,null,r.a.createElement(Z,{exact:!0,path:"/subadmin/stats",component:dn})),r.a.createElement(p.d,null,r.a.createElement(Z,{exact:!0,path:"/subadmin/materials",component:Ga})),r.a.createElement(p.d,null,r.a.createElement(Z,{exact:!0,path:"/subadmin/material-coming-history",component:Pa})),r.a.createElement(p.d,null,r.a.createElement(Z,{exact:!0,path:"/subadmin/material-distrib-history",component:Va})),r.a.createElement(p.d,null,r.a.createElement(V,{exact:!0,path:"/disinfector",component:an})),r.a.createElement(p.d,null,r.a.createElement(W,{exact:!0,path:"/order-complete-form/:id",component:pn})),r.a.createElement(p.d,null,r.a.createElement(V,{exact:!0,path:"/disinfector/queries",component:cn})),r.a.createElement(p.d,null,r.a.createElement(V,{exact:!0,path:"/disinfector/stats",component:dn})),r.a.createElement(p.d,null,r.a.createElement(V,{exact:!0,path:"/disinfector/distrib-materials",component:En})),r.a.createElement(p.d,null,r.a.createElement(V,{exact:!0,path:"/disinfector/mat-com-history",component:yn})),r.a.createElement(p.d,null,r.a.createElement(V,{exact:!0,path:"/disinfector/mat-distrib-history",component:Sn})),r.a.createElement(p.d,null,r.a.createElement(W,{exact:!0,path:"/returned-queries",component:Cn})),r.a.createElement(p.d,null,r.a.createElement(X,{exact:!0,path:"/operator",component:xn})),r.a.createElement(p.d,null,r.a.createElement(X,{exact:!0,path:"/create-order",component:_n})),r.a.createElement(p.d,null,r.a.createElement(W,{exact:!0,path:"/order-details/:id",component:Ln})),r.a.createElement(p.d,null,r.a.createElement(X,{exact:!0,path:"/operator/order-queries",component:qn})),r.a.createElement(p.d,null,r.a.createElement(X,{exact:!0,path:"/order-confirm/:id",component:Wn})),r.a.createElement(p.d,null,r.a.createElement(X,{exact:!0,path:"/operator/repeat-orders",component:Zn})),r.a.createElement(p.d,null,r.a.createElement(X,{exact:!0,path:"/create-repeat-order-form/:orderId",component:Kn})),r.a.createElement(p.d,null,r.a.createElement(W,{exact:!0,path:"/search-orders",component:br})),r.a.createElement(p.d,null,r.a.createElement(X,{exact:!0,path:"/operator/stats",component:$n})),r.a.createElement(p.d,null,r.a.createElement(K,{exact:!0,path:"/accountant",component:er})),r.a.createElement(p.d,null,r.a.createElement(K,{exact:!0,path:"/accountant/queries",component:cr})),r.a.createElement(p.d,null,r.a.createElement(K,{exact:!0,path:"/accountant/order-confirm/:id",component:or})),r.a.createElement(p.d,null,r.a.createElement(K,{exact:!0,path:"/accountant/stats",component:ur})),r.a.createElement(p.d,null,r.a.createElement(W,{exact:!0,path:"/fail/add-new/:id",component:zr})),r.a.createElement(p.d,null,r.a.createElement(W,{exact:!0,path:"/fail/see",component:al})),r.a.createElement(p.d,null,r.a.createElement(W,{exact:!0,path:"/chat",component:Fr})),r.a.createElement(p.d,null,r.a.createElement(W,{exact:!0,path:"/chat/:chatId",component:Lr})),r.a.createElement(ee,null))))}}]),t}(n.Component),cl=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function sl(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(r.a.createElement(ll,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");cl?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):sl(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):sl(t,e)})}}()},28:function(e,t){e.exports=[{label:"\u0414\u0435\u0437\u0438\u043d\u0441\u0435\u043a\u0446\u0438\u044f - \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0441 \u043d\u0430\u0441\u0435\u043a\u043e\u043c\u044b\u0445",value:"\u0414\u0435\u0437\u0438\u043d\u0441\u0435\u043a\u0446\u0438\u044f - \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0441 \u043d\u0430\u0441\u0435\u043a\u043e\u043c\u044b\u0445"},{label:"\u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0446\u0438\u044f - \u043e\u0442 \u0438\u043d\u0444\u0435\u043a\u0446\u0438\u0439",value:"\u0414\u0435\u0437\u0438\u043d\u0444\u0435\u043a\u0446\u0438\u044f - \u043e\u0442 \u0438\u043d\u0444\u0435\u043a\u0446\u0438\u0439"},{label:"\u041a\u043b\u043e\u043f\u0430",value:"\u041a\u043b\u043e\u043f\u0430"},{label:"\u0422\u0430\u0440\u0430\u043a\u0430\u043d",value:"\u0422\u0430\u0440\u0430\u043a\u0430\u043d"},{label:"\u0421\u0438\u0447\u043a\u043e\u043d",value:"\u0421\u0438\u0447\u043a\u043e\u043d"},{label:"\u041a\u0430\u043b\u0430\u043c\u0443\u0448",value:"\u041a\u0430\u043b\u0430\u043c\u0443\u0448"},{label:"\u041f\u0430\u0448\u0448\u0430",value:"\u041f\u0430\u0448\u0448\u0430"},{label:"\u0427\u0438\u0432\u0438\u043d",value:"\u0427\u0438\u0432\u0438\u043d"},{label:"\u0427\u0443\u043c\u043e\u043b\u0438",value:"\u0427\u0443\u043c\u043e\u043b\u0438"},{label:"\u0411\u0443\u0440\u0433\u0430",value:"\u0411\u0443\u0440\u0433\u0430"},{label:"\u041a\u0430\u043b\u0442\u0430\u043a\u0435\u0441\u0430\u043a",value:"\u041a\u0430\u043b\u0442\u0430\u043a\u0435\u0441\u0430\u043a"},{label:"\u0421\u043a\u043e\u0440\u043f\u0438\u043e\u043d",value:"\u0421\u043a\u043e\u0440\u043f\u0438\u043e\u043d"},{label:"\u041a\u043b\u0435\u0449\u0438",value:"\u041a\u043b\u0435\u0449\u0438"},{label:"\u0418\u043b\u043e\u043d",value:"\u0418\u043b\u043e\u043d"},{label:"\u0428\u0438\u043b\u043b\u0438\u043a \u043a\u0443\u0440\u0442",value:"\u0428\u0438\u043b\u043b\u0438\u043a \u043a\u0443\u0440\u0442"},{label:"\u0422\u0435\u0440\u043c\u0438\u0442",value:"\u0422\u0435\u0440\u043c\u0438\u0442"},{label:"\u041e\u043a \u043f\u0430\u0448\u0448\u0430",value:"\u041e\u043a \u043f\u0430\u0448\u0448\u0430"},{label:"\u041a\u0443\u0440\u0442",value:"\u041a\u0443\u0440\u0442"},{label:"\u041f\u043b\u0435\u0441\u0435\u043d\u044c",value:"\u041f\u043b\u0435\u0441\u0435\u043d\u044c"},{label:"\u041f\u0440\u043e\u0444\u0438\u043b\u0430\u043a\u0442\u0438\u043a\u0430",value:"\u041f\u0440\u043e\u0444\u0438\u043b\u0430\u043a\u0442\u0438\u043a\u0430"},{label:"\u0414\u0435\u0437\u043e\u0434\u043e\u0440\u0430\u0446\u0438\u044f - \u043e\u0442 \u0437\u0430\u043f\u0430\u0445\u0430",value:"\u0414\u0435\u0437\u043e\u0434\u043e\u0440\u0430\u0446\u0438\u044f - \u043e\u0442 \u0437\u0430\u043f\u0430\u0445\u0430"},{label:"\u0424\u0443\u043c\u0438\u0433\u0430\u0446\u0438\u044f - \u0433\u0430\u0437\u0430\u0446\u0438\u044f",value:"\u0424\u0443\u043c\u0438\u0433\u0430\u0446\u0438\u044f - \u0433\u0430\u0437\u0430\u0446\u0438\u044f"},{label:"\u041e\u0441\u043c\u043e\u0442\u0440 \u0438 \u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u0438",value:"\u041e\u0441\u043c\u043e\u0442\u0440 \u0438 \u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u0438"}]},33:function(e,t){e.exports=[{label:"Google",value:"Google"},{label:"Yandex",value:"Yandex"},{label:"Facebook",value:"Facebook"},{label:"Instagram",value:"Instagram"},{label:"Olx.uz",value:"Olx.uz"},{label:"\u0411\u0430\u043d\u043d\u0435\u0440\u044b",value:"\u0411\u0430\u043d\u043d\u0435\u0440\u044b"},{label:"\u041c\u0430\u0448\u0438\u043d\u0430 \u0431\u0430\u043d\u043d\u0435\u0440",value:"\u041c\u0430\u0448\u0438\u043d\u0430 \u0431\u0430\u043d\u043d\u0435\u0440"},{label:"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 (\u0441\u043e\u0441\u0435\u0434\u0438, \u0434\u0440\u0443\u0437\u044c\u044f,  \u0440\u043e\u0434\u0441\u0442\u0432\u0435\u043d\u043d\u0438\u043a\u0438, \u043f\u0430\u0440\u0442\u043d\u0435\u0440\u044b)",value:"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438"},{label:"SMS",value:"SMS"},{label:"\u0424\u043b\u0430\u0435\u0440\u044b",value:"\u0424\u043b\u0430\u0435\u0440\u044b"}]}},[[110,1,2]]]);
//# sourceMappingURL=main.3dfafc92.chunk.js.map